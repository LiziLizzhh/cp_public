import{c as ut,I as mo,T as xo,g as yo,d as Ou,_ as Qt,a as Da,b as Ru,e as Pu,f as Iu,h as gi,u as Au,i as kr,j as mn,k as yr,s as gr,r as Zt,l as Ot,o as ct,m as At,n as Bt,p as Tr,q as tt,w as ht,t as So,v as zu,x as Bu,y as Gu,z as Ut,F as ur,A as Dr,B as Kt,C as bo,D as ku,E as Zn,G as Fu,H as Nu,J as Bn}from"./index-BRH9ePPX.js";var Lu={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M752 664c-28.5 0-54.8 10-75.4 26.7L469.4 540.8a160.68 160.68 0 000-57.6l207.2-149.9C697.2 350 723.5 360 752 360c66.2 0 120-53.8 120-120s-53.8-120-120-120-120 53.8-120 120c0 11.6 1.6 22.7 4.7 33.3L439.9 415.8C410.7 377.1 364.3 352 312 352c-88.4 0-160 71.6-160 160s71.6 160 160 160c52.3 0 98.7-25.1 127.9-63.8l196.8 142.5c-3.1 10.6-4.7 21.8-4.7 33.3 0 66.2 53.8 120 120 120s120-53.8 120-120-53.8-120-120-120zm0-476c28.7 0 52 23.3 52 52s-23.3 52-52 52-52-23.3-52-52 23.3-52 52-52zM312 600c-48.5 0-88-39.5-88-88s39.5-88 88-88 88 39.5 88 88-39.5 88-88 88zm440 236c-28.7 0-52-23.3-52-52s23.3-52 52-52 52 23.3 52 52-23.3 52-52 52z"}}]},name:"share-alt",theme:"outlined"};function mi(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?Object(arguments[r]):{},n=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(e).filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.forEach(function(a){Wu(t,a,e[a])})}return t}function Wu(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var Ca=function(r,e){var n=mi({},r,e.attrs);return ut(mo,mi({},n,{icon:Lu}),null)};Ca.displayName="ShareAltOutlined";Ca.inheritAttrs=!1;var Hu={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"}}]},name:"user",theme:"outlined"};function xi(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?Object(arguments[r]):{},n=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(e).filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.forEach(function(a){Yu(t,a,e[a])})}return t}function Yu(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var wa=function(r,e){var n=xi({},r,e.attrs);return ut(mo,xi({},n,{icon:Hu}),null)};wa.displayName="UserOutlined";wa.inheritAttrs=!1;const _r=(t,r)=>new xo(t).setAlpha(r).toRgbString(),jr=(t,r)=>new xo(t).lighten(r).toHexString(),Xu=t=>{const r=yo(t,{theme:"dark"});return{1:r[0],2:r[1],3:r[2],4:r[3],5:r[6],6:r[5],7:r[4],8:r[6],9:r[5],10:r[4]}},Vu=(t,r)=>{const e=t||"#000",n=r||"#fff";return{colorBgBase:e,colorTextBase:n,colorText:_r(n,.85),colorTextSecondary:_r(n,.65),colorTextTertiary:_r(n,.45),colorTextQuaternary:_r(n,.25),colorFill:_r(n,.18),colorFillSecondary:_r(n,.12),colorFillTertiary:_r(n,.08),colorFillQuaternary:_r(n,.04),colorBgElevated:jr(e,12),colorBgContainer:jr(e,8),colorBgLayout:jr(e,0),colorBgSpotlight:jr(e,26),colorBorder:jr(e,26),colorBorderSecondary:jr(e,19)}},qu=(t,r)=>{const e=Object.keys(Ou).map(a=>{const i=yo(t[a],{theme:"dark"});return new Array(10).fill(1).reduce((o,s,u)=>(o[`${a}-${u+1}`]=i[u],o),{})}).reduce((a,i)=>(a=Qt(Qt({},a),i),a),{}),n=r??Da(t);return Qt(Qt(Qt({},n),e),Ru(t,{generateColorPalettes:Xu,generateNeutralColorPalettes:Vu}))};function ju(t){const{sizeUnit:r,sizeStep:e}=t,n=e-2;return{sizeXXL:r*(n+10),sizeXL:r*(n+6),sizeLG:r*(n+2),sizeMD:r*(n+2),sizeMS:r*(n+1),size:r*n,sizeSM:r*n,sizeXS:r*(n-1),sizeXXS:r*(n-1)}}const Uu=(t,r)=>{const e=r??Da(t),n=e.fontSizeSM,a=e.controlHeight-4;return Qt(Qt(Qt(Qt(Qt({},e),ju(r??t)),Pu(n)),{controlHeight:a}),Iu(Qt(Qt({},e),{controlHeight:a})))};function Ku(){const[t,r,e]=Au();return{theme:t,token:r,hashId:e}}const _o={defaultConfig:gi,defaultSeed:gi.token,useToken:Ku,defaultAlgorithm:Da,darkAlgorithm:qu,compactAlgorithm:Uu},Zu="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAI4AAAA0CAYAAABcrAAbAAAACXBIWXMAAAsTAAALEwEAmpwYAAAPaklEQVR4nO2dbYwd51XHf+eZmfuyd99tr19jJ45j6jqJHdnkRSGhkKSljXCkqHEVqCjkg1PEB4RAxB9ARQiJrooQAgkp+VAEoqXYSG1BSqhilRQ1SdPWEiQ2iZt6nThO7PWuve97X2bmOXyYufZ6986du3tndx3LP2l09+7OPPPMnf895zznPPOsqCo3uclikbQdVNUA9wMHgAeBTcBGoLi8XaMMfBRvPwK+C7wuInaZz3uTJqQaGlV1VPW3VfV9vX44q6rPqKqzMh/TTeajqsniUdXdqnpiNRWSwglVvWtlP7Klo6qH5vT9yGr3px00Fs4CV6WqB4B/BrpWvluLYhr4ooh8d7U6oKp9wCFgH/BUg12OAmPxPnN5VkReSGhz+5y2+oDnUrpxGEBEBlvsdltoI2ujqgdUNVxh69EOoao+sRIf2LzPabuqPt9GvxtaHVXtU9XL7bSrqvs0tgpZb3EfrxWPRu5pso1OrxZTuoJuS691O0vlckLbz2XQtmokoD5dRuGY+I0D/CvXv3tqRCfwL7rMAXN8I14Gns+guT6N3Nx89mXQNkSu7jTwaEbtLcDEr78F7F6uk6wAu4EvLVfjGsUdL5PtjVhO4dTbf5mF8VUmiEZ5mjPA1lYPGrOWf6qUOS41OvPwa6bAgUWmdcqq5BFMHJ6/+Zpy9sfgfwgeUANuf0i4dR+UBsD1Ups8B2zLOs8zRzTbs2wXeExEjs071+llOA/As0DDYHwxiMgVlyWq+iDww1YPPlsL+fPRaUbdEJNXyEM1b3lYCvwRXbTiLyYD5dwJ6OsUyj689IJizwulHHR1Q8GFDhecGhT6oPsOuOVR6NqQ2vQvicirrV5LGrE7+SnpN/MwcFREhuYcux04QrIVaVU4h5NGTKpaH3F9NaV/APuB4y3sl8hc4Rjg11s9sBwqf/fRLCMVixsIEggEkAsMP6DCt5htqZ0Zq4ycgdkR5RtfUSbeFcQB40EYglXwFUwnuCGEp+Hst+DSW5CSt8x6hJVmaY4C/SIyOFc0APH7g4s836KsTSyoQaIKwLNEQ/8kjtDYPS4JQ1RGaIlvD9d4ZyIkF0aCkVg8pqb0zczybWZ5myC1nXKgjA8rQQVmRgSvIxJEaEEVgvjVWggNqAEzClPHYez/mjb9QKvXkoZGQ+ZmMcdhETkoIok3KxZPkotodpOXwgtAP5GYG7GdDOMdl6j2lMqlqvL98zVyIogPahTfddl95i2e/f4LbJkZ5eebt3HywO+xa90nE9sJLYyFDjMjAc7WkGJXHhsLRTUWT/xeJLI+1RA0B+4HEOahMgC5PjAL/WJL15JG7AIaJfTqJCbwGjDIwht2TETachtNOEiUNGzkvg7F/Wkbl6hgmcor530uTimFEhBAkMuz48NT/OGLX6OEj18osH18mIEX/56xg39BX7G3YTvTE3ChDOUJi1MNUYksi7UQamR5rMLwZWVkCqZQNAcmB+s8+EQAezcY1uwDuhc039K1NENV99E8Zji8CNEgIkOq+hhXXcUxIreynAzSOJu9Pf5926J1aaHKbRWOXwhww8g9WUfIVar8xg//ga7qFEFHJ8YI6nl0TV5E330N7v7cgnaCEEZHlXERglmLrSqhBeuASmRlxieUixehJkquF0wHWFcJPPhZBU4NwYma5fF1ws47F1RMsqjYN8vTDC4ltR8Hwf1L79KSGKSx1dxORsJJZWg85L1LFtcT8JVaLscDZ37EJy+cxC8WMY5BjCAi4Li4F95pKJzQB78sTAK2GsU4NoyEU61ArgTb7hHu2QKT03BmSPnggqKuYj1FClD24dX3hI0nDRu3QVdX6syQloldVFJcc1xEDmd2stZZaiyUJI5MAuSWhHNqxDIzAx1dgg0Et2a578x/4xLiGwNGwBhwDMYFqpORIuYFIcaBzn6lfF7QqjJ8GQKFicuw/zPw2UPQs66+tzB8AV56UTl5ShkvK6YIgSsEM3B+FIaHoSujXHc8fE5yUWMsfoR0Q2PSd4GfD1ucEPAhDBzWjQ+za+QkgVcAxyDm6oZxkLAGQW1BO54HW7YIBAHlinJhWilPQfdW5Y6HdI5oIvrXCr/8iKF/K8x4UM2DFhTNWyYrlvHpKDbKiGYu6tn5w+2sSShBwNItTmZD70akCqcWwAejihMPwUPrsW1siN7qZTSXR4wTuSlHYssTuStMctPGhmiojNcUszPk8d+HfQ8vdDmeC5s2Qu8WCHssVdeiOYWiMhsq02UlDNv7AABU9SmSywkviEjSEDdLshZO0vVk8gVIdVUTZWVsQnEExBfwhdsunqSwaz/8ztfQi+/jf+cvoTqFOAYxgFsAN5/YZjhTodiXJ8wH/M3Xm+ea8zlLX7+P26n4FRdPibLVwKwf5XzSqxGpJLmoIeL5LqvIUoWTlE7IJA2QanGmysrsNDhhnOyrBmw1M/D4lwFBBm7Ffeg3QWxkeVDo29K0TevD+ttdSuvSAlsFfApuAJ5FCpGromCxOcXNaduuSlUPkZyxHWyW4MuYpD4s5fxP0Vg4x5fY3gJShTM2qYQ1wAfrC/npSdbsuhsGdlxtZMd9mIHtoCG4DmxMTgAC2MChs9fgLczDLKQyS1idJKAKHWDzoAWwnsV4ik0rQqST+M1cTL5mGVnsjd5HcryWmctNF86UYmtR/obQoVQr03/bHdfu5OUx9z6JCLDpLtjWfHaADQzFbsEpGPQ/B9E3voFOjzbYU6hdHGF6bJSqZ+KiarQ5BejvFZyWwvvGxMm+pFhgpV1UQ4uzSIv3FFFRtlG8NEYGFfI6qTFOtQzUovyNFaVYyNHZV1iwn9y6H57+W/A6SH3qxofeLcJ02YNz/4t970307Ns4+59ENu+CXJzHO/MTzr3yX5yr7aG2aS8dlVlsVfF6hM5+2LTWUMi1lcdJsjbH5leuV4lWRVPPdjebLzS4iPZSSRWOXxPw44KmgNeZJ1dMCEcLrfgeIFDu2KOc/bGikkfx0QtD1P7jr1HfYmemYWaC4sw4xz/xDG/vvJe8BliUSmjp6jHcutHQVeTKfJ4lklT0W4lR1HwajqpU9VAjlxnHZvXJ8mlV9aNkVKOqk25xKoAfWRxVxaiL8dobx9hA6O8TrIAGIWpN9BpWUT/ECX0wLmfX7eLUpru51NNL9/QMBqhUYWu3cM9Wg9fGZFFVfZRkk74awmlEH/C8qrYzXfU4y1AbS40QxBJZHD8aVdnQYKXN6b1hfFqjWN+PxRNVOq21iO/j4/C9XQc4sXUvnhtAzlJ1lWIn3L7esGeDQ85py9wkmfWjKziSmstyzPw7BjxGRi5KVTvqP6cKJ+eAiSdsmSDKpZT99oQjNjqtOEB1FlWLWov1LaXpSWacIv++90l+sPsRpro7KZoZNK9MiWXHWsOnbvHw2vRRJAvneohtsmCQDEUTc+XGp7qqnBPNv5FAcAWYFGZmoHNeHXpqBv7qKyG5LvjjP3GauhFjJcrQhJYP12xh6wdnMOUy+D5vbdvLkfu+wMkNd2KtQ6k6TZgz+MD6PuHTm3PsWZPJAw1J3/DVEk5WFuc40YhwOa5jqv5DqnAKHkgYxTg5EapjMDIC69deu9/3vqmM/cRhsgIv7VYOfD7ZIkgoMH6W0A5w7At/ykvhFCU1TOT78KVArlzDrSmOHxIAgVjyjvCl9UV+pbf9PHFc0GwU3xxfJTeVBUfnbMtOqnB6uwUTRlbHE0VqwrvvWO7cdfVbPzUBZ14Vch64VXjzFTjw+eQ2jQU9fworazlYHGArvXyHCufwqfnTlOIquwIehjuLHl/uLbIt11IxvxWSvt3LWshMoVGf6lajkVs9NufvK/L471xS70RfLzgW3AByIrgKJ95QHn4Q1gxE+7zzKkwOg+NFFfBzQ3BxRBlIKCk4IYTjl9GgSjcdfJoCD5JnGssFL2TSi8TVj2GzGLqljSxfwmUl/H41hdOIY2kTx+pPHaw0qcLp7BQ6c4KtRZGRpzA9LLz0DeWLfyB89C689m+Qy4Ffi+bclKeFWpMHHnIq+BMTqD9N/R6WEEo4rK/HX5lr5RqyrkRnwbJOg8iaVOH09MDabrh0EVwDjo0eovvZG8qfHQATCt290SwKkWjTINqS6CxA5ewQtusycEt2V/PxJimndF2SPhzPwf23CU5NMH4U65iaQBWCMvR2K24sGCHenOYtd+eFYLaMdVZtGbmkG/Kx+tavJi05hPvvNOztjdyV8QVqoBVhbS90leTKoywigEKupHgdyaJYXxJqxsV2LKx5rRBJwlmOJNwNSUvCcTfAI7cZ7l9nKAKdIuzYALesl6tWhvg5qBA2bIZ1A8nD8fXdQigeklTzWn6SJjMt2+oONxotCadzG5ge2DMgfPYXDA/sEDb0C+hVwdRdVRjCzl+MZgwmsWYtVL0CpjN5luByEudqGomnLy4eZkK8NEp9AabL8RTVGwJDtLpnU5wcuLeBDa4VCjLvvUJHj3LvrzYvB5gClDt6kVLmC5emXssckjKraUuntUQsktNcrcD3AUfi4ur8fT92LtIQLQebSs9dYL3ogLosrggm/jnwYdtdcPvO5sJxSzC8djOFYmYJvTrnF7Fv4jPWqtrK6g8Nia3MEZIf8r8hrE7LwiltAHdnNMw2sWDmvqLg5OHRp9MXT3YK8MaeT+GWcm1fwDxauhaA+NntRKuzFJc1x8rcEOJohiFafLolNjwMQQlEr06gqovEr8Lezyi770mvWpscFIsd5POZZ/leX+T+zbKyz89Zf6YpqvpovMxbK0uJXC9zfdrCEK1Y3hKlNbDxcajYq7ENEsU+6/con3umtakOkodNxqErn93juzGLWro2nh7abB7uV1X1p40EpKpPabTY42laX+bt4HUyJbVt6ku5vcciUrij78PrX1eCSzBehZ674cDvCm6rIYvC/5R9uvLC7U5mcc4HwK2LXcptEatutcMQkWgapgHi4Ph0gz+lLqeyWrWq+smfWcRSqJlg4y1Dnmnj+rer6ulsu3OFI5r8eO/c8zciNc7SZVrTOG2rBxn/CJxc6ge/FOpJw4w4SXQNS+tL9Fz4Y2RbHR8jsjJNV+36uGIARCQEniZa5v7jxjTwdHwNSyYWz36ymTl3WET6F/HMeZKwrrdpHo1R1Sf05pL89dXTF+u6TmuLo7CEc748r73LmuLi4uNWbJt7vkYdeUKjZe6vd6Z0mf+Pg84ZOSX04bl4azuw1ijOqYvntDbIMCccd30IJ/7jXXrz3w7dpAHaTDjxDo5Go62zq6mQedz8R2erjMbC+X/JH3CNu20VvAAAAABJRU5ErkJggg==";class $u{constructor(){console.log("Widget Parent Class"),this._entityData=null}render(){return console.log(this._entityData),ut("div",null,[kr("没有设置渲染函数")])}_saveEntityDataRef(r){this._entityData=r}}const Ju="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAAA4RJREFUSEvtl1tIk2EYx//bcG7fRuqCijyGFFRbeiFM1CI7YBdeBiFoB1fNQ5laM0SdeYhSS03LU1OXVtBdXXTXgZJMsyLS6kok3ZyDnIegHZqz3o+0Pr8v13TlTe/NYLzv83vOz/PxZmdnZ7ECh/cfTLxusUzgwcMnGBwcwsiIETabzaNgCAQCBAcFYuOmcOxL2I2AAH/We5are3pfQq+/BYfjK4iA8PAw8Hn8RcF+fqtgtztg/aGgy+WilSa/Pj4+SE9LRWSkgiGDAR4eNqC0rBIikS+OHT0EhWIL+PzFob/TiEDfvn2H1tZO2B12FGvPIjBw/fx1BrhdfwtdXc+Rm5MJuXyzR+793eXu5y+g03Vg756dSErazw0uLCrHxMQkrtZXgcfjeQVMqjUj8wxkMn+cLy9ig8mFtPRchAQHoaDgtFegc0LKyqtgMIyiuamGDbZabcg8cQYREXKcykrzKrimtgH9/e/R1FgNoVBIy56P8fT0Z2Tn5CNaGYXjxw8zwE6nEw8fPXVbVlKpBLvid7DC1NjUhr6+16ivq4REQjHB45YJaDRFiIlR4qgqhQE2mcwoKCz7Iy+UlOTTNfzraWnRg5Rp9eXz8Pf3Y4I/fRpH3tlixMVFI/VIMgtCSu2L1Tr/f3NzO3EY1Oqf3hGLRAgNDWa91bV2oru7F5eqyiCTBXCDY2OjoUplgxdK0+RpaZdWVpS49cSKgUkTedbdi6rKUqxeLfv3FnsFTPKBuLri4rnluXp83AISt78SY10HSOvkTK65coqNUUK1oJy4TPIkuVqu30BPTx93Oc01EKUyCuoFDWS54GsNOrx69QZ1VypAmgyjc9ntdqRnnEZkhAJZWWq3cSspraBjrC3Kc3v3Z8usgVDowwSTIaFOy0ZoSMgfDYmpqWkIBHxIpVK3YDIkyCbT0lzLPRZJW5ycnPL6WDxxUkO3Ss6xSFTpvHkHjx930UOCDAtvHJJUJLni47cjJfkAt8VG4yi0xRdAicU4eCgJ8q2bIRaLlsS3Wq0YGPiA1rabcLlmFl99CIFoqL9xm172fH2F2BAWygR/78+UWARKQkEikdAJNmYy0yPz1y+DoaGPcDgcdDJlpKuwbZucIYdzoR8bM+PuvfswjZoxYjAuyWIyGoNDgpCYmIB1a9ewZHj8JeF0zsDwQxmKIlZToCixxzuax+Almc/xaMXA3wCp9/W2mZelHAAAAABJRU5ErkJggg==",Qu={type:"BUILTIN_Text",label:"文本",icon:Ju,category:"界面",emits:[],methods:[],props:[]};let yi=0;class tl extends $u{render(){return yi++,ut("div",null,[kr("哈哈哈我是一个文字.renderCnt="),yi,kr(" ")])}}const rl=[[Qu,tl]],Oe=mn("widgets",{state:()=>{let t={};return rl.forEach(([r,e])=>{t[r.type]=[r,e]}),{widgets:t,widgetsCode:{}}},getters:{widgetsTypeSortedByCategory:t=>{let r=[],e=[],n={builtin:{},other:{}};for(let a in t.widgets){let o=t.widgets[a][0];o.type.startsWith("BUILTIN_")?r.push(o):e.push(o)}return r.forEach(a=>{const i=a.category||"默认分组";n.builtin[i]||(n.builtin[i]=[]),n.builtin[i].push(a)}),e.forEach(a=>{const i=a.category||"默认分组";n.other[i]||(n.other[i]=[]),n.other[i].push(a)}),n}},actions:{}}),el="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Eo=(t=21)=>{let r="",e=crypto.getRandomValues(new Uint8Array(t));for(;t--;)r+=el[e[t]&63];return r};function Si(t,r=640,e=360){return{id:"SCREEN_"+Eo(),height:r,width:e,name:t}}const Re=mn("screens",{state:()=>{let t=[];return t.push(Si("屏幕1")),{screens:t,nowScreen:t[0].id}},getters:{nowScreenData:t=>t.screens.find(r=>r.id===t.nowScreen)},actions:{newScreen(t){this.screens.push(Si(t)),console.log(this)},addEntity(t,r,e){Yr().addEntity(t,r,e,this.nowScreen)}}}),Yr=mn("entities",{state:()=>({entitiesData:{},entitiesObjs:{},focus:"SCREEN",lastFocus:"SCREEN"}),getters:{entitiesIdByScreen(t){const r=Re();return Object.keys(t.entitiesData).filter(e=>{if(t.entitiesData[e].screenId.includes(r.nowScreen))return e})}},actions:{addEntity(t,r,e,n){var u,l;const a=Oe();a.widgets[t]||console.error("!ERROR[EntitiesStore]widgetNotFound! type:",t,"widgets:",a.widgets);const[i,o]=a.widgets[t],s="ENTITY_"+Eo();return this.entitiesData[s]={type:t,id:s,name:i.label,width:((u=i==null?void 0:i.default)==null?void 0:u.width)||50,height:((l=i==null?void 0:i.default)==null?void 0:l.width)||50,top:e,left:r,rotateAble:!0,props:{},index:this.entitiesIdByScreen.length,hidden:!1,screenId:[n],overflow:"hidden",rotate:0,color:"#d358ff"},this.entitiesObjs[s]=new o,this.entitiesObjs[s]._saveEntityDataRef(this.entitiesData[s]),this.setFocus(s),console.log(this.entitiesData),s},setEntityWidth(t,r){console.log(this.entitiesData[t]),this.entitiesData[t].width=r},setFocus(t){this.focus=t}}}),Do=mn("editor",{state:()=>({workName:"默认作品名称"}),getters:{getWorkData:t=>{const{widgetsCode:r}=Oe(),{entitiesData:e}=Yr(),{screens:n}=Re();return{name:t.workName,widgetsCode:r,entitiesData:e,screens:n}}},actions:{}});function nl(t,r){const e=JSON.stringify(t),n=new Blob([e],{type:"application/json"}),a=URL.createObjectURL(n),i=document.createElement("a");i.href=a,i.download=`${r}.json`,document.body.appendChild(i),i.click(),setTimeout(()=>{document.body.removeChild(i),URL.revokeObjectURL(a)},0)}const al=t=>(Bu("data-v-0e7c275f"),t=t(),Gu(),t),il={class:"header-item"},ol=al(()=>Bt("img",{src:Zu,alt:"boco logo text",class:"header-logo"},null,-1)),sl={class:"header-item"},ul={class:"header-item"},ll=yr({__name:"Header",setup(t){const{useToken:r}=_o,{token:e}=r(),n=Do();let{workName:a}=gr(n);const i=Yr(),o=Re(),s=Oe(),u=Zt([{key:"file",label:"文件",theme:"light",children:[{label:"新建",key:"new",onClick:()=>{i.$reset(),o.$reset(),s.$reset(),n.$reset()}},{label:"打开",key:"open_cloud",title:"云端作品功能未完成",disabled:!0},{label:"另存为",title:"云端作品功能未完成",disabled:!0,key:"save_as_cloud"},{type:"divider"},{label:"还原历史版本",title:"云端作品功能未完成-挖大坑此项未必会完成",disabled:!0,key:"history_version"},{label:"导入自定义控件",key:"import_extension"},{type:"divider"},{label:"保存到电脑",key:"save_local",onClick:()=>{const l=n.getWorkData;console.log(l),nl(l,n.workName+"_"+Date.now().toString())}},{label:"打开电脑文件",key:"open_local"}]},{key:"help",label:"帮助"}]);return(l,f)=>{const v=Ot("a-menu"),c=Ot("a-button"),d=Ot("a-input"),p=Ot("a-divider"),h=Ot("a-avatar");return ct(),At("div",{class:"header",style:Tr({backgroundColor:tt(e).colorPrimary})},[Bt("div",il,[ol,ut(v,{selectable:!1,mode:"horizontal",items:u.value,style:Tr({backgroundColor:tt(e).colorPrimary}),theme:"dark"},null,8,["items","style"])]),Bt("div",sl,[ut(c,{style:{"margin-right":"20px"},type:"primary",danger:""},{default:ht(()=>[kr(" 运行 ")]),_:1}),ut(d,{value:tt(a),"onUpdate:value":f[0]||(f[0]=g=>So(a)?a.value=g:a=g)},null,8,["value"])]),Bt("div",ul,[ut(c,{type:"dashed",icon:zu(tt(Ca))},{default:ht(()=>[kr("分享")]),_:1},8,["icon"]),ut(p,{type:"vertical"}),ut(c,{style:{"margin-right":"10px"}},{default:ht(()=>[kr("保存")]),_:1}),ut(c,{style:{"margin-right":"10px"},ghost:""},{default:ht(()=>[kr("打包")]),_:1}),ut(h,{size:37},{icon:ht(()=>[ut(tt(wa))]),_:1})])],4)}}}),Xr=(t,r)=>{const e=t.__vccOpts||t;for(const[n,a]of r)e[n]=a;return e},fl=Xr(ll,[["__scopeId","data-v-0e7c275f"]]),cl=["src"],vl={class:"text"},dl=yr({__name:"WidgetsBoxItem",props:{label:{},icon:{},type:{}},setup(t){const r=t;function e(n){var a;(a=n.dataTransfer)==null||a.setData("WIDGET_TYPE",r.type)}return(n,a)=>(ct(),At("div",{class:"widgets-box-item",draggable:"true",onDragstart:e},[Bt("img",{class:"icon",src:n.icon,alt:"widget icon"},null,8,cl),Bt("span",vl,Ut(n.label),1)],32))}}),bi=Xr(dl,[["__scopeId","data-v-db2a49dd"]]),pl={style:{height:"100%",width:"145px","background-color":"white"}},hl={class:"list_double_column"},gl={class:"list_double_column"},ml=yr({__name:"WidgetsBox",setup(t){const r=Oe(),e=Zt("builtin"),{widgetsTypeSortedByCategory:n}=gr(r),a=Zt(Object.keys(r.widgetsTypeSortedByCategory.builtin));return console.log(Object.keys(r.widgetsTypeSortedByCategory.builtin)),(i,o)=>{const s=Ot("a-collapse-panel"),u=Ot("a-collapse"),l=Ot("a-tab-pane"),f=Ot("a-tabs");return ct(),At("div",pl,[ut(f,{activeKey:e.value,"onUpdate:activeKey":o[1]||(o[1]=v=>e.value=v),centered:""},{default:ht(()=>[ut(l,{tab:"基础",key:"builtin"},{default:ht(()=>[ut(u,{style:{width:"100%",padding:"0","border-radius":"0","margin-top":"-16px"},activeKey:a.value,"onUpdate:activeKey":o[0]||(o[0]=v=>a.value=v)},{default:ht(()=>[(ct(!0),At(ur,null,Dr(tt(n).builtin,(v,c)=>(ct(),Kt(s,{header:c,style:{padding:"0"},key:c},{default:ht(()=>[Bt("div",hl,[(ct(!0),At(ur,null,Dr(v,d=>(ct(),Kt(bi,{label:d.label,icon:d.icon,type:d.type},null,8,["label","icon","type"]))),256))])]),_:2},1032,["header"]))),128))]),_:1},8,["activeKey"])]),_:1}),ut(l,{tab:"拓展",key:"other"},{default:ht(()=>[ut(u,{style:{width:"100%",padding:"0","border-radius":"0","margin-top":"-16px"}},{default:ht(()=>[(ct(!0),At(ur,null,Dr(tt(n).other,(v,c)=>(ct(),Kt(s,{header:c,style:{padding:"0"}},{default:ht(()=>[Bt("div",gl,[(ct(!0),At(ur,null,Dr(v,d=>(ct(),Kt(bi,{label:d.label,icon:d.icon,type:d.type},null,8,["label","icon","type"]))),256))])]),_:2},1032,["header"]))),256))]),_:1})]),_:1})]),_:1},8,["activeKey"])])}}}),xl=Xr(ml,[["__scopeId","data-v-7c288afc"]]),yl=yr({__name:"ScreenSelection",setup(t){function r(u,l){l==="add"&&(i.value=!0)}const e=Re(),{screens:n,nowScreen:a}=gr(e),i=Zt(!1),o=Zt("");function s(){const u=o.value;console.log(u),e.newScreen(u),i.value=!1}return(u,l)=>{const f=Ot("a-tab-pane"),v=Ot("a-tabs"),c=Ot("a-input"),d=Ot("a-modal");return ct(),At(ur,null,[ut(v,{activeKey:tt(a),"onUpdate:activeKey":l[0]||(l[0]=p=>So(a)?a.value=p:null),style:{height:"40px","z-index":"0"},type:"editable-card",onEdit:r},{default:ht(()=>[(ct(!0),At(ur,null,Dr(tt(n),p=>(ct(),Kt(f,{key:p.id,tab:p.name},null,8,["tab"]))),128))]),_:1},8,["activeKey"]),ut(d,{title:"屏幕名称",open:i.value,"onUpdate:open":l[2]||(l[2]=p=>i.value=p),onOk:s},{default:ht(()=>[ut(c,{value:o.value,"onUpdate:value":l[1]||(l[1]=p=>o.value=p),placeholder:"请输入屏幕名称"},null,8,["value"])]),_:1},8,["open"])],64)}}});function Sl(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];return r.map(function(n){return n.split(" ").map(function(a){return a?""+t+a:""}).join(" ")}).join(" ")}function bl(t,r){return r.replace(/([^}{]*){/gm,function(e,n){return n.replace(/\.([^{,\s\d.]+)/g,"."+t+"$1")+"{"})}function dr(t,r){return function(e){e&&(t[r]=e)}}function Co(t,r,e){return function(n){n&&(t[r][e]=n)}}function _i(t,r){return function(e){var n=e.prototype;t.forEach(function(a){r(n,a)})}}function _l(t,r){return r===void 0&&(r={}),function(e,n){t.forEach(function(a){var i=r[a]||a;i in e||(e[i]=function(){for(var o,s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];var l=(o=this[n])[a].apply(o,s);return l===this[n]?this:l})})}}var El="function",Dl="object",Cl="string",wl="number",Ma="undefined",wo=typeof window!==Ma,Ml=typeof document!==Ma&&document,Tl=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],Ct=1e-7,He={cm:function(t){return t*96/2.54},mm:function(t){return t*96/254},in:function(t){return t*96},pt:function(t){return t*96/72},pc:function(t){return t*96/6},"%":function(t,r){return t*r/100},vw:function(t,r){return r===void 0&&(r=window.innerWidth),t/100*r},vh:function(t,r){return r===void 0&&(r=window.innerHeight),t/100*r},vmax:function(t,r){return r===void 0&&(r=Math.max(window.innerWidth,window.innerHeight)),t/100*r},vmin:function(t,r){return r===void 0&&(r=Math.min(window.innerWidth,window.innerHeight)),t/100*r}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Ol(){for(var t=0,r=0,e=arguments.length;r<e;r++)t+=arguments[r].length;for(var n=Array(t),a=0,r=0;r<e;r++)for(var i=arguments[r],o=0,s=i.length;o<s;o++,a++)n[a]=i[o];return n}function an(t,r,e,n){return(t*n+r*e)/(e+n)}function xn(t){return typeof t===Ma}function or(t){return t&&typeof t===Dl}function wt(t){return Array.isArray(t)}function Vt(t){return typeof t===Cl}function ee(t){return typeof t===wl}function Ta(t){return typeof t===El}function Rl(t,r){var e=t===""||t==" ",n=r===""||r==" ";return n&&e||t===r}function Mo(t,r,e,n,a){var i=Oa(t,r,e);return i?e:Pl(t,r,e+1,n,a)}function Oa(t,r,e){if(!t.ignore)return null;var n=r.slice(Math.max(e-3,0),e+3).join("");return new RegExp(t.ignore).exec(n)}function Pl(t,r,e,n,a){for(var i=function(l){var f=r[l].trim();if(f===t.close&&!Oa(t,r,l))return{value:l};var v=l,c=qt(a,function(d){var p=d.open;return p===f});if(c&&(v=Mo(c,r,l,n,a)),v===-1)return o=l,"break";l=v,o=l},o,s=e;s<n;++s){var u=i(s);if(s=o,typeof u=="object")return u.value;if(u==="break")break}return-1}function Ra(t,r){var e=Vt(r)?{separator:r}:r,n=e.separator,a=n===void 0?",":n,i=e.isSeparateFirst,o=e.isSeparateOnlyOpenClose,s=e.isSeparateOpenClose,u=s===void 0?o:s,l=e.openCloseCharacters,f=l===void 0?Tl:l,v=f.map(function(E){var D=E.open,C=E.close;return D===C?D:D+"|"+C}).join("|"),c="(\\s*"+a+"\\s*|"+v+"|\\s+)",d=new RegExp(c,"g"),p=t.split(d).filter(function(E){return E&&E!=="undefined"}),h=p.length,g=[],m=[];function x(){return m.length?(g.push(m.join("")),m=[],!0):!1}for(var y=function(E){var D=p[E].trim(),C=E,M=qt(f,function(O){var I=O.open;return I===D}),P=qt(f,function(O){var I=O.close;return I===D});if(M){if(C=Mo(M,p,E,h,f),C!==-1&&u)return x()&&i||(g.push(p.slice(E,C+1).join("")),E=C,i)?(S=E,"break"):(S=E,"continue")}else if(P&&!Oa(P,p,E)){var R=Ol(f);return R.splice(f.indexOf(P),1),{value:Ra(t,{separator:a,isSeparateFirst:i,isSeparateOnlyOpenClose:o,isSeparateOpenClose:u,openCloseCharacters:R})}}else if(Rl(D,a)&&!o)return x(),i?(S=E,"break"):(S=E,"continue");C===-1&&(C=h-1),m.push(p.slice(E,C+1).join("")),E=C,S=E},S,_=0;_<h;++_){var b=y(_);if(_=S,typeof b=="object")return b.value;if(b==="break")break}return m.length&&g.push(m.join("")),g}function Or(t){return Ra(t,"")}function Fr(t){return Ra(t,",")}function To(t){var r=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!r||r.length<4?{}:{prefix:r[1],value:r[2],suffix:r[3]}}function Pe(t){var r=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!r)return{prefix:"",unit:"",value:NaN};var e=r[1],n=r[2],a=r[3];return{prefix:e,unit:a,value:parseFloat(n)}}function Il(t){return t.replace(/[\s-_]+([^\s-_])/g,function(r,e){return e.toUpperCase()})}function en(t,r){return t.replace(/([a-z])([A-Z])/g,function(e,n,a){return""+n+r+a.toLowerCase()})}function Ee(){return Date.now?Date.now():new Date().getTime()}function mr(t,r,e){e===void 0&&(e=-1);for(var n=t.length,a=0;a<n;++a)if(r(t[a],a,t))return a;return e}function qt(t,r,e){var n=mr(t,r);return n>-1?t[n]:e}var Oo=function(){var t=Ee(),r=wo&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return r?r.bind(window):function(e){var n=Ee(),a=setTimeout(function(){e(n-t)},1e3/60);return a}}(),Al=function(){var t=wo&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(r){clearTimeout(r)}}();function xr(t){return Object.keys(t)}function zl(t){var r=xr(t);return r.map(function(e){return t[e]})}function gt(t,r){var e=Pe(t),n=e.value,a=e.unit;if(or(r)){var i=r[a];if(i){if(Ta(i))return i(n);if(He[a])return He[a](n,i)}}else if(a==="%")return n*r/100;return He[a]?He[a](n):n}function $n(t,r,e){return Math.max(r,Math.min(t,e))}function Ei(t,r,e,n){return n===void 0&&(n=t[0]/t[1]),[[rt(r[0],Ct),rt(r[0]/n,Ct)],[rt(r[1]*n,Ct),rt(r[1],Ct)]].filter(function(a){return a.every(function(i,o){var s=r[o],u=rt(s,Ct);return e?i<=s||i<=u:i>=s||i>=u})})[0]||t}function Ro(t,r,e,n){if(!n)return t.map(function(d,p){return $n(d,r[p],e[p])});var a=t[0],i=t[1],o=n===!0?a/i:n,s=Ei(t,r,!1,o),u=s[0],l=s[1],f=Ei(t,e,!0,o),v=f[0],c=f[1];return a<u||i<l?(a=u,i=l):(a>v||i>c)&&(a=v,i=c),[a,i]}function Bl(t){for(var r=t.length,e=0,n=r-1;n>=0;--n)e+=t[n];return e}function Jn(t){for(var r=t.length,e=0,n=r-1;n>=0;--n)e+=t[n];return r?e/r:0}function _t(t,r){var e=r[0]-t[0],n=r[1]-t[1],a=Math.atan2(n,e);return a>=0?a:a+Math.PI*2}function Gl(t){return[0,1].map(function(r){return Jn(t.map(function(e){return e[r]}))})}function Di(t){var r=Gl(t),e=_t(r,t[0]),n=_t(r,t[1]);return e<n&&n-e<Math.PI||e>n&&n-e<-Math.PI?1:-1}function pr(t,r){return Math.sqrt(Math.pow((r?r[0]:0)-t[0],2)+Math.pow((r?r[1]:0)-t[1],2))}function rt(t,r){if(!r)return t;var e=1/r;return Math.round(t/r)/e}function Ci(t,r){return t.forEach(function(e,n){t[n]=rt(t[n],r)}),t}function kl(t){for(var r=[],e=0;e<t;++e)r.push(e);return r}function Po(t){return t.reduce(function(r,e){return r.concat(e)},[])}function Io(t,r){t.indexOf(r)===-1&&t.push(r)}function Rt(t,r){return t.classList?t.classList.contains(r):!!t.className.match(new RegExp("(\\s|^)"+r+"(\\s|$)"))}function Ao(t,r){t.classList?t.classList.add(r):t.className+=" "+r}function zo(t,r){if(t.classList)t.classList.remove(r);else{var e=new RegExp("(\\s|^)"+r+"(\\s|$)");t.className=t.className.replace(e," ")}}function zt(t,r,e,n){t.addEventListener(r,e,n)}function Tt(t,r,e,n){t.removeEventListener(r,e,n)}function le(t){return(t==null?void 0:t.ownerDocument)||Ml}function Pa(t){return le(t).documentElement}function Ir(t){return le(t).body}function Mr(t){var r;return((r=t==null?void 0:t.ownerDocument)===null||r===void 0?void 0:r.defaultView)||window}function Bo(t){return t&&"postMessage"in t&&"blur"in t&&"self"in t}function fe(t){return or(t)&&t.nodeName&&t.nodeType&&"ownerDocument"in t}var Fl=function(){function t(){this.keys=[],this.values=[]}var r=t.prototype;return r.get=function(e){return this.values[this.keys.indexOf(e)]},r.set=function(e,n){var a=this.keys,i=this.values,o=a.indexOf(e),s=o===-1?a.length:o;a[s]=e,i[s]=n},t}(),Nl=function(){function t(){this.object={}}var r=t.prototype;return r.get=function(e){return this.object[e]},r.set=function(e,n){this.object[e]=n},t}(),Ll=typeof Map=="function",Wl=function(){function t(){}var r=t.prototype;return r.connect=function(e,n){this.prev=e,this.next=n,e&&(e.next=this),n&&(n.prev=this)},r.disconnect=function(){var e=this.prev,n=this.next;e&&(e.next=n),n&&(n.prev=e)},r.getIndex=function(){for(var e=this,n=-1;e;)e=e.prev,++n;return n},t}();function Hl(t,r){var e=[],n=[];return t.forEach(function(a){var i=a[0],o=a[1],s=new Wl;e[i]=s,n[o]=s}),e.forEach(function(a,i){a.connect(e[i-1])}),t.filter(function(a,i){return!r[i]}).map(function(a,i){var o=a[0],s=a[1];if(o===s)return[0,0];var u=e[o],l=n[s-1],f=u.getIndex();u.disconnect(),l?u.connect(l,l.next):u.connect(void 0,e[0]);var v=u.getIndex();return[f,v]})}var Yl=function(){function t(e,n,a,i,o,s,u,l){this.prevList=e,this.list=n,this.added=a,this.removed=i,this.changed=o,this.maintained=s,this.changedBeforeAdded=u,this.fixed=l}var r=t.prototype;return Object.defineProperty(r,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(r,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),r.caculateOrdered=function(){var e=Hl(this.changedBeforeAdded,this.fixed),n=this.changed,a=[];this.cacheOrdered=e.filter(function(i,o){var s=i[0],u=i[1],l=n[o],f=l[0],v=l[1];if(s!==u)return a.push([f,v]),!0}),this.cachePureChanged=a},t}();function Ie(t,r,e){var n=Ll?Map:e?Nl:Fl,a=e||function(x){return x},i=[],o=[],s=[],u=t.map(a),l=r.map(a),f=new n,v=new n,c=[],d=[],p={},h=[],g=0,m=0;return u.forEach(function(x,y){f.set(x,y)}),l.forEach(function(x,y){v.set(x,y)}),u.forEach(function(x,y){var S=v.get(x);typeof S>"u"?(++m,o.push(y)):p[S]=m}),l.forEach(function(x,y){var S=f.get(x);typeof S>"u"?(i.push(y),++g):(s.push([S,y]),m=p[y]||0,c.push([S-m,y-g]),d.push(y===S),S!==y&&h.push([S,y]))}),o.reverse(),new Yl(t,r,i,o,h,s,c,d)}var Xl=function(){function t(e,n){e===void 0&&(e=[]),this.findKeyCallback=n,this.list=[].slice.call(e)}var r=t.prototype;return r.update=function(e){var n=[].slice.call(e),a=Ie(this.list,n,this.findKeyCallback);return this.list=n,a},t}(),Qn=function(t,r){return Qn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])},Qn(t,r)};function Ae(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");Qn(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var lr=function(){return lr=Object.assign||function(r){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},lr.apply(this,arguments)};function Go(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(e[n[a]]=t[n[a]]);return e}function wi(t,r,e){for(var n=0,a=r.length,i;n<a;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return t.concat(i||Array.prototype.slice.call(r))}function Mi(t){var r=0;return t.map(function(e){return e==null?"$compat".concat(++r):"".concat(e)})}function ko(t){var r=[];return t.forEach(function(e){r=r.concat(wt(e)?ko(e):e)}),r}function Gn(t,r){if(!r)return t;for(var e in r)xn(t[e])&&(t[e]=r[e]);return t}function on(t,r){if(t===r)return!1;for(var e in t)if(!(e in r))return!0;for(var e in r)if(t[e]!==r[e])return!0;return!1}function Ti(t){var r=t.className,e=Go(t,["className"]);return r!=null&&(e.class=r),delete e.style,delete e.children,e}function Oi(t){var r={},e={};for(var n in t)n.indexOf("on")===0?e[n]=t[n]:r[n]=t[n];return[r,e]}function yn(t){if(!t)return null;var r=t.b;return fe(r)?r:yn(t.c)}function Fo(t){var r=t.parentNode;r&&r.removeChild(t)}function No(t){t.forEach(function(r){r()})}function Vl(){return this.constructor(this.props,this.context)}var Ia=0,Sn=function(){function t(e,n,a,i,o,s,u){u===void 0&&(u={}),this.t=e,this.d=n,this.k=a,this.i=i,this.c=o,this.ref=s,this.ps=u,this.typ="prov",this._ps=[],this._cs={},this._hyd=null,this._sel=!1}var r=t.prototype;return r.s=function(){return!0},r.u=function(e,n,a,i,o){var s=this,u=s.d,l=zl(n).filter(function(p){return p.$_req}),f=ko(l.map(function(p){return p.$_subs})),v=qt(f,function(p){return p.d===u});if(s.b&&!Vt(a)&&!o&&!s.s(a.props,i)&&!v){var c=f.reduce(function(p,h){var g=h.d;return p[0]?p[0].d===g&&p.push(h):g>u&&p.push(h),p},[]);return c.forEach(function(p){ze(p,p._ps,[p.o],e,n,!0)}),!1}s.o=a,s.ss(i);var d=s.ps;return Vt(a)||(s.ps=a.props,s.ref=a.ref),Aa(this),s.r(e,n,s.b?d:{},i),!0},r.md=function(){this.rr()},r.ss=function(){},r.ud=function(){this.rr()},r.rr=function(){var e=this,n=e.ref,a=e.fr;n&&n(a?a.current:e.b)},t}();function Lo(){return Object.__CROACT_CURRENT_INSTNACE__}function ql(){return Ia}function jl(t){Ia=t}function Aa(t){return Object.__CROACT_CURRENT_INSTNACE__=t,Ia=0,t}var za=function(){function t(e,n){e===void 0&&(e={}),this.props=e,this.context=n,this.state={},this.$_timer=0,this.$_state={},this.$_subs=[],this.$_cs={}}var r=t.prototype;return r.render=function(){return null},r.shouldComponentUpdate=function(e,n){return this.props!==e||this.state!==n},r.setState=function(e,n,a){var i=this;i.$_timer||(i.$_state={}),clearTimeout(i.$_timer),i.$_timer=0,i.$_state=lr(lr({},i.$_state),e),a?i.$_setState(n,a):i.$_timer=window.setTimeout(function(){i.$_timer=0,i.$_setState(n,a)})},r.forceUpdate=function(e){this.setState({},e,!0)},r.componentDidMount=function(){},r.componentDidUpdate=function(e,n){},r.componentWillUnmount=function(){},r.$_setState=function(e,n){var a=[],i=this.$_p,o=ze(i.c,[i],[i.o],a,i._cs,lr(lr({},this.state),this.$_state),n);o&&(e&&a.push(e),No(a),Aa(null))},t}(),Wo=function(t){Ae(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}var e=r.prototype;return e.shouldComponentUpdate=function(n,a){return on(this.props,n)||on(this.state,a)},r}(za);function Ho(t){var r=function(e){r.current=e};return r.current=t,r}function Ul(t){return t._fr=!0,t}function Kl(t,r,e,n){var a,i;return!((a=t==null?void 0:t.prototype)===null||a===void 0)&&a.render?i=new t(r,e):(i=new za(r,e),i.constructor=t,t._fr?(n.fr=Ho(),i.render=function(){return this.constructor(this.props,n.fr)}):i.render=Vl),i.$_p=n,i}var Zl=function(t){Ae(r,t);function r(n,a,i,o,s,u,l){l===void 0&&(l={});var f=t.call(this,n,a,i,o,s,u,Gn(l,n.defaultProps))||this;return f.typ="comp",f._usefs=[],f._uefs=[],f._defs=[],f}var e=r.prototype;return e.s=function(n,a){var i=this.b;return i.shouldComponentUpdate(Gn(n,this.t.defaultProps),a||i.state)!==!1},e.r=function(n,a,i){var o,s,u=this,l=u.t;u.ps=Gn(u.ps,u.t.defaultProps);var f=u.ps,v=!u.b,c=l.contextType,d=u.b,p=c==null?void 0:c.get(u);u._cs=a,v?(d=Kl(l,f,p,u),u.b=d):(d.props=f,d.context=p);var h=d.state;u._usefs=[],u._uefs=[];var g=d.render();((s=(o=g==null?void 0:g.props)===null||o===void 0?void 0:o.children)===null||s===void 0?void 0:s.length)===0&&(g.props.children=u.ps.children);var m=lr(lr({},a),d.$_cs);ze(u,u._ps,g?[g]:[],n,m),v?u._uefs.push(function(){c==null||c.register(u),d.componentDidMount()}):u._uefs.push(function(){d.componentDidUpdate(i,h)}),n.push(function(){u._usefs.forEach(function(x){x()}),v?u.md():u.ud(),u._defs=u._uefs.map(function(x){return x()})})},e.ss=function(n){var a=this.b;!a||!n||(a.state=n)},e.un=function(){var n,a=this;a._ps.forEach(function(o){o.un()});var i=a.t;(n=i.contextType)===null||n===void 0||n.unregister(a),clearTimeout(a.b.$_timer),a._defs.forEach(function(o){o&&o()}),a.b.componentWillUnmount()},r}(Sn);function $l(t,r,e){var n=Ba(Ti(t),Ti(r)),a=n.added,i=n.removed,o=n.changed;for(var s in a)e.setAttribute(s,a[s]);for(var u in o)e.setAttribute(u,o[u][1]);for(var l in i)e.removeAttribute(l)}function Jl(t,r,e){var n=Ba(t,r),a=n.added,i=n.removed;for(var o in i)e.e(o,!0);for(var s in a)e.e(s)}function Ba(t,r){var e=xr(t),n=xr(r),a=Ie(e,n,function(u){return u}),i={},o={},s={};return a.added.forEach(function(u){var l=n[u];i[l]=r[l]}),a.removed.forEach(function(u){var l=e[u];o[l]=t[l]}),a.maintained.forEach(function(u){var l=u[0],f=e[l],v=[t[f],r[f]];t[f]!==r[f]&&(s[f]=v)}),{added:i,removed:o,changed:s}}function Ql(t,r,e){var n=e.style,a=Ba(t,r),i=a.added,o=a.removed,s=a.changed;for(var u in i){var l=en(u,"-");n.setProperty(l,i[u])}for(var u in s){var f=en(u,"-");n.setProperty(f,s[u][1])}for(var u in o){var v=en(u,"-");n.removeProperty(v)}}function tf(t){return t.replace(/^on/g,"").toLowerCase()}var rf=function(t){Ae(r,t);function r(){var n=t!==null&&t.apply(this,arguments)||this;return n.typ="elem",n._es={},n._svg=!1,n}var e=r.prototype;return e.e=function(n,a){var i=this,o=i._es,s=i.b,u=tf(n);a?(Tt(s,u,o[n]),delete o[n]):(o[n]=function(l){var f,v;(v=(f=i.ps)[n])===null||v===void 0||v.call(f,l)},zt(s,u,o[n]))},e.s=function(n){return on(this.ps,n)},e.r=function(n,a,i){var o,s=this,u=!s.b,l=s.ps;if(u){var f=yn(s.c),v=!1;s._svg||s.t==="svg"?v=!0:v=f&&f.ownerSVGElement,s._svg=v;var c=(o=s._hyd)===null||o===void 0?void 0:o.splice(0,1)[0],d=s.t;if(c)s._hyd=[].slice.call(c.children||[]);else{var p=le(f);v?c=p.createElementNS("http://www.w3.org/2000/svg",d):c=p.createElement(d)}s.b=c}ze(s,s._ps,l.children,n,a);var h=s.b,g=Oi(i),m=g[0],x=g[1],y=Oi(l),S=y[0],_=y[1];return $l(m,S,h),Jl(x,_,s),Ql(i.style||{},l.style||{},h),n.push(function(){u?s.md():s.ud()}),!0},e.un=function(){var n=this,a=n._es,i=n.b;for(var o in a)Tt(i,o,a[o]);n._ps.forEach(function(s){s.un()}),n._es={},n._sel||Fo(i)},r}(Sn);function De(t){if(!t||fe(t))return t;var r=t.$_p._ps;return r.length?De(r[0].b):null}function Yo(t){if(t){if(t.b&&fe(t.b))return t;var r=t._ps;return r.length?Yo(r[0]):null}}function ar(t,r){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];var a=r||{},i=a.key,o=a.ref,s=Go(a,["key","ref"]);return{type:t,key:i,ref:o,props:lr(lr({},s),{children:Po(e).filter(function(u){return u!=null&&u!==!1})})}}var Xo=function(t){Ae(r,t);function r(n,a){a===void 0&&(a=0);var i=t.call(this,"container",a,"container",0,null)||this;return i.typ="container",i.b=n,i}var e=r.prototype;return e.r=function(){return!0},e.un=function(){},r}(Sn),ef=function(t){Ae(r,t);function r(){var n=t!==null&&t.apply(this,arguments)||this;return n.typ="text",n}var e=r.prototype;return e.r=function(n){var a,i=this,o=!i.b;if(o){var s=yn(i.c),u=(a=i._hyd)===null||a===void 0?void 0:a.splice(0,1)[0];i.b=u||le(s).createTextNode(i.t.replace("text_",""))}return n.push(function(){o?i.md():i.ud()}),!0},e.un=function(){Fo(this.b)},r}(Sn);function nf(t,r,e){var n=e.map(function(u){return Vt(u)?null:u.key}),a=Mi(r.map(function(u){return u.k})),i=Mi(n),o=Ie(a,i,function(u){return u});o.removed.forEach(function(u){r.splice(u,1)[0].un()}),o.ordered.forEach(function(u){var l=u[0],f=u[1],v=r.splice(l,1)[0];r.splice(f,0,v);var c=De(v.b),d=De(r[f+1]&&r[f+1].b);c&&c.parentNode.insertBefore(c,d)}),o.added.forEach(function(u){r.splice(u,0,Ri(e[u],n[u],u,t))});var s=o.maintained.filter(function(u){u[0];var l=u[1],f=e[l],v=r[l],c=Vt(f)?"text_".concat(f):f.type;return c!==v.t?(v.un(),r.splice(l,1,Ri(f,n[l],l,t)),!0):(v.i=l,!1)});return wi(wi([],o.added,!0),s.map(function(u){u[0];var l=u[1];return l}))}function af(t,r){for(var e=t._ps,n=e.length,a=r.i+1;a<n;++a){var i=De(e[a].b);if(i)return i}return null}function Ri(t,r,e,n){var a=n.d+1;if(Vt(t)||ee(t))return new ef("text_".concat(t),a,r,e,n,null,{});var i=t.type,o=typeof i=="string"?rf:Zl;return new o(i,a,r,e,n,t.ref,t.props)}function ze(t,r,e,n,a,i,o){var s=nf(t,r,e),u=t._hyd,l=r.filter(function(v,c){return v._hyd=u,v.u(n,a,e[c],i,o)});t.typ==="container"&&t._sel&&r.forEach(function(v){var c=Yo(v);c&&(c._sel=!0)}),t._hyd=null;var f=yn(t);return f&&s.reverse().forEach(function(v){var c=r[v],d=De(c.b);if(d&&f!==d&&!d.parentNode){var p=af(t,c);f.insertBefore(d,p)}}),l.length>0}function of(t,r,e,n){e===void 0&&(e=r.__CROACT__),n===void 0&&(n={});var a=!!e;e||(e=new Xo(r));var i=[];return ze(e,e._ps,t?[t]:[],i,n,void 0,void 0),No(i),Aa(null),a||(r.__CROACT__=e),e}function Pi(t,r,e){return!e&&t&&(e=new Xo(r.parentElement),e._hyd=[r],e._sel=!0),of(t,r,e),e}function Vo(t){var r=Lo(),e=r._hs||(r._hs=[]),n=ql(),a=e[n];if(jl(n+1),a){if(!on(a.deps,t.deps))return a.updated=!1,a;e[n]=t}else e.push(t);return t.value=t.func(),t.updated=!0,t}function sf(t,r){var e=Vo({func:t,deps:r});return e.value}function uf(t){return sf(function(){return Ho(t)},[])}function qo(t,r,e){var n=Lo(),a=Vo({func:function(){return t},deps:r}),i=e?n._usefs:n._uefs;a.updated?i.push(function(){return a.effect&&a.effect(),a.effect=t(),a.effect}):i.push(function(){return a.effect})}function lf(t,r,e){qo(function(){t==null||t(r())},e,!0)}function Ga(t,r){for(var e=t.length,n=0;n<e;++n)if(r(t[n],n))return!0;return!1}function jo(t,r){for(var e=t.length,n=0;n<e;++n)if(r(t[n],n))return t[n];return null}function Uo(t){var r=t;if(typeof r>"u"){if(typeof navigator>"u"||!navigator)return"";r=navigator.userAgent||""}return r.toLowerCase()}function ka(t,r){try{return new RegExp(t,"g").exec(r)}catch{return null}}function ff(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,r=t.brands||t.uaList;return!!(r&&r.length)}function cf(t,r){var e=ka("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))",r);return e?e[3]:""}function ta(t){return t.replace(/_/g,".")}function pe(t,r){var e=null,n="-1";return Ga(t,function(a){var i=ka("("+a.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",r);return!i||a.brand?!1:(e=a,n=i[3]||"-1",a.versionAlias?n=a.versionAlias:a.versionTest&&(n=cf(a.versionTest.toLowerCase(),r)||n),n=ta(n),!0)}),{preset:e,version:n}}function Ye(t,r){var e={brand:"",version:"-1"};return Ga(t,function(n){var a=Ko(r,n);return a?(e.brand=n.id,e.version=n.versionAlias||a.version,e.version!=="-1"):!1}),e}function Ko(t,r){return jo(t,function(e){var n=e.brand;return ka(""+r.test,n.toLowerCase())})}var Zo=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],$o=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],ra=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],Jo=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],Qo=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function ts(t){return!!pe(Jo,t).preset}function vf(t){var r=Uo(t),e=!!/mobi/g.exec(r),n={name:"unknown",version:"-1",majorVersion:-1,webview:ts(r),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},a={name:"unknown",version:"-1",majorVersion:-1},i=pe(Zo,r),o=i.preset,s=i.version,u=pe(Qo,r),l=u.preset,f=u.version,v=pe($o,r);if(n.chromium=!!v.preset,n.chromiumVersion=v.version,!n.chromium){var c=pe(ra,r);n.webkit=!!c.preset,n.webkitVersion=c.version}return l&&(a.name=l.id,a.version=f,a.majorVersion=parseInt(f,10)),o&&(n.name=o.id,n.version=s,n.webview&&a.name==="ios"&&n.name!=="safari"&&(n.webview=!1)),n.majorVersion=parseInt(n.version,10),{browser:n,os:a,isMobile:e,isHints:!1}}function df(t){var r=navigator.userAgentData,e=(r.uaList||r.brands).slice(),n=r.mobile||!1,a=e[0],i=(r.platform||navigator.platform).toLowerCase(),o={name:a.brand,version:a.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!Ye(Jo,e).brand||ts(Uo())},s={name:"unknown",version:"-1",majorVersion:-1};o.webkit=!o.chromium&&Ga(ra,function(c){return Ko(e,c)});var u=Ye($o,e);if(o.chromium=!!u.brand,o.chromiumVersion=u.version,!o.chromium){var l=Ye(ra,e);o.webkit=!!l.brand,o.webkitVersion=l.version}var f=jo(Qo,function(c){return new RegExp(""+c.test,"g").exec(i)});s.name=f?f.id:"";{var v=Ye(Zo,e);o.name=v.brand||o.name,o.version=v.brand&&t?t.uaFullVersion:v.version}return o.webkit&&(s.name=n?"ios":"mac"),s.name==="ios"&&o.webview&&(o.version="-1"),s.version=ta(s.version),o.version=ta(o.version),s.majorVersion=parseInt(s.version,10),o.majorVersion=parseInt(o.version,10),{browser:o,os:s,isMobile:n,isHints:!0}}function pf(t){return ff()?df():vf(t)}function hf(t,r,e,n,a,i){for(var o=0;o<a;++o){var s=e+o*a,u=n+o*a;t[s]+=t[u]*i,r[s]+=r[u]*i}}function gf(t,r,e,n,a){for(var i=0;i<a;++i){var o=e+i*a,s=n+i*a,u=t[o],l=r[o];t[o]=t[s],t[s]=u,r[o]=r[s],r[s]=l}}function mf(t,r,e,n,a){for(var i=0;i<n;++i){var o=e+i*n;t[o]/=a,r[o]/=a}}function rs(t,r,e){for(var n=t.slice(),a=0;a<e;++a)n[a*e+r-1]=0,n[(r-1)*e+a]=0;return n[(r-1)*(e+1)]=1,n}function cr(t,r){r===void 0&&(r=Math.sqrt(t.length));for(var e=t.slice(),n=St(r),a=0;a<r;++a){var i=r*a+a;if(!rt(e[i],Ct)){for(var o=a+1;o<r;++o)if(e[r*a+o]){gf(e,n,a,o,r);break}}if(!rt(e[i],Ct))return[];mf(e,n,a,r,e[i]);for(var o=0;o<r;++o){var s=o,u=o+a*r,l=e[u];!rt(l,Ct)||a===o||hf(e,n,s,a,r,-l)}}return n}function xf(t,r){r===void 0&&(r=Math.sqrt(t.length));for(var e=[],n=0;n<r;++n)for(var a=0;a<r;++a)e[a*r+n]=t[r*n+a];return e}function es(t,r){r===void 0&&(r=Math.sqrt(t.length));for(var e=[],n=t[r*r-1],a=0;a<r-1;++a)e[a]=t[r*(r-1)+a]/n;return e[r-1]=0,e}function yf(t,r){for(var e=St(r),n=0;n<r-1;++n)e[r*(r-1)+n]=t[n]||0;return e}function Nr(t,r){for(var e=t.slice(),n=t.length;n<r-1;++n)e[n]=0;return e[r-1]=1,e}function sr(t,r,e){if(r===void 0&&(r=Math.sqrt(t.length)),r===e)return t;for(var n=St(e),a=Math.min(r,e),i=0;i<a-1;++i){for(var o=0;o<a-1;++o)n[i*e+o]=t[i*r+o];n[(i+1)*e-1]=t[(i+1)*r-1],n[(e-1)*e+i]=t[(r-1)*r+i]}return n[e*e-1]=t[r*r-1],n}function sn(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];var n=St(t);return r.forEach(function(a){n=mt(n,a,t)}),n}function mt(t,r,e){e===void 0&&(e=Math.sqrt(t.length));var n=[],a=t.length/e,i=r.length/a;if(a){if(!i)return t}else return r;for(var o=0;o<e;++o)for(var s=0;s<i;++s){n[s*e+o]=0;for(var u=0;u<a;++u)n[s*e+o]+=t[u*e+o]*r[s*a+u]}return n}function ft(t,r){for(var e=Math.min(t.length,r.length),n=t.slice(),a=0;a<e;++a)n[a]=n[a]+r[a];return n}function Q(t,r){for(var e=Math.min(t.length,r.length),n=t.slice(),a=0;a<e;++a)n[a]=n[a]-r[a];return n}function Sf(t,r){return r===void 0&&(r=t.length===6),r?[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]:t}function ns(t,r){return r===void 0&&(r=t.length===9),r?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function kt(t,r,e){e===void 0&&(e=r.length);var n=mt(t,r,e),a=n[e-1];return n.map(function(i){return i/a})}function bf(t,r){return mt(t,[1,0,0,0,0,Math.cos(r),Math.sin(r),0,0,-Math.sin(r),Math.cos(r),0,0,0,0,1],4)}function _f(t,r){return mt(t,[Math.cos(r),0,-Math.sin(r),0,0,1,0,0,Math.sin(r),0,Math.cos(r),0,0,0,0,1],4)}function Ef(t,r){return mt(t,Ge(r,4))}function Xe(t,r){var e=r[0],n=e===void 0?1:e,a=r[1],i=a===void 0?1:a,o=r[2],s=o===void 0?1:o;return mt(t,[n,0,0,0,0,i,0,0,0,0,s,0,0,0,0,1],4)}function Be(t,r){return kt(Ge(r,3),Nr(t,3))}function kn(t,r){var e=r[0],n=e===void 0?0:e,a=r[1],i=a===void 0?0:a,o=r[2],s=o===void 0?0:o;return mt(t,[1,0,0,0,0,1,0,0,0,0,1,0,n,i,s,1],4)}function Ii(t,r){return mt(t,r,4)}function Ge(t,r){var e=Math.cos(t),n=Math.sin(t),a=St(r);return a[0]=e,a[1]=n,a[r]=-n,a[r+1]=e,a}function St(t){for(var r=t*t,e=[],n=0;n<r;++n)e[n]=n%(t+1)?0:1;return e}function Fa(t,r){for(var e=St(r),n=Math.min(t.length,r-1),a=0;a<n;++a)e[(r+1)*a]=t[a];return e}function Lr(t,r){for(var e=St(r),n=Math.min(t.length,r-1),a=0;a<n;++a)e[r*(r-1)+a]=t[a];return e}function Na(t,r,e,n,a,i,o,s){var u=t[0],l=t[1],f=r[0],v=r[1],c=e[0],d=e[1],p=n[0],h=n[1],g=a[0],m=a[1],x=i[0],y=i[1],S=o[0],_=o[1],b=s[0],E=s[1],D=[u,0,f,0,c,0,p,0,l,0,v,0,d,0,h,0,1,0,1,0,1,0,1,0,0,u,0,f,0,c,0,p,0,l,0,v,0,d,0,h,0,1,0,1,0,1,0,1,-g*u,-m*u,-x*f,-y*f,-S*c,-_*c,-b*p,-E*p,-g*l,-m*l,-x*v,-y*v,-S*d,-_*d,-b*h,-E*h],C=cr(D,8);if(!C.length)return[];var M=mt(C,[g,m,x,y,S,_,b,E],8);return M[8]=1,sr(xf(M),3,4)}var me=function(){return me=Object.assign||function(r){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},me.apply(this,arguments)};function Df(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Ce(t,r){return r===void 0&&(r=0),Kr(ne(t,r))}function Cf(t,r){var e=kt(t,[r[0],r[1]||0,r[2]||0,1],4),n=e[3]||1;return[e[0]/n,e[1]/n,e[2]/n]}function Kr(t){var r=Df();return t.forEach(function(e){var n=e.matrixFunction,a=e.functionValue;n&&(r=n(r,a))}),r}function ne(t,r){r===void 0&&(r=0);var e=wt(t)?t:Or(t);return e.map(function(n){var a=To(n),i=a.prefix,o=a.value,s=null,u=i,l="";if(i==="translate"||i==="translateX"||i==="translate3d"){var f=or(r)?me(me({},r),{"o%":r["%"]}):{"%":r,"o%":r},v=Fr(o).map(function(O,I){return I===0&&"x%"in f?f["%"]=r["x%"]:I===1&&"y%"in f?f["%"]=r["y%"]:f["%"]=r["o%"],gt(O,f)}),c=v[0],d=v[1],p=d===void 0?0:d,h=v[2],g=h===void 0?0:h;s=kn,l=[c,p,g]}else if(i==="translateY"){var m=or(r)?me({"%":r["y%"]},r):{"%":r},p=gt(o,m);s=kn,l=[0,p,0]}else if(i==="translateZ"){var g=parseFloat(o);s=kn,l=[0,0,g]}else if(i==="scale"||i==="scale3d"){var x=Fr(o).map(function(O){return parseFloat(O)}),y=x[0],S=x[1],_=S===void 0?y:S,b=x[2],E=b===void 0?1:b;s=Xe,l=[y,_,E]}else if(i==="scaleX"){var y=parseFloat(o);s=Xe,l=[y,1,1]}else if(i==="scaleY"){var _=parseFloat(o);s=Xe,l=[1,_,1]}else if(i==="scaleZ"){var E=parseFloat(o);s=Xe,l=[1,1,E]}else if(i==="rotate"||i==="rotateZ"||i==="rotateX"||i==="rotateY"){var D=Pe(o),C=D.unit,M=D.value,P=C==="rad"?M:M*Math.PI/180;i==="rotate"||i==="rotateZ"?(u="rotateZ",s=Ef):i==="rotateX"?s=bf:i==="rotateY"&&(s=_f),l=P}else if(i==="matrix3d")s=Ii,l=Fr(o).map(function(O){return parseFloat(O)});else if(i==="matrix"){var R=Fr(o).map(function(O){return parseFloat(O)});s=Ii,l=[R[0],R[1],0,0,R[2],R[3],0,0,0,0,1,0,R[4],R[5],0,1]}else u="";return{name:i,functionName:u,value:o,matrixFunction:s,functionValue:l}})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var ea=function(t,r){return ea=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)n.hasOwnProperty(a)&&(e[a]=n[a])},ea(t,r)};function wf(t,r){ea(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var as=typeof Map=="function"?void 0:function(){var t=0;return function(r){return r.__DIFF_KEY__||(r.__DIFF_KEY__=++t)}}(),is=function(t){wf(r,t);function r(e){return e===void 0&&(e=[]),t.call(this,e,as)||this}return r}(Xl);function Mf(t,r){return Ie(t,r,as)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var na=function(){return na=Object.assign||function(r){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},na.apply(this,arguments)};function Tf(){for(var t=0,r=0,e=arguments.length;r<e;r++)t+=arguments[r].length;for(var n=Array(t),a=0,r=0;r<e;r++)for(var i=arguments[r],o=0,s=i.length;o<s;o++,a++)n[a]=i[o];return n}var bn=function(){function t(){this._events={}}var r=t.prototype;return r.on=function(e,n){if(or(e))for(var a in e)this.on(a,e[a]);else this._addEvent(e,n,{});return this},r.off=function(e,n){if(!e)this._events={};else if(or(e))for(var a in e)this.off(a);else if(!n)this._events[e]=[];else{var i=this._events[e];if(i){var o=mr(i,function(s){return s.listener===n});o>-1&&i.splice(o,1)}}return this},r.once=function(e,n){var a=this;return n&&this._addEvent(e,n,{once:!0}),new Promise(function(i){a._addEvent(e,i,{once:!0})})},r.emit=function(e,n){var a=this;n===void 0&&(n={});var i=this._events[e];if(!e||!i)return!0;var o=!1;return n.eventType=e,n.stop=function(){o=!0},n.currentTarget=this,Tf(i).forEach(function(s){s.listener(n),s.once&&a.off(e,s.listener)}),!o},r.trigger=function(e,n){return n===void 0&&(n={}),this.emit(e,n)},r._addEvent=function(e,n,a){var i=this._events;i[e]=i[e]||[];var o=i[e];o.push(na({listener:n},a))},t}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var aa=function(t,r){return aa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)n.hasOwnProperty(a)&&(e[a]=n[a])},aa(t,r)};function Of(t,r){aa(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var Zr=function(){return Zr=Object.assign||function(r){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Zr.apply(this,arguments)};function Rf(t){var r=t.container;return r===document.body?[r.scrollLeft||document.documentElement.scrollLeft,r.scrollTop||document.documentElement.scrollTop]:[r.scrollLeft,r.scrollTop]}function Ai(t,r){return t.addEventListener("scroll",r),function(){t.removeEventListener("scroll",r)}}function Ve(t){if(t){if(Vt(t))return document.querySelector(t)}else return null;if(Ta(t))return t();if(t instanceof Element)return t;if("current"in t)return t.current;if("value"in t)return t.value}var Pf=function(t){Of(r,t);function r(){var n=t!==null&&t.apply(this,arguments)||this;return n._startRect=null,n._startPos=[],n._prevTime=0,n._timer=0,n._prevScrollPos=[0,0],n._isWait=!1,n._flag=!1,n._currentOptions=null,n._lock=!1,n._unregister=null,n._onScroll=function(){var a=n._currentOptions;n._lock||!a||n.emit("scrollDrag",{next:function(i){n.checkScroll({container:a.container,inputEvent:i})}})},n}var e=r.prototype;return e.dragStart=function(n,a){var i=Ve(a.container);if(!i){this._flag=!1;return}var o=0,s=0,u=0,l=0;if(i===document.body)u=window.innerWidth,l=window.innerHeight;else{var f=i.getBoundingClientRect();o=f.top,s=f.left,u=f.width,l=f.height}this._flag=!0,this._startPos=[n.clientX,n.clientY],this._startRect={top:o,left:s,width:u,height:l},this._prevScrollPos=this._getScrollPosition([0,0],a),this._currentOptions=a,this._registerScrollEvent(a)},e.drag=function(n,a){if(clearTimeout(this._timer),!!this._flag){var i=n.clientX,o=n.clientY,s=a.threshold,u=s===void 0?0:s,l=this,f=l._startRect,v=l._startPos;this._currentOptions=a;var c=[0,0];return f.top>o-u?(v[1]>f.top||o<v[1])&&(c[1]=-1):f.top+f.height<o+u&&(v[1]<f.top+f.height||o>v[1])&&(c[1]=1),f.left>i-u?(v[0]>f.left||i<v[0])&&(c[0]=-1):f.left+f.width<i+u&&(v[0]<f.left+f.width||i>v[0])&&(c[0]=1),!c[0]&&!c[1]?!1:this._continueDrag(Zr(Zr({},a),{direction:c,inputEvent:n,isDrag:!0}))}},e.checkScroll=function(n){var a=this;if(this._isWait)return!1;var i=n.prevScrollPos,o=i===void 0?this._prevScrollPos:i,s=n.direction,u=n.throttleTime,l=u===void 0?0:u,f=n.inputEvent,v=n.isDrag,c=this._getScrollPosition(s||[0,0],n),d=c[0]-o[0],p=c[1]-o[1],h=s||[d?Math.abs(d)/d:0,p?Math.abs(p)/p:0];return this._prevScrollPos=c,this._lock=!1,!d&&!p?!1:(this.emit("move",{offsetX:h[0]?d:0,offsetY:h[1]?p:0,inputEvent:f}),l&&v&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){a._continueDrag(n)},l)),!0)},e.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},e._getScrollPosition=function(n,a){var i=a.container,o=a.getScrollPosition,s=o===void 0?Rf:o;return s({container:Ve(i),direction:n})},e._continueDrag=function(n){var a=this,i,o=n.container,s=n.direction,u=n.throttleTime,l=n.useScroll,f=n.isDrag,v=n.inputEvent;if(!(!this._flag||f&&this._isWait)){var c=Ee(),d=Math.max(u+this._prevTime-c,0);if(d>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){a._continueDrag(n)},d),!1;this._prevTime=c;var p=this._getScrollPosition(s,n);this._prevScrollPos=p,f&&(this._isWait=!0),l||(this._lock=!0);var h={container:Ve(o),direction:s,inputEvent:v};return(i=n.requestScroll)===null||i===void 0||i.call(n,h),this.emit("scroll",h),this._isWait=!1,l||this.checkScroll(Zr(Zr({},n),{prevScrollPos:p,direction:s,inputEvent:v}))}},e._registerScrollEvent=function(n){this._unregisterScrollEvent();var a=n.checkScrollEvent;if(a){var i=a===!0?Ai:a,o=Ve(n.container);a===!0&&(o===document.body||o===document.documentElement)?this._unregister=Ai(window,this._onScroll):this._unregister=i(o,this._onScroll)}},e._unregisterScrollEvent=function(){var n;(n=this._unregister)===null||n===void 0||n.call(this),this._unregister=null},r}(bn);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function If(){for(var t=0,r=0,e=arguments.length;r<e;r++)t+=arguments[r].length;for(var n=Array(t),a=0,r=0;r<e;r++)for(var i=arguments[r],o=0,s=i.length;o<s;o++,a++)n[a]=i[o];return n}function Xt(t){return rt(t,Ct)}function Af(t,r){return t.every(function(e,n){return Xt(e-r[n])===0})}function zf(t,r){return!Xt(t[0]-r[0])&&!Xt(t[1]-r[1])}function os(t){return t.length<3?0:Math.abs(Bl(t.map(function(r,e){var n=t[e+1]||t[0];return r[0]*n[1]-n[0]*r[1]})))/2}function zi(t,r){var e=r.width,n=r.height,a=r.left,i=r.top,o=Wr(t),s=o.minX,u=o.minY,l=o.maxX,f=o.maxY,v=e/(l-s),c=n/(f-u);return t.map(function(d){return[a+(d[0]-s)*v,i+(d[1]-u)*c]})}function Wr(t){var r=t.map(function(n){return n[0]}),e=t.map(function(n){return n[1]});return{minX:Math.min.apply(Math,r),minY:Math.min.apply(Math,e),maxX:Math.max.apply(Math,r),maxY:Math.max.apply(Math,e)}}function ia(t,r,e){var n=t[0],a=t[1],i=Wr(r),o=i.minX,s=i.maxX,u=[[o,a],[s,a]],l=un(u[0],u[1]),f=oa(r),v=[];if(f.forEach(function(p){var h=un(p[0],p[1]),g=p[0];if(Af(l,h))v.push({pos:t,line:p,type:"line"});else{var m=ss(La(l,h),[u,p]);m.forEach(function(x){p.some(function(y){return zf(y,x)})?v.push({pos:x,line:p,type:"point"}):Xt(g[1]-a)!==0&&v.push({pos:x,line:p,type:"intersection"})})}}),qt(v,function(p){return p[0]===n}))return!0;var c=0,d={};return v.forEach(function(p){var h=p.pos,g=p.type,m=p.line;if(!(h[0]>n))if(g==="intersection")++c;else{if(g==="line")return;if(g==="point"){var x=qt(m,function(_){return _[1]!==a}),y=d[h[0]],S=x[1]>a?1:-1;y?y!==S&&++c:d[h[0]]=S}}}),c%2===1}function un(t,r){var e=t[0],n=t[1],a=r[0],i=r[1],o=a-e,s=i-n;Math.abs(o)<Ct&&(o=0),Math.abs(s)<Ct&&(s=0);var u=0,l=0,f=0;return o?s?(u=-s/o,l=1,f=-u*e-n):(l=1,f=-n):s&&(u=-1,f=e),[u,l,f]}function La(t,r){var e=t[0],n=t[1],a=t[2],i=r[0],o=r[1],s=r[2],u=e===0&&i===0,l=n===0&&o===0,f=[];if(u&&l)return[];if(u){var v=-a/n,c=-s/o;return v!==c?[]:[[-1/0,v],[1/0,v]]}else if(l){var d=-a/e,p=-s/i;return d!==p?[]:[[d,-1/0],[d,1/0]]}else if(e===0){var h=-a/n,g=-(o*h+s)/i;f=[[g,h]]}else if(i===0){var h=-s/o,g=-(n*h+a)/e;f=[[g,h]]}else if(n===0){var g=-a/e,h=-(i*g+s)/o;f=[[g,h]]}else if(o===0){var g=-s/i,h=-(e*g+a)/n;f=[[g,h]]}else{var g=(n*s-o*a)/(o*e-n*i),h=-(e*g+a)/n;f=[[g,h]]}return f.map(function(m){return[m[0],m[1]]})}function ss(t,r){var e=r.map(function(v){return[0,1].map(function(c){return[Math.min(v[0][c],v[1][c]),Math.max(v[0][c],v[1][c])]})}),n=[];if(t.length===2){var a=t[0],i=a[0],o=a[1];if(Xt(i-t[1][0])){if(!Xt(o-t[1][1])){var l=Math.max.apply(Math,e.map(function(v){return v[0][0]})),f=Math.min.apply(Math,e.map(function(v){return v[0][1]}));if(Xt(l-f)>0)return[];n=[[l,o],[f,o]]}}else{var s=Math.max.apply(Math,e.map(function(v){return v[1][0]})),u=Math.min.apply(Math,e.map(function(v){return v[1][1]}));if(Xt(s-u)>0)return[];n=[[i,s],[i,u]]}}return n.length||(n=t.filter(function(v){var c=v[0],d=v[1];return e.every(function(p){return 0<=Xt(c-p[0][0])&&0<=Xt(p[0][1]-c)&&0<=Xt(d-p[1][0])&&0<=Xt(p[1][1]-d)})})),n.map(function(v){return[Xt(v[0]),Xt(v[1])]})}function oa(t){return If(t.slice(1),[t[0]]).map(function(r,e){return[t[e],r]})}function Bf(t,r){var e=t.slice(),n=r.slice();Di(e)===-1&&e.reverse(),Di(n)===-1&&n.reverse();var a=oa(e),i=oa(n),o=a.map(function(f){return un(f[0],f[1])}),s=i.map(function(f){return un(f[0],f[1])}),u=[];o.forEach(function(f,v){var c=a[v],d=[];s.forEach(function(p,h){var g=La(f,p),m=ss(g,[c,i[h]]);d.push.apply(d,m.map(function(x){return{index1:v,index2:h,pos:x,type:"intersection"}}))}),d.sort(function(p,h){return pr(c[0],p.pos)-pr(c[0],h.pos)}),u.push.apply(u,d),ia(c[1],n)&&u.push({index1:v,index2:-1,pos:c[1],type:"inside"})}),i.forEach(function(f,v){if(ia(f[1],e)){var c=!1,d=mr(u,function(p){var h=p.index2;return h===v?(c=!0,!1):!!c});d===-1&&(c=!1,d=mr(u,function(p){var h=p.index1,g=p.index2;return h===-1&&g+1===v?(c=!0,!1):!!c})),d===-1?u.push({index1:-1,index2:v,pos:f[1],type:"inside"}):u.splice(d,0,{index1:-1,index2:v,pos:f[1],type:"inside"})}});var l={};return u.filter(function(f){var v=f.pos,c=v[0]+"x"+v[1];return l[c]?!1:(l[c]=!0,!0)})}function Gf(t,r){var e=Bf(t,r);return e.map(function(n){var a=n.pos;return a})}function kf(t,r){var e=Gf(t,r);return os(e)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var sa=function(t,r){return sa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)n.hasOwnProperty(a)&&(e[a]=n[a])},sa(t,r)};function Ff(t,r){sa(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var Dt=function(){return Dt=Object.assign||function(r){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Dt.apply(this,arguments)};function Nf(t,r){var e=r[0]-t[0],n=r[1]-t[1],a=Math.atan2(n,e);return a>=0?a:a+Math.PI*2}function Fn(t){return Nf([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}function Lf(t){return t.touches&&t.touches.length>=2}function qe(t){return t?t.touches?Hf(t.touches):[us(t)]:[]}function Wf(t){return t&&(t.type.indexOf("mouse")>-1||"button"in t)}function Bi(t,r,e){var n=e.length,a=xe(t,n),i=a.clientX,o=a.clientY,s=a.originalClientX,u=a.originalClientY,l=xe(r,n),f=l.clientX,v=l.clientY,c=xe(e,n),d=c.clientX,p=c.clientY,h=i-f,g=o-v,m=i-d,x=o-p;return{clientX:s,clientY:u,deltaX:h,deltaY:g,distX:m,distY:x}}function Nn(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function Hf(t){for(var r=Math.min(t.length,2),e=[],n=0;n<r;++n)e.push(us(t[n]));return e}function us(t){return{clientX:t.clientX,clientY:t.clientY}}function xe(t,r){r===void 0&&(r=t.length);for(var e={clientX:0,clientY:0,originalClientX:0,originalClientY:0},n=Math.min(t.length,r),a=0;a<n;++a){var i=t[a];e.originalClientX+="originalClientX"in i?i.originalClientX:i.clientX,e.originalClientY+="originalClientY"in i?i.originalClientY:i.clientY,e.clientX+=i.clientX,e.clientY+=i.clientY}return r?{clientX:e.clientX/r,clientY:e.clientY/r,originalClientX:e.originalClientX/r,originalClientY:e.originalClientY/r}:e}var Ln=function(){function t(r){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=r,this.prevClients=r,this.length=r.length}return t.prototype.getAngle=function(r){return r===void 0&&(r=this.prevClients),Fn(r)},t.prototype.getRotation=function(r){return r===void 0&&(r=this.prevClients),Fn(r)-Fn(this.startClients)},t.prototype.getPosition=function(r,e){r===void 0&&(r=this.prevClients);var n=Bi(r||this.prevClients,this.prevClients,this.startClients),a=n.deltaX,i=n.deltaY;return this.movement+=Math.sqrt(a*a+i*i),this.prevClients=r,n},t.prototype.getPositions=function(r){r===void 0&&(r=this.prevClients);for(var e=this.prevClients,n=this.startClients,a=Math.min(this.length,e.length),i=[],o=0;o<a;++o)i[o]=Bi([r[o]],[e[o]],[n[o]]);return i},t.prototype.getMovement=function(r){var e=this.movement;if(!r)return e;var n=xe(r,this.length),a=xe(this.prevClients,this.length),i=n.clientX-a.clientX,o=n.clientY-a.clientY;return Math.sqrt(i*i+o*o)+e},t.prototype.getDistance=function(r){return r===void 0&&(r=this.prevClients),Nn(r)},t.prototype.getScale=function(r){return r===void 0&&(r=this.prevClients),Nn(r)/Nn(this.startClients)},t.prototype.move=function(r,e){this.startClients.forEach(function(n){n.clientX-=r,n.clientY-=e}),this.prevClients.forEach(function(n){n.clientX-=r,n.clientY-=e})},t}(),Gi=["textarea","input"],Yf=function(t){Ff(r,t);function r(e,n){n===void 0&&(n={});var a=t.call(this)||this;a.options={},a.flag=!1,a.pinchFlag=!1,a.data={},a.isDrag=!1,a.isPinch=!1,a.clientStores=[],a.targets=[],a.prevTime=0,a.doubleFlag=!1,a._useMouse=!1,a._useTouch=!1,a._useDrag=!1,a._dragFlag=!1,a._isTrusted=!1,a._isMouseEvent=!1,a._isSecondaryButton=!1,a._preventMouseEvent=!1,a._prevInputEvent=null,a._isDragAPI=!1,a._isIdle=!0,a._preventMouseEventId=0,a._window=window,a.onDragStart=function(c,d){if(d===void 0&&(d=!0),!(!a.flag&&c.cancelable===!1)){var p=c.type.indexOf("drag")>=-1;if(!(a.flag&&p)){a._isDragAPI=!0;var h=a.options,g=h.container,m=h.pinchOutside,x=h.preventWheelClick,y=h.preventRightClick,S=h.preventDefault,_=h.checkInput,b=h.dragFocusedInput,E=h.preventClickEventOnDragStart,D=h.preventClickEventOnDrag,C=h.preventClickEventByCondition,M=a._useTouch,P=!a.flag;if(a._isSecondaryButton=c.which===3||c.button===2,x&&(c.which===2||c.button===1)||y&&(c.which===3||c.button===2))return a.stop(),!1;if(P){var R=a._window.document.activeElement,O=c.target;if(O){var I=O.tagName.toLowerCase(),A=Gi.indexOf(I)>-1,k=O.isContentEditable;if(A||k){if(_||!b&&R===O)return!1;if(R&&(R===O||k&&R.isContentEditable&&R.contains(O)))if(b)O.blur();else return!1}else if((S||c.type==="touchstart")&&R){var F=R.tagName.toLowerCase();(R.isContentEditable||Gi.indexOf(F)>-1)&&R.blur()}(E||D||C)&&zt(a._window,"click",a._onClick,!0)}a.clientStores=[new Ln(qe(c))],a._isIdle=!1,a.flag=!0,a.isDrag=!1,a._isTrusted=d,a._dragFlag=!0,a._prevInputEvent=c,a.data={},a.doubleFlag=Ee()-a.prevTime<200,a._isMouseEvent=Wf(c),!a._isMouseEvent&&a._preventMouseEvent&&a._allowMouseEvent();var G=a._preventMouseEvent||a.emit("dragStart",Dt(Dt({data:a.data,datas:a.data,inputEvent:c,isMouseEvent:a._isMouseEvent,isSecondaryButton:a._isSecondaryButton,isTrusted:d,isDouble:a.doubleFlag},a.getCurrentStore().getPosition()),{preventDefault:function(){c.preventDefault()},preventDrag:function(){a._dragFlag=!1}}));G===!1&&a.stop(),a._isMouseEvent&&a.flag&&S&&c.preventDefault()}if(!a.flag)return!1;var L=0;if(P?(a._attchDragEvent(),M&&m&&(L=setTimeout(function(){zt(g,"touchstart",a.onDragStart,{passive:!1})}))):M&&m&&Tt(g,"touchstart",a.onDragStart),a.flag&&Lf(c)){if(clearTimeout(L),P&&c.touches.length!==c.changedTouches.length)return;a.pinchFlag||a.onPinchStart(c)}}}},a.onDrag=function(c,d){if(a.flag){var p=a.options.preventDefault;!a._isMouseEvent&&p&&c.preventDefault(),a._prevInputEvent=c;var h=qe(c),g=a.moveClients(h,c,!1);if(a._dragFlag){if(a.pinchFlag||g.deltaX||g.deltaY){var m=a._preventMouseEvent||a.emit("drag",Dt(Dt({},g),{isScroll:!!d,inputEvent:c}));if(m===!1){a.stop();return}}a.pinchFlag&&a.onPinch(c,h)}a.getCurrentStore().getPosition(h,!0)}},a.onDragEnd=function(c){if(a.flag){var d=a.options,p=d.pinchOutside,h=d.container,g=d.preventClickEventOnDrag,m=d.preventClickEventOnDragStart,x=d.preventClickEventByCondition,y=a.isDrag;(g||m||x)&&requestAnimationFrame(function(){a._allowClickEvent()}),!x&&!m&&g&&!y&&a._allowClickEvent(),a._useTouch&&p&&Tt(h,"touchstart",a.onDragStart),a.pinchFlag&&a.onPinchEnd(c);var S=c!=null&&c.touches?qe(c):[],_=S.length;_===0||!a.options.keepDragging?a.flag=!1:a._addStore(new Ln(S));var b=a._getPosition(),E=Ee(),D=!y&&a.doubleFlag;a._prevInputEvent=null,a.prevTime=y||D?0:E,a.flag||(a._dettachDragEvent(),a._preventMouseEvent||a.emit("dragEnd",Dt({data:a.data,datas:a.data,isDouble:D,isDrag:y,isClick:!y,isMouseEvent:a._isMouseEvent,isSecondaryButton:a._isSecondaryButton,inputEvent:c,isTrusted:a._isTrusted},b)),a.clientStores=[],a._isMouseEvent||(a._preventMouseEvent=!0,clearTimeout(a._preventMouseEventId),a._preventMouseEventId=setTimeout(function(){a._preventMouseEvent=!1},200)),a._isIdle=!0)}},a.onBlur=function(){a.onDragEnd()},a._allowClickEvent=function(){Tt(a._window,"click",a._onClick,!0)},a._onClick=function(c){a._allowClickEvent(),a._allowMouseEvent();var d=a.options.preventClickEventByCondition;d!=null&&d(c)||(c.stopPropagation(),c.preventDefault())},a._onContextMenu=function(c){var d=a.options;d.preventRightClick?a.onDragEnd(c):c.preventDefault()},a._passCallback=function(){};var i=[].concat(e),o=i[0];a._window=Bo(o)?o:Mr(o),a.options=Dt({checkInput:!1,container:o&&!("document"in o)?Mr(o):o,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},n);var s=a.options,u=s.container,l=s.events,f=s.checkWindowBlur;if(a._useDrag=l.indexOf("drag")>-1,a._useTouch=l.indexOf("touch")>-1,a._useMouse=l.indexOf("mouse")>-1,a.targets=i,a._useDrag&&i.forEach(function(c){zt(c,"dragstart",a.onDragStart)}),a._useMouse&&(i.forEach(function(c){zt(c,"mousedown",a.onDragStart),zt(c,"mousemove",a._passCallback)}),zt(u,"contextmenu",a._onContextMenu)),f&&zt(Mr(),"blur",a.onBlur),a._useTouch){var v={passive:!1};i.forEach(function(c){zt(c,"touchstart",a.onDragStart,v),zt(c,"touchmove",a._passCallback,v)})}return a}return r.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},r.prototype.getMovement=function(e){return this.getCurrentStore().getMovement(e)+this.clientStores.slice(1).reduce(function(n,a){return n+a.movement},0)},r.prototype.isDragging=function(){return this.isDrag},r.prototype.isIdle=function(){return this._isIdle},r.prototype.isFlag=function(){return this.flag},r.prototype.isPinchFlag=function(){return this.pinchFlag},r.prototype.isDoubleFlag=function(){return this.doubleFlag},r.prototype.isPinching=function(){return this.isPinch},r.prototype.scrollBy=function(e,n,a,i){i===void 0&&(i=!0),this.flag&&(this.clientStores[0].move(e,n),i&&this.onDrag(a,!0))},r.prototype.move=function(e,n){var a=e[0],i=e[1],o=this.getCurrentStore(),s=o.prevClients;return this.moveClients(s.map(function(u){var l=u.clientX,f=u.clientY;return{clientX:l+a,clientY:f+i,originalClientX:l,originalClientY:f}}),n,!0)},r.prototype.triggerDragStart=function(e){this.onDragStart(e,!1)},r.prototype.setEventData=function(e){var n=this.data;for(var a in e)n[a]=e[a];return this},r.prototype.setEventDatas=function(e){return this.setEventData(e)},r.prototype.getCurrentEvent=function(e){return e===void 0&&(e=this._prevInputEvent),Dt(Dt({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:e})},r.prototype.getEventData=function(){return this.data},r.prototype.getEventDatas=function(){return this.data},r.prototype.unset=function(){var e=this,n=this.targets,a=this.options.container;this.off(),Tt(this._window,"blur",this.onBlur),this._useDrag&&n.forEach(function(i){Tt(i,"dragstart",e.onDragStart)}),this._useMouse&&(n.forEach(function(i){Tt(i,"mousedown",e.onDragStart)}),Tt(a,"contextmenu",this._onContextMenu)),this._useTouch&&(n.forEach(function(i){Tt(i,"touchstart",e.onDragStart)}),Tt(a,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},r.prototype.onPinchStart=function(e){var n=this,a=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>a)){var i=new Ln(qe(e));this.pinchFlag=!0,this._addStore(i);var o=this.emit("pinchStart",Dt(Dt({data:this.data,datas:this.data,angle:i.getAngle(),touches:this.getCurrentStore().getPositions()},i.getPosition()),{inputEvent:e,isTrusted:this._isTrusted,preventDefault:function(){e.preventDefault()},preventDrag:function(){n._dragFlag=!1}}));o===!1&&(this.pinchFlag=!1)}},r.prototype.onPinch=function(e,n){if(!(!this.flag||!this.pinchFlag||n.length<2)){var a=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",Dt(Dt({data:this.data,datas:this.data,movement:this.getMovement(n),angle:a.getAngle(n),rotation:a.getRotation(n),touches:a.getPositions(n),scale:a.getScale(n),distance:a.getDistance(n)},a.getPosition(n)),{inputEvent:e,isTrusted:this._isTrusted}))}},r.prototype.onPinchEnd=function(e){if(this.pinchFlag){var n=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var a=this.getCurrentStore();this.emit("pinchEnd",Dt(Dt({data:this.data,datas:this.data,isPinch:n,touches:a.getPositions()},a.getPosition()),{inputEvent:e}))}},r.prototype.getCurrentStore=function(){return this.clientStores[0]},r.prototype.moveClients=function(e,n,a){var i=this._getPosition(e,a),o=this.isDrag;(i.deltaX||i.deltaY)&&(this.isDrag=!0);var s=!1;return!o&&this.isDrag&&(s=!0),Dt(Dt({data:this.data,datas:this.data},i),{movement:this.getMovement(e),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:n,isTrusted:this._isTrusted,isFirstDrag:s})},r.prototype._addStore=function(e){this.clientStores.splice(0,0,e)},r.prototype._getPosition=function(e,n){var a=this.getCurrentStore(),i=a.getPosition(e,n),o=this.clientStores.slice(1).reduce(function(l,f){var v=f.getPosition();return l.distX+=v.distX,l.distY+=v.distY,l},i),s=o.distX,u=o.distY;return Dt(Dt({},i),{distX:s,distY:u})},r.prototype._attchDragEvent=function(){var e=this._window,n=this.options.container,a={passive:!1};this._isDragAPI&&(zt(n,"dragover",this.onDrag,a),zt(e,"dragend",this.onDragEnd)),this._useMouse&&(zt(n,"mousemove",this.onDrag),zt(e,"mouseup",this.onDragEnd)),this._useTouch&&(zt(n,"touchmove",this.onDrag,a),zt(e,"touchend",this.onDragEnd,a),zt(e,"touchcancel",this.onDragEnd,a))},r.prototype._dettachDragEvent=function(){var e=this._window,n=this.options.container;this._isDragAPI&&(Tt(n,"dragover",this.onDrag),Tt(e,"dragend",this.onDragEnd)),this._useMouse&&(Tt(n,"mousemove",this.onDrag),Tt(e,"mouseup",this.onDragEnd)),this._useTouch&&(Tt(n,"touchstart",this.onDragStart),Tt(n,"touchmove",this.onDrag),Tt(e,"touchend",this.onDragEnd),Tt(e,"touchcancel",this.onDragEnd))},r.prototype._allowMouseEvent=function(){this._preventMouseEvent=!1,clearTimeout(this._preventMouseEventId)},r}(bn);function Xf(t){for(var r=5381,e=t.length;e;)r=r*33^t.charCodeAt(--e);return r>>>0}var Vf=Xf;function qf(t){return Vf(t).toString(36)}function jf(t){if(t&&t.getRootNode){var r=t.getRootNode();if(r.nodeType===11)return r}}function Uf(t,r,e){return e.original?r:r.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(n,a){var i=a.trim();return(i?Fr(i):[""]).map(function(o){var s=o.trim();return s.indexOf("@")===0?s:s.indexOf(":global")>-1?s.replace(/\:global/g,""):s.indexOf(":host")>-1?"".concat(s.replace(/\:host/g,".".concat(t))):s?".".concat(t," ").concat(s):".".concat(t)}).join(", ")+" {"})}function Kf(t,r,e,n,a){var i=le(n),o=i.createElement("style");return o.setAttribute("type","text/css"),o.setAttribute("data-styled-id",t),o.setAttribute("data-styled-count","1"),e.nonce&&o.setAttribute("nonce",e.nonce),o.innerHTML=Uf(t,r,e),(a||i.head||i.body).appendChild(o),o}function Zf(t){var r="rCS"+qf(t);return{className:r,inject:function(e,n){n===void 0&&(n={});var a=jf(e),i=(a||e.ownerDocument||document).querySelector('style[data-styled-id="'.concat(r,'"]'));if(!i)i=Kf(r,t,n,e,a);else{var o=parseFloat(i.getAttribute("data-styled-count"))||0;i.setAttribute("data-styled-count","".concat(o+1))}return{destroy:function(){var s,u=parseFloat(i.getAttribute("data-styled-count"))||0;u<=1?(i.remove?i.remove():(s=i.parentNode)===null||s===void 0||s.removeChild(i),i=null):i.setAttribute("data-styled-count","".concat(u-1))}}}}}var ua=function(){return ua=Object.assign||function(r){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},ua.apply(this,arguments)};function $f(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(e[n[a]]=t[n[a]]);return e}function ls(t,r){var e=Zf(r),n=e.className;return Ul(function(a,i){var o=a.className,s=o===void 0?"":o;a.cspNonce;var u=$f(a,["className","cspNonce"]),l=uf();return lf(i,function(){return l.current},[]),qo(function(){var f=e.inject(l.current,{nonce:a.cspNonce});return function(){f.destroy()}},[]),ar(t,ua({ref:l,"data-styled-id":n,className:"".concat(s," ").concat(n)},u))})}var la=function(t,r){return la=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])},la(t,r)};function ke(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");la(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var w=function(){return w=Object.assign||function(r){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},w.apply(this,arguments)};function Jf(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(e[n[a]]=t[n[a]]);return e}function Qf(t,r,e,n){var a=arguments.length,i=a<3?r:n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,r,e,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(r,e,i):o(r,e))||i);return a>3&&i&&Object.defineProperty(r,e,i),i}function tc(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function T(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),a,i=[],o;try{for(;(r===void 0||r-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return i}function N(t,r,e){if(arguments.length===2)for(var n=0,a=r.length,i;n<a;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return t.concat(i||Array.prototype.slice.call(r))}function Fe(t,r){return w({events:[],props:[],name:t},r)}var rc=["n","w","s","e"],Wa=["n","w","s","e","nw","ne","sw","se"];function ec(t,r){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*t,'px" height="').concat(32*t,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(r,'deg);transform-origin: 16px 16px"></path></svg>')}function nc(t){var r=ec(1,t),e=Math.round(t/45)*45%180,n="ns-resize";return e===135?n="nwse-resize":e===45?n="nesw-resize":e===90&&(n="ew-resize"),"cursor:".concat(n,";cursor: url('").concat(r,"') 16 16, ").concat(n,";")}var ce=pf(),fs=ce.browser.webkit,cs=fs&&function(){var t=typeof window>"u"?{userAgent:""}:window.navigator,r=/applewebkit\/([^\s]+)/g.exec(t.userAgent.toLowerCase());return r?parseFloat(r[1])<605:!1}(),vs=ce.browser.name,ds=parseInt(ce.browser.version,10),ac=vs==="chrome",ic=ce.browser.chromium,oc=parseInt(ce.browser.chromiumVersion,10)||0,sc=ac&&ds>=109||ic&&oc>=109,uc=vs==="firefox",lc=parseInt(ce.browser.webkitVersion,10)>=612||ds>=15,Ha="moveable-",fc=Wa.map(function(t){var r="",e="",n="center",a="center",i="calc(var(--moveable-control-padding, 20) * -1px)";return t.indexOf("n")>-1&&(r="top: ".concat(i,";"),a="bottom"),t.indexOf("s")>-1&&(r="top: 0px;",a="top"),t.indexOf("w")>-1&&(e="left: ".concat(i,";"),n="right"),t.indexOf("e")>-1&&(e="left: 0px;",n="left"),'.around-control[data-direction*="'.concat(t,`"] {
        `).concat(e).concat(r,`
        transform-origin: `).concat(n," ").concat(a,`;
    }`)}).join(`
`),cc=`
{
position: absolute;
width: 1px;
height: 1px;
left: 0;
top: 0;
z-index: 3000;
--moveable-color: #4af;
--zoom: 1;
--zoompx: 1px;
--moveable-line-padding: 0;
--moveable-control-padding: 0;
will-change: transform;
outline: 1px solid transparent;
}
.control-box {
z-index: 0;
}
.line, .control {
position: absolute;
left: 0;
top: 0;
will-change: transform;
}
.control {
width: 14px;
height: 14px;
border-radius: 50%;
border: 2px solid #fff;
box-sizing: border-box;
background: #4af;
background: var(--moveable-color);
margin-top: -7px;
margin-left: -7px;
border: 2px solid #fff;
z-index: 10;
}
.around-control {
position: absolute;
will-change: transform;
width: calc(var(--moveable-control-padding, 20) * 1px);
height: calc(var(--moveable-control-padding, 20) * 1px);
left: calc(var(--moveable-control-padding, 20) * -0.5px);
top: calc(var(--moveable-control-padding, 20) * -0.5px);
box-sizing: border-box;
background: transparent;
z-index: 8;
cursor: alias;
transform-origin: center center;
}
`.concat(fc,`
.padding {
position: absolute;
top: 0px;
left: 0px;
width: 100px;
height: 100px;
transform-origin: 0 0;
}
.line {
width: 1px;
height: 1px;
background: #4af;
background: var(--moveable-color);
transform-origin: 0px 50%;
}
.line.edge {
z-index: 1;
background: transparent;
}
.line.dashed {
box-sizing: border-box;
background: transparent;
}
.line.dashed.horizontal {
border-top: 1px dashed #4af;
border-top-color: #4af;
border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
border-left: 1px dashed #4af;
border-left-color: #4af;
border-left-color: var(--moveable-color);
}
.line.vertical {
transform: translateX(-50%);
}
.line.horizontal {
transform: translateY(-50%);
}
.line.vertical.bold {
width: 2px;
}
.line.horizontal.bold {
height: 2px;
}

.control.origin {
border-color: #f55;
background: #fff;
width: 12px;
height: 12px;
margin-top: -6px;
margin-left: -6px;
pointer-events: none;
}
`).concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return`
.direction[data-rotation="`.concat(t,'"], :global .view-control-rotation').concat(t,` {
`).concat(nc(t),`
}
`)}).join(`
`),`

.line.direction:before {
content: "";
position: absolute;
width: 100%;
height: calc(var(--moveable-line-padding, 0) * 1px);
bottom: 0;
left: 0;
}
.group {
z-index: -1;
}
.area {
position: absolute;
}
.area-pieces {
position: absolute;
top: 0;
left: 0;
display: none;
}
.area.avoid, .area.pass {
pointer-events: none;
}
.area.avoid+.area-pieces {
display: block;
}
.area-piece {
position: absolute;
}

`).concat(cs?`:global svg *:before {
content:"";
transform-origin: inherit;
}`:"",`
`),vc=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],fa=1e-4,Yt=1e-7,je=1e-9,ca=Math.pow(10,10),ki=-ca,dc={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},Ya={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},ps={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},hs=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag","getControlBoxElement","getMoveables","getDragElement"];function Ne(t,r,e,n,a,i){var o,s;i===void 0&&(i="draggable");var u=(s=(o=r.gestos[i])===null||o===void 0?void 0:o.move(e,t.inputEvent))!==null&&s!==void 0?s:{},l=u.originalDatas||u.datas,f=l[i]||(l[i]={});return w(w({},u),{isPinch:!!n,parentEvent:!0,datas:f,originalDatas:t.originalDatas})}var ae=function(){function t(r){var e;r===void 0&&(r="draggable"),this.ableName=r,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(e={},e[r]={},e)}return t.prototype.dragStart=function(r,e){this.isDrag=!1,this.isFlag=!1;var n=e.originalDatas;return this.datas=n,n[this.ableName]||(n[this.ableName]={}),w(w({},this.move(r,e.inputEvent)),{type:"dragstart"})},t.prototype.drag=function(r,e){return this.move([r[0]-this.prevX,r[1]-this.prevY],e)},t.prototype.move=function(r,e){var n,a,i=!1;if(!this.isFlag)this.prevX=r[0],this.prevY=r[1],this.startX=r[0],this.startY=r[1],n=r[0],a=r[1],this.isFlag=!0;else{var o=this.isDrag;n=this.prevX+r[0],a=this.prevY+r[1],(r[0]||r[1])&&(this.isDrag=!0),!o&&this.isDrag&&(i=!0)}return this.prevX=n,this.prevY=a,{type:"drag",clientX:n,clientY:a,inputEvent:e,isFirstDrag:i,isDrag:this.isDrag,distX:n-this.startX,distY:a-this.startY,deltaX:r[0],deltaY:r[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function re(t,r,e,n){var a=t.length===16,i=a?4:3,o=qr(t,e,n,i),s=T(o,4),u=T(s[0],2),l=u[0],f=u[1],v=T(s[1],2),c=v[0],d=v[1],p=T(s[2],2),h=p[0],g=p[1],m=T(s[3],2),x=m[0],y=m[1],S=T(bt(t,r,i),2),_=S[0],b=S[1],E=Math.min(l,c,h,x),D=Math.min(f,d,g,y),C=Math.max(l,c,h,x),M=Math.max(f,d,g,y);l=l-E||0,c=c-E||0,h=h-E||0,x=x-E||0,f=f-D||0,d=d-D||0,g=g-D||0,y=y-D||0,_=_-E||0,b=b-D||0;var P=t[0],R=t[i+1],O=Wt(P*R);return{left:E,top:D,right:C,bottom:M,origin:[_,b],pos1:[l,f],pos2:[c,d],pos3:[h,g],pos4:[x,y],direction:O}}function gs(t,r){var e=r.clientX,n=r.clientY,a=r.datas,i=t.state,o=i.moveableClientRect,s=i.rootMatrix,u=i.is3d,l=i.pos1,f=o.left,v=o.top,c=u?4:3,d=T(Q(se(s,[e-f,n-v],c),l),2),p=d[0],h=d[1],g=T(vr({datas:a,distX:p,distY:h}),2),m=g[0],x=g[1];return[m,x]}function Vr(t,r){var e=r.datas,n=t.state,a=n.allMatrix,i=n.beforeMatrix,o=n.is3d,s=n.left,u=n.top,l=n.origin,f=n.offsetMatrix,v=n.targetMatrix,c=n.transformOrigin,d=o?4:3;e.is3d=o,e.matrix=a,e.targetMatrix=v,e.beforeMatrix=i,e.offsetMatrix=f,e.transformOrigin=c,e.inverseMatrix=cr(a,d),e.inverseBeforeMatrix=cr(i,d),e.absoluteOrigin=Nr(ft([s,u],l),d),e.startDragBeforeDist=kt(e.inverseBeforeMatrix,e.absoluteOrigin,d),e.startDragDist=kt(e.inverseMatrix,e.absoluteOrigin,d)}function pc(t){return re(t.datas.beforeTransform,[50,50],100,100).direction}function _n(t,r,e){var n=r.datas,a=r.originalDatas.beforeRenderable,i=n.transformIndex,o=a.nextTransforms,s=o.length,u=a.nextTransformAppendedIndexes,l=-1;i===-1?(e==="translate"?l=0:e==="rotate"&&(l=mr(o,function(d){return d.match(/scale\(/g)})),l===-1&&(l=o.length),n.transformIndex=l):qt(u,function(d){return d.index===i&&d.functionName===e})?l=i:l=i+u.filter(function(d){return d.index<i}).length;var f=Lv(o,t.state,l),v=f.targetFunction,c=e==="rotate"?"rotateZ":e;n.beforeFunctionTexts=f.beforeFunctionTexts,n.afterFunctionTexts=f.afterFunctionTexts,n.beforeTransform=f.beforeFunctionMatrix,n.beforeTransform2=f.beforeFunctionMatrix2,n.targetTansform=f.targetFunctionMatrix,n.afterTransform=f.afterFunctionMatrix,n.afterTransform2=f.afterFunctionMatrix2,n.targetAllTransform=f.allFunctionMatrix,v.functionName===c?(n.afterFunctionTexts.splice(0,1),n.isAppendTransform=!1):s>l&&(n.isAppendTransform=!0,a.nextTransformAppendedIndexes=N(N([],T(u),!1),[{functionName:e,index:l,isAppend:!0}],!1))}function En(t,r,e){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?e:r," ").concat(t.afterFunctionTexts.join(" "))}function hc(t){var r=t.datas,e=t.distX,n=t.distY,a=T(xs({datas:r,distX:e,distY:n}),2),i=a[0],o=a[1],s=ms(r,yf([i,o],4));return kt(s,Nr([0,0,0],4),4)}function ms(t,r,e){var n=t.beforeTransform,a=t.afterTransform,i=t.beforeTransform2,o=t.afterTransform2,s=t.targetAllTransform,u=e?mt(s,r,4):mt(r,s,4),l=mt(cr(e?i:n,4),u,4),f=mt(l,cr(e?o:a,4),4);return f}function xs(t){var r=t.datas,e=t.distX,n=t.distY,a=r.inverseBeforeMatrix,i=r.is3d,o=r.startDragBeforeDist,s=r.absoluteOrigin,u=i?4:3;return Q(kt(a,ft(s,[e,n]),u),o)}function vr(t,r){var e=t.datas,n=t.distX,a=t.distY,i=e.inverseBeforeMatrix,o=e.inverseMatrix,s=e.is3d,u=e.startDragBeforeDist,l=e.startDragDist,f=e.absoluteOrigin,v=s?4:3;return Q(kt(r?i:o,ft(f,[n,a]),v),r?u:l)}function gc(t,r){var e=t.datas,n=t.distX,a=t.distY;e.beforeMatrix;var i=e.matrix,o=e.is3d;e.startDragBeforeDist;var s=e.startDragDist,u=e.absoluteOrigin,l=o?4:3;return Q(kt(i,ft(s,[n,a]),l),u)}function mc(t,r,e,n,a,i){return n===void 0&&(n=r),a===void 0&&(a=e),i===void 0&&(i=[0,0]),t?t.map(function(o,s){var u=Pe(o),l=u.value,f=u.unit,v=s?a:n,c=s?e:r;if(o==="%"||isNaN(l)){var d=v?i[s]/v:0;return c*d}else if(f!=="%")return l;return c*l/100}):i}function ys(t){var r=[];return t[1]>=0&&(t[0]>=0&&r.push(3),t[0]<=0&&r.push(2)),t[1]<=0&&(t[0]>=0&&r.push(1),t[0]<=0&&r.push(0)),r}function xc(t,r){return ys(r).map(function(e){return t[e]})}function Wn(t,r){var e=(r+1)/2;return[an(t[0][0],t[1][0],e,1-e),an(t[0][1],t[1][1],e,1-e)]}function Pt(t,r){var e=Wn([t[0],t[1]],r[0]),n=Wn([t[2],t[3]],r[0]);return Wn([e,n],r[1])}function yc(t,r,e,n,a,i){var o=qr(r,e,n,a),s=Pt(o,i),u=t[0]-s[0],l=t[1]-s[1];return[u,l]}function Le(t,r,e,n){return mt(t,Se(r,n,e),n)}function Sc(t,r,e,n){var a=t.transformOrigin,i=t.offsetMatrix,o=t.is3d,s=o?4:3,u;if(Vt(e)){var l=r.beforeTransform,f=r.afterTransform;n?u=sr(Ce(e),4,s):u=sr(mt(mt(l,Ce([e]),4),f,4),4,s)}else u=e;return Le(i,u,a,s)}function bc(t,r){var e=t.transformOrigin,n=t.offsetMatrix,a=t.is3d,i=t.targetMatrix,o=t.targetAllTransform,s=a?4:3;return Le(n,mt(o||i,Fa(r,s),s),e,s)}function Dn(t,r){var e=ve(r);return{setTransform:function(n,a){a===void 0&&(a=-1),e.startTransforms=wt(n)?n:Or(n),va(t,r,a)},setTransformIndex:function(n){va(t,r,n)}}}function Cn(t,r,e){var n=ve(r),a=n.startTransforms;va(t,r,mr(a,function(i){return i.indexOf("".concat(e,"("))===0}))}function va(t,r,e){var n=ve(r),a=r.datas;if(a.transformIndex=e,e!==-1){var i=n.startTransforms[e];if(i){var o=t.state,s=ne([i],{"x%":function(u){return u/100*o.offsetWidth},"y%":function(u){return u/100*o.offsetHeight}});a.startValue=s[0].functionValue}}}function Xa(t,r){var e=ve(t);e.nextTransforms=Or(r)}function ve(t){return t.originalDatas.beforeRenderable}function ln(t){var r=t.originalDatas.beforeRenderable;return r.nextTransforms}function Ue(t){return(ln(t)||[]).join(" ")}function Ke(t){return ve(t).nextStyle}function Ss(t,r,e,n,a){Xa(a,r);var i=Lt.drag(t,Ne(a,t.state,e,n)),o=i?i.transform:r;return w(w({transform:r,drag:i},Ht({transform:o},a)),{afterTransform:o})}function Va(t,r,e,n,a,i){var o=Sc(t.state,a,r,i),s=Dc(t,e,n,o);return s}function bs(t,r,e,n,a,i,o){var s=Va(t,r,e,a,i,o),u=t.state,l=u.left,f=u.top,v=t.props.groupable,c=v?l:0,d=v?f:0,p=Q(n,s);return Q(p,[c,d])}function _c(t,r,e,n,a,i,o){var s=bs(t,r,e,n,a,i,o);return s}function Ec(t,r,e){return[r?-1+t[0]/(r/2):0,e?-1+t[1]/(e/2):0]}function Dc(t,r,e,n){n===void 0&&(n=t.state.allMatrix);var a=t.state,i=a.width,o=a.height,s=a.is3d,u=s?4:3,l=[i/2*(1+r[0])+e[0],o/2*(1+r[1])+e[1]];return bt(n,l,u)}function Cc(t,r,e){var n=e.fixedDirection,a=e.fixedPosition,i=e.fixedOffset;return bs(t,"rotate(".concat(r,"deg)"),n,a,i,e)}function wc(t,r,e,n,a,i){var o=t.props.groupable,s=t.state,u=s.transformOrigin,l=s.offsetMatrix,f=s.is3d,v=s.width,c=s.height,d=s.left,p=s.top,h=i.fixedDirection,g=i.nextTargetMatrix||s.targetMatrix,m=f?4:3,x=mc(a,r,e,v,c,u),y=o?d:0,S=o?p:0,_=Le(l,g,x,m),b=yc(n,_,r,e,m,h);return Q(b,[y,S])}function Mc(t,r){return Pt(er(t.state),r)}function Tc(t,r){var e=t.targetGesto,n=t.controlGesto,a;return e!=null&&e.isFlag()&&(a=e.getEventData()[r]),!a&&(n!=null&&n.isFlag())&&(a=n.getEventData()[r]),a||{}}function Oc(t){if(t&&t.getRootNode){var r=t.getRootNode();if(r.nodeType===11)return r}}function Rc(t){var r=t("scale"),e=t("rotate"),n=t("translate"),a=[];return n&&n!=="0px"&&n!=="none"&&a.push("translate(".concat(n.split(/\s+/).join(","),")")),e&&e!=="1"&&e!=="none"&&a.push("rotate(".concat(e,")")),r&&r!=="1"&&r!=="none"&&a.push("scale(".concat(r.split(/\s+/).join(","),")")),a}function _s(t,r,e){for(var n=t,a=[],i=Pa(t)||Ir(t),o=!e&&t===r||t===i,s=o,u=!1,l=3,f,v,c,d=!1,p=Me(r,r,!0).offsetParent,h=1;n&&!s;){s=o;var g=jt(n),m=g("position"),x=qs(n),y=m==="fixed",S=Rc(g),_=Sf(Mv(x)),b=void 0,E=!1,D=!1,C=0,M=0,P=0,R=0,O={hasTransform:!1,fixedContainer:null};y&&(d=!0,O=Iv(n),p=O.fixedContainer);var I=_.length;!u&&(I===16||S.length)&&(u=!0,l=4,xa(a),c&&(c=sr(c,3,4))),u&&I===9&&(_=sr(_,3,4));var A=Pv(n,t),k=A.tagName,F=A.hasOffset,G=A.isSVG,L=A.origin,W=A.targetOrigin,z=A.offset,V=T(z,2),q=V[0],H=V[1];k==="svg"&&!n.ownerSVGElement&&c&&(a.push({type:"target",target:n,matrix:Av(n,l)}),a.push({type:"offset",target:n,matrix:St(l)}));var j=parseFloat(g("zoom"))||1;if(y)b=O.fixedContainer,E=!0;else{var Y=Me(n,r,!1,!0,g),K=Y.offsetZoom;if(b=Y.offsetParent,E=Y.isEnd,D=Y.isStatic,h*=K,(Y.isCustomElement||K!==1)&&D)q-=b.offsetLeft,H-=b.offsetTop;else if(uc||sc){var J=Y.parentSlotElement;if(J){for(var it=b,lt=0,X=0;it&&Oc(it);)lt+=it.offsetLeft,X+=it.offsetTop,it=it.offsetParent;q-=lt,H-=X}}}if(fs&&!lc&&F&&!G&&D&&(m==="relative"||m==="static")&&(q-=b.offsetLeft,H-=b.offsetTop,o=o||E),y)F&&O.hasTransform&&(P=b.clientLeft,R=b.clientTop);else if(F&&p!==b&&(C=b.clientLeft,M=b.clientTop),F&&b===i){var Z=js(n,!1);q+=Z[0],H+=Z[1]}if(a.push({type:"target",target:n,matrix:Se(_,l,L)}),S.length&&(a.push({type:"offset",target:n,matrix:St(l)}),a.push({type:"target",target:n,matrix:Se(Ce(S),l,L)})),F){var vt=n===t,et=vt?0:n.scrollLeft,nt=vt?0:n.scrollTop;a.push({type:"offset",target:n,matrix:Lr([q-et+C-P,H-nt+M-R],l)})}else a.push({type:"offset",target:n,origin:L});if(j!==1&&a.push({type:"zoom",target:n,matrix:Se(Fa([j,j],l),l,[0,0])}),c||(c=_),f||(f=L),v||(v=W),s||y)break;n=b,o=E,(!e||n===i)&&(s=o)}return c||(c=St(l)),f||(f=[0,0]),v||(v=[0,0]),{zoom:h,offsetContainer:p,matrixes:a,targetMatrix:c,transformOrigin:f,targetOrigin:v,is3d:u,hasFixed:d}}var Ar=null,zr=null,$r=null;function ie(t){t?(window.Map&&(Ar=new Map,zr=new Map),$r=[]):(Ar=null,$r=null,zr=null)}function Pc(t){var r=zr==null?void 0:zr.get(t);if(r)return r;var e=be(t,!0);return zr&&zr.set(t,e),e}function Ic(t,r){if($r){var e=qt($r,function(a){return a[0][0]==t&&a[0][1]==r});if(e)return e[1]}var n=_s(t,r,!0);return $r&&$r.push([[t,r],n]),n}function jt(t){var r=Ar==null?void 0:Ar.get(t);if(!r){var e=Mr(t).getComputedStyle(t);if(!Ar)return function(i){return e[i]};r={style:e,cached:{}},Ar.set(t,r)}var n=r.cached,a=r.style;return function(i){return i in n||(n[i]=a[i]),n[i]}}function ir(t,r,e){var n=e.originalDatas;n.groupable=n.groupable||{};var a=n.groupable;a.childDatas=a.childDatas||[];var i=a.childDatas;return t.moveables.map(function(o,s){return i[s]=i[s]||{},i[s][r]=i[s][r]||{},w(w({},e),{isRequestChild:!0,datas:i[s][r],originalDatas:i[s]})})}function Hn(t,r,e,n,a,i,o){var s=!!e.match(/Start$/g),u=!!e.match(/End$/g),l=a.isPinch,f=a.datas,v=ir(t,r.name,a),c=t.moveables,d=[],p=v.map(function(h,g){var m=c[g],x=m.state,y=x.gestos,S=h;if(s)S=new ae(o).dragStart(n,h),d.push(S);else{if(y[o]||(y[o]=f.childGestos[g]),!y[o])return;S=Ne(h,x,n,l,i,o),d.push(S)}var _=r[e](m,w(w({},S),{parentFlag:!0}));return u&&(y[o]=null),_});return s&&(f.childGestos=c.map(function(h){return h.state.gestos[o]})),{eventParams:p,childEvents:d}}function hr(t,r,e,n,a,i){a===void 0&&(a=function(f,v){return v});var o=!!e.match(/End$/g),s=ir(t,r.name,n),u=t.moveables,l=s.map(function(f,v){var c=u[v],d=f;d=a(c,f);var p=r[e](c,w(w({},d),{parentFlag:!0}));return p&&i&&i(c,f,p,v),o&&(c.state.gestos={}),p});return l}function fn(t,r,e,n){var a=e.fixedDirection,i=e.fixedPosition,o=n.datas.startPositions||er(r.state),s=Pt(o,a),u=T(kt(Ge(-t.rotation/180*Math.PI,3),[s[0]-i[0],s[1]-i[1],1],3),2),l=u[0],f=u[1];return n.datas.originalX=l,n.datas.originalY=f,n}function Es(t,r,e,n){var a=t.getState(),i=a.renderPoses,o=a.rotation,s=a.direction,u=Hr(t.props,r).zoom,l=ye(o/Math.PI*180),f={},v=t.renderState;v.renderDirectionMap||(v.renderDirectionMap={});var c=v.renderDirectionMap;e.forEach(function(p){var h=p.dir;f[h]=!0});var d=Wt(s);return e.map(function(p){var h=p.data,g=p.classNames,m=p.dir,x=Ya[m];if(!x||!f[m])return null;c[m]=!0;var y=(rt(l,15)+d*ps[m]+720)%180,S={};return xr(h).forEach(function(_){S["data-".concat(_)]=h[_]}),n.createElement("div",w({className:$.apply(void 0,N(["control","direction",m,r],T(g),!1)),"data-rotation":y,"data-direction":m},S,{key:"direction-".concat(m),style:pn.apply(void 0,N([o,u],T(x.map(function(_){return i[_]})),!1))}))})}function Ds(t,r,e,n){var a=Hr(t.props,e),i=a.renderDirections,o=i===void 0?r:i,s=a.displayAroundControls;if(!o)return[];var u=o===!0?Wa:o;return N(N([],T(s?Ts(t,n,e,u):[]),!1),T(Es(t,e,u.map(function(l){return{data:{},classNames:[],dir:l}}),n)),!1)}function we(t,r,e,n,a,i){for(var o=[],s=6;s<arguments.length;s++)o[s-6]=arguments[s];var u=_t(e,n),l=r?rt(u/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line-".concat(i),className:$.apply(void 0,N(["line","direction",r?"edge":"",r],T(o),!1)),"data-rotation":l,"data-line-key":i,"data-direction":r,style:ge(e,n,a,u)})}function Cs(t,r,e,n,a){var i=e===!0?rc:e;return i.map(function(o,s){var u=T(Ya[o],2),l=u[0],f=u[1];if(f!=null)return we(t,o,n[l],n[f],a,"".concat(r,"Edge").concat(s),r)}).filter(Boolean)}function ws(t){return function(r,e){var n=Hr(r.props,t).edge;return n&&(n===!0||n.length)?N(N([],T(Cs(e,t,n,r.getState().renderPoses,r.props.zoom)),!1),T(Ac(r,t,e)),!1):Ms(r,t,e)}}function Ms(t,r,e){return Ds(t,Wa,r,e)}function Ac(t,r,e){return Ds(t,["nw","ne","sw","se"],r,e)}function Ts(t,r,e,n){var a=t.renderState;a.renderDirectionMap||(a.renderDirectionMap={});var i=t.getState(),o=i.renderPoses,s=i.rotation,u=i.direction,l=a.renderDirectionMap,f=t.props.zoom,v=Wt(u),c=s/Math.PI*180;return(n||xr(l)).map(function(d){var p=Ya[d];if(!p)return null;var h=(rt(c,15)+v*ps[d]+720)%180,g=["around-control"];return e&&g.push("direction",e),r.createElement("div",{className:$.apply(void 0,N([],T(g),!1)),"data-rotation":h,"data-direction":d,key:"direction-around-".concat(d),style:pn.apply(void 0,N([s,f],T(p.map(function(m){return o[m]})),!1))})})}function qa(t,r,e){var n=t||{},a=n.position,i=a===void 0?"client":a,o=n.left,s=o===void 0?-1/0:o,u=n.top,l=u===void 0?-1/0:u,f=n.right,v=f===void 0?1/0:f,c=n.bottom,d=c===void 0?1/0:c,p={position:i,left:s,top:l,right:v,bottom:d};return{vertical:Fi(p,r,!0),horizontal:Fi(p,e,!1)}}function wn(t,r){var e=t.state,n=e.containerClientRect,a=n.clientHeight,i=n.clientWidth,o=n.clientLeft,s=n.clientTop,u=e.snapOffset,l=u.left,f=u.top,v=u.right,c=u.bottom,d=r||t.props.bounds||{},p=d.position||"client",h=p==="css",g=d.left,m=g===void 0?-1/0:g,x=d.top,y=x===void 0?-1/0:x,S=d.right,_=S===void 0?h?-1/0:1/0:S,b=d.bottom,E=b===void 0?h?-1/0:1/0:b;return h&&(_=i+v-l-_,E=a+c-f-E),{left:m+l-o,right:_+l-o,top:y+f-s,bottom:E+f-s}}function zc(t,r,e){var n=wn(t),a=n.left,i=n.top,o=n.right,s=n.bottom,u=T(e,2),l=u[0],f=u[1],v=T(Q(e,r),2),c=v[0],d=v[1];B(c)<Yt&&(c=0),B(d)<Yt&&(d=0);var p=d>0,h=c>0,g={isBound:!1,offset:0,pos:0},m={isBound:!1,offset:0,pos:0};if(c===0&&d===0)return{vertical:g,horizontal:m};if(c===0)p?s<f&&(m.pos=s,m.offset=f-s):i>f&&(m.pos=i,m.offset=f-i);else if(d===0)h?o<l&&(g.pos=o,g.offset=l-o):a>l&&(g.pos=a,g.offset=l-a);else{var x=d/c,y=e[1]-x*l,S=0,_=0,b=!1;h&&o<=l?(S=x*o+y,_=o,b=!0):!h&&l<=a&&(S=x*a+y,_=a,b=!0),b&&(S<i||S>s)&&(b=!1),b||(p&&s<=f?(S=s,_=(S-y)/x,b=!0):!p&&f<=i&&(S=i,_=(S-y)/x,b=!0)),b&&(g.isBound=!0,g.pos=_,g.offset=l-_,m.isBound=!0,m.pos=S,m.offset=f-S)}return{vertical:g,horizontal:m}}function Fi(t,r,e){var n=t[e?"left":"top"],a=t[e?"right":"bottom"],i=Math.min.apply(Math,N([],T(r),!1)),o=Math.max.apply(Math,N([],T(r),!1)),s=[];return n+1>i&&s.push({direction:"start",isBound:!0,offset:i-n,pos:n}),a-1<o&&s.push({direction:"end",isBound:!0,offset:o-a,pos:a}),s.length||s.push({isBound:!1,offset:0,pos:0}),s.sort(function(u,l){return B(l.offset)-B(u.offset)})}function Ni(t,r,e){var n=e?t.map(function(a){return Be(a,e)}):t;return n.some(function(a){return a[0]<r.left&&B(a[0]-r.left)>.1||a[0]>r.right&&B(a[0]-r.right)>.1||a[1]<r.top&&B(a[1]-r.top)>.1||a[1]>r.bottom&&B(a[1]-r.bottom)>.1})}function Bc(t,r,e){var n=rr(t),a=Math.sqrt(n*n-r*r)||0;return[a,-a].sort(function(i,o){return B(i-t[e?0:1])-B(o-t[e?0:1])}).map(function(i){return _t([0,0],e?[i,r]:[r,i])})}function Gc(t,r,e,n,a){if(!t.props.bounds)return[];var i=a*Math.PI/180,o=wn(t),s=o.left,u=o.top,l=o.right,f=o.bottom,v=s-n[0],c=l-n[0],d=u-n[1],p=f-n[1],h={left:v,top:d,right:c,bottom:p};if(!Ni(e,h,0))return[];var g=[];return[[v,0],[c,0],[d,1],[p,1]].forEach(function(m){var x=T(m,2),y=x[0],S=x[1];e.forEach(function(_){var b=_t([0,0],_);g.push.apply(g,N([],T(Bc(_,y,S).map(function(E){return i+E-b}).filter(function(E){return!Ni(r,h,E)}).map(function(E){return rt(E*180/Math.PI,Yt)})),!1))})}),g}var kc=["left","right","center"],Fc=["top","bottom","middle"],Li={left:"start",right:"end",center:"center",top:"start",bottom:"end",middle:"center"},Rr={start:"left",end:"right",center:"center"},Pr={start:"top",end:"bottom",center:"middle"};function Jr(){return{left:!1,top:!1,right:!1,bottom:!1}}function de(t,r){var e=t.props,n=e.snappable,a=e.bounds,i=e.innerBounds,o=e.verticalGuidelines,s=e.horizontalGuidelines,u=e.snapGridWidth,l=e.snapGridHeight,f=t.state,v=f.guidelines,c=f.enableSnap;return!n||!c||r&&n!==!0&&n.indexOf(r)<0?!1:!!(u||l||a||i||v&&v.length||o&&o.length||s&&s.length)}function ja(t){return t===!1?{}:t===!0||!t?{left:!0,right:!0,top:!0,bottom:!0}:t}function Nc(t,r){var e=ja(t),n={};for(var a in e)a in r&&e[a]&&(n[a]=r[a]);return n}function Ua(t,r){var e=Nc(t,r),n=Fc.filter(function(i){return i in e}),a=kc.filter(function(i){return i in e});return{horizontalNames:n,verticalNames:a,horizontal:n.map(function(i){return e[i]}),vertical:a.map(function(i){return e[i]})}}function Lc(t,r,e){var n=bt(t,[r.clientLeft,r.clientTop],e);return[r.left+n[0],r.top+n[1]]}function Wc(t){var r=T(t,2),e=r[0],n=r[1],a=n[0]-e[0],i=n[1]-e[1];Math.abs(a)<Ct&&(a=0),Math.abs(i)<Ct&&(i=0);var o=0,s=0,u=0;return a?i?(o=-i/a,s=1,u=o*e[0]-e[1]):(s=1,u=-e[1]):(o=-1,u=e[0]),[o,s,u].map(function(l){return rt(l,Ct)})}var Os="snapRotationThreshold",Rs="snapRotationDegrees",Ps="snapHorizontalThreshold",Is="snapVerticalThreshold";function Mn(t,r,e,n,a,i,o){var s;n===void 0&&(n=[]),a===void 0&&(a=[]);var u=t.props,l=((s=t.state.snapThresholdInfo)===null||s===void 0?void 0:s.multiples)||[1,1],f=ro(o,u[Ps],5),v=ro(i,u[Is],5);return As(t.state.guidelines,r,e,n,a,f,v,l)}function As(t,r,e,n,a,i,o,s){return{vertical:Hi(t,"vertical",r,o*s[0],n),horizontal:Hi(t,"horizontal",e,i*s[1],a)}}function Hc(t,r,e){var n=T(e,2),a=n[0],i=n[1],o=T(r,2),s=o[0],u=o[1],l=T(Q(e,r),2),f=l[0],v=l[1],c=v>0,d=f>0;f=hn(f),v=hn(v);var p={isSnap:!1,offset:0,pos:0},h={isSnap:!1,offset:0,pos:0};if(f===0&&v===0)return{vertical:p,horizontal:h};var g=Mn(t,f?[a]:[],v?[i]:[],[],[],void 0,void 0),m=g.vertical,x=g.horizontal;m.posInfos.filter(function(k){var F=k.pos;return d?F>=s:F<=s}),x.posInfos.filter(function(k){var F=k.pos;return c?F>=u:F<=u}),m.isSnap=m.posInfos.length>0,x.isSnap=x.posInfos.length>0;var y=da(m),S=y.isSnap,_=y.guideline,b=da(x),E=b.isSnap,D=b.guideline,C=E?D.pos[1]:0,M=S?_.pos[0]:0;if(f===0)E&&(h.isSnap=!0,h.pos=D.pos[1],h.offset=i-h.pos);else if(v===0)S&&(p.isSnap=!0,p.pos=M,p.offset=a-M);else{var P=v/f,R=e[1]-P*a,O=0,I=0,A=!1;S?(I=M,O=P*I+R,A=!0):E&&(O=C,I=(O-R)/P,A=!0),A&&(p.isSnap=!0,p.pos=I,p.offset=a-I,h.isSnap=!0,h.pos=O,h.offset=i-O)}return{vertical:p,horizontal:h}}function Cr(t){var r="";return t===-1||t==="top"||t==="left"?r="start":t===0||t==="center"||t==="middle"?r="center":(t===1||t==="right"||t==="bottom")&&(r="end"),r}function Wi(t,r,e,n){var a=Ua(t.props.snapDirections,r),i=Mn(t,a.vertical,a.horizontal,a.verticalNames.map(function(u){return Cr(u)}),a.horizontalNames.map(function(u){return Cr(u)}),e,n),o=Cr(a.horizontalNames[i.horizontal.index]),s=Cr(a.verticalNames[i.vertical.index]);return{vertical:w(w({},i.vertical),{direction:s}),horizontal:w(w({},i.horizontal),{direction:o})}}function da(t){var r=t.isSnap;if(!r)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var e=t.posInfos[0],n=e.guidelineInfos[0],a=n.offset,i=n.dist,o=n.guideline;return{isSnap:r,offset:a,dist:i,pos:e.pos,guideline:o}}function Hi(t,r,e,n,a){var i,o;if(a===void 0&&(a=[]),!t||!t.length)return{isSnap:!1,index:-1,direction:"",posInfos:[]};var s=r==="vertical",u=s?0:1,l=e.map(function(v,c){var d=a[c]||"",p=t.map(function(h){var g=h.pos,m=v-g[u];return{offset:m,dist:B(m),guideline:h,direction:d}}).filter(function(h){var g=h.guideline,m=h.dist,x=g.type;return!(x!==r||m>n)}).sort(function(h,g){return h.dist-g.dist});return{pos:v,index:c,guidelineInfos:p,direction:d}}).filter(function(v){return v.guidelineInfos.length>0}).sort(function(v,c){return v.guidelineInfos[0].dist-c.guidelineInfos[0].dist}),f=l.length>0;return{isSnap:f,index:f?l[0].index:-1,direction:(o=(i=l[0])===null||i===void 0?void 0:i.direction)!==null&&o!==void 0?o:"",posInfos:l}}function Yc(t,r,e,n,a){var i=[];e[0]&&e[1]?i=[e,[-e[0],e[1]],[e[0],-e[1]]]:!e[0]&&!e[1]?[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(c,d,p){var h=p[d+1]||p[0];i.push(c),i.push([(c[0]+h[0])/2,(c[1]+h[1])/2])}):t.props.keepRatio?i.push([-1,-1],[-1,1],[1,-1],[1,1],e):(i.push.apply(i,N([],T(xc([[-1,-1],[1,-1],[-1,-1],[1,1]],e)),!1)),i.length>1&&i.push([(i[0][0]+i[1][0])/2,(i[0][1]+i[1][1])/2]));var o=i.map(function(c){return Pt(r,c)}),s=o.map(function(c){return c[0]}),u=o.map(function(c){return c[1]}),l=Mn(t,s,u,i.map(function(c){return Cr(c[0])}),i.map(function(c){return Cr(c[1])}),n,a),f=Cr(i.map(function(c){return c[0]})[l.vertical.index]),v=Cr(i.map(function(c){return c[1]})[l.horizontal.index]);return{vertical:w(w({},l.vertical),{direction:f}),horizontal:w(w({},l.horizontal),{direction:v})}}function zs(t,r){var e=B(t.offset),n=B(r.offset);return t.isBound&&r.isBound?n-e:t.isBound?-1:r.isBound?1:t.isSnap&&r.isSnap?n-e:t.isSnap?-1:r.isSnap||e<Yt?1:n<Yt?-1:e-n}function cn(t,r){return t.slice().sort(function(e,n){var a=e.sign[r],i=n.sign[r],o=e.offset[r],s=n.offset[r];if(a){if(!i)return-1}else return 1;return zs({isBound:e.isBound,isSnap:e.isSnap,offset:o},{isBound:n.isBound,isSnap:n.isSnap,offset:s})})[0]}function Xc(t,r,e){var n=[];if(e)B(r[0])!==1||B(r[1])!==1?n.push([r,[-1,-1]],[r,[-1,1]],[r,[1,-1]],[r,[1,1]]):n.push([r,[t[0],-t[1]]],[r,[-t[0],t[1]]]),n.push([r,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var a=t[0]?t:[1,1];[1,-1].forEach(function(o){[1,-1].forEach(function(s){var u=[o*a[0],s*a[1]];r[0]===u[0]&&r[1]===u[1]||n.push([r,u])})})}else if(t[0]){var i=B(r[0])===1?[1]:[1,-1];i.forEach(function(o){n.push([[r[0],-1],[o*t[0],-1]],[[r[0],0],[o*t[0],0]],[[r[0],1],[o*t[0],1]])})}else if(t[1]){var i=B(r[1])===1?[1]:[1,-1];i.forEach(function(s){n.push([[-1,r[1]],[-1,s*t[1]]],[[0,r[1]],[0,s*t[1]]],[[1,r[1]],[1,s*t[1]]])})}return n}function Bs(t,r){var e=Jn([r[0][0],r[1][0]]),n=Jn([r[0][1],r[1][1]]);return{vertical:e<=t[0],horizontal:n<=t[1]}}function Ka(t,r){var e=T(r,2),n=e[0],a=e[1],i=a[0]-n[0],o=a[1]-n[1];B(i)<Yt&&(i=0),B(o)<Yt&&(o=0);var s,u;if(!i)s=n[0],u=t[0];else if(!o)s=n[1],u=t[1];else{var l=o/i;s=l*(t[0]-n[0])+n[1],u=t[1]}return s-u}function Gs(t,r,e,n){return n===void 0&&(n=Yt),t.every(function(a){var i=Ka(a,r),o=i<=0;return o===e||B(i)<=n})}function Yi(t,r,e,n,a){return a===void 0&&(a=0),n&&r-a<=t||!n&&t<=e+a?{isBound:!0,offset:n?r-t:e-t}:{isBound:!1,offset:0}}function Vc(t,r){var e=r.line,n=r.centerSign,a=r.verticalSign,i=r.horizontalSign,o=r.lineConstants,s=t.props.innerBounds;if(!s)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var u=s.left,l=s.top,f=s.width,v=s.height,c=[[u,l],[u,l+v]],d=[[u,l],[u+f,l]],p=[[u+f,l],[u+f,l+v]],h=[[u,l+v],[u+f,l+v]];if(Gs([[u,l],[u+f,l],[u,l+v],[u+f,l+v]],e,n))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var g=wr(e,o,d,a),m=wr(e,o,h,a),x=wr(e,o,c,i),y=wr(e,o,p,i),S=g.isBound&&m.isBound,_=g.isBound||m.isBound,b=x.isBound&&y.isBound,E=x.isBound||y.isBound,D=oe(g.offset,m.offset),C=oe(x.offset,y.offset),M=[0,0],P=!1,R=!1;return B(C)<B(D)?(M=[D,0],P=_,R=S):(M=[0,C],P=E,R=b),{isAllBound:R,isVerticalBound:_,isHorizontalBound:E,isBound:P,offset:M}}function wr(t,r,e,n,a,i){var o=T(r,2),s=o[0],u=o[1],l=t[0],f=e[0],v=e[1],c=hn(v[1]-f[1]),d=hn(v[0]-f[0]),p=u,h=s,g=-s/u;if(d){if(!c){if(i&&!p)return{isBound:!1,offset:0};if(h){var S=(f[1]-l[1])/g+l[0];return Yi(S,f[0],v[0],n,a)}else{var x=f[1]-l[1],y=B(x)<=(a||0);return{isBound:y,offset:y?x:0}}}}else{if(i&&!h)return{isBound:!1,offset:0};if(p){var m=g*(f[0]-l[0])+l[1];return Yi(m,f[1],v[1],n,a)}else{var x=f[0]-l[0],y=B(x)<=(a||0);return{isBound:y,offset:y?x:0}}}return{isBound:!1,offset:0}}function ks(t,r,e){return r.map(function(n){var a=Vc(t,n),i=a.isBound,o=a.offset,s=a.isVerticalBound,u=a.isHorizontalBound,l=n.multiple,f=vr({datas:e,distX:o[0],distY:o[1]}).map(function(v,c){return v*(l[c]?2/l[c]:0)});return{sign:l,isBound:i,isVerticalBound:s,isHorizontalBound:u,isSnap:!1,offset:f}})}function qc(t,r,e){var n,a=Za(t,r,[0,0],!1).map(function(c){return w(w({},c),{multiple:c.multiple.map(function(d){return B(d)*2})})}),i=ks(t,a,e),o=cn(i,0),s=cn(i,1),u=0,l=0,f=o.isVerticalBound||s.isVerticalBound,v=o.isHorizontalBound||s.isHorizontalBound;return(f||v)&&(n=T(gc({datas:e,distX:-o.offset[0],distY:-s.offset[1]}),2),u=n[0],l=n[1]),{vertical:{isBound:f,offset:u},horizontal:{isBound:v,offset:l}}}function jc(t,r){var e=[],n=t[0],a=t[1];return n&&a?e.push([[0,a*2],t,[-n,a]],[[n*2,0],t,[n,-a]]):n?(e.push([[n*2,0],[n,1],[n,-1]]),r&&e.push([[0,-1],[n,-1],[-n,-1]],[[0,1],[n,1],[-n,1]])):a?(e.push([[0,a*2],[1,a],[-1,a]]),r&&e.push([[-1,0],[-1,a],[-1,-a]],[[1,0],[1,a],[1,-a]])):e.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),e}function Za(t,r,e,n){var a=t.state,i=a.allMatrix,o=a.is3d,s=qr(i,100,100,o?4:3),u=Pt(s,[0,0]);return jc(e,n).map(function(l){var f=T(l,3),v=f[0],c=f[1],d=f[2],p=[Pt(s,c),Pt(s,d)],h=Wc(p),g=Bs(u,p),m=g.vertical,x=g.horizontal,y=Ka(u,p)<=0;return{multiple:v,centerSign:y,verticalSign:m,horizontalSign:x,lineConstants:h,line:[Pt(r,c),Pt(r,d)]}})}function Xi(t,r,e,n){var a=n?t.map(function(i){return Be(i,n)}):t;return[[a[0],a[1]],[a[1],a[3]],[a[3],a[2]],[a[2],a[0]]].some(function(i){var o=Ka(e,i)<=0;return!Gs(r,i,o)})}function Uc(t){var r=T(t,2),e=r[0],n=r[1],a=n[0]-e[0],i=n[1]-e[1];if(!a)return B(e[0]);if(!i)return B(e[1]);var o=i/a;return B((-o*e[0]+e[1])/Math.sqrt(Math.pow(o,2)+1))}function Kc(t){var r=T(t,2),e=r[0],n=r[1],a=n[0]-e[0],i=n[1]-e[1];if(!a)return[e[0],0];if(!i)return[0,e[1]];var o=i/a,s=-o*e[0]+e[1];return[-s/(o+1/o),s/(o*o+1)]}function Zc(t,r,e,n,a){var i=t.props.innerBounds,o=a*Math.PI/180;if(!i)return[];var s=i.left,u=i.top,l=i.width,f=i.height,v=s-n[0],c=s+l-n[0],d=u-n[1],p=u+f-n[1],h=[[v,d],[c,d],[v,p],[c,p]],g=Pt(e,[0,0]);if(!Xi(e,h,g,0))return[];var m=[],x=h.map(function(y){return[rr(y),_t([0,0],y)]});return[[e[0],e[1]],[e[1],e[3]],[e[3],e[2]],[e[2],e[0]]].forEach(function(y){var S=_t([0,0],Kc(y)),_=Uc(y);m.push.apply(m,N([],T(x.filter(function(b){var E=T(b,1),D=E[0];return D&&_<=D}).map(function(b){var E=T(b,2),D=E[0],C=E[1],M=Math.acos(D?_/D:0),P=C+M,R=C-M;return[o+P-S,o+R-S]}).reduce(function(b,E){return b.push.apply(b,N([],T(E),!1)),b},[]).filter(function(b){return!Xi(r,h,g,b)}).map(function(b){return rt(b*180/Math.PI,Yt)})),!1))}),m}function $c(t){var r=t.props.innerBounds,e=Jr();if(!r)return{boundMap:e,vertical:[],horizontal:[]};var n=t.getRect(),a=n.pos1,i=n.pos2,o=n.pos3,s=n.pos4,u=[a,i,o,s],l=Pt(u,[0,0]),f=r.left,v=r.top,c=r.width,d=r.height,p=[[f,v],[f,v+d]],h=[[f,v],[f+c,v]],g=[[f+c,v],[f+c,v+d]],m=[[f,v+d],[f+c,v+d]],x=Za(t,u,[0,0],!1),y=[],S=[];return x.forEach(function(_){var b=_.line,E=_.lineConstants,D=Bs(l,b),C=D.horizontal,M=D.vertical,P=wr(b,E,h,M,1,!0),R=wr(b,E,m,M,1,!0),O=wr(b,E,p,C,1,!0),I=wr(b,E,g,C,1,!0);P.isBound&&!e.top&&(y.push(v),e.top=!0),R.isBound&&!e.bottom&&(y.push(v+d),e.bottom=!0),O.isBound&&!e.left&&(S.push(f),e.left=!0),I.isBound&&!e.right&&(S.push(f+c),e.right=!0)}),{boundMap:e,horizontal:y,vertical:S}}function Jc(t,r,e,n){var a=r[0]-t[0],i=r[1]-t[1];if(B(a)<Ct&&(a=0),B(i)<Ct&&(i=0),!a)return n?[0,0]:[0,e];if(!i)return n?[e,0]:[0,0];var o=i/a,s=t[1]-o*t[0];if(n){var u=o*(r[0]+e)+s;return[e,u-r[1]]}else{var l=(r[1]+e-s)/o;return[l-r[0],e]}}function pa(t,r,e,n,a){var i=Jc(t,r,e,n);if(!i)return{isOutside:!1,offset:[0,0]};var o=pr(t,r),s=pr(i,t),u=pr(i,r),l=s>o||u>o,f=T(vr({datas:a,distX:i[0],distY:i[1]}),2),v=f[0],c=f[1];return{offset:[v,c],isOutside:l}}function vn(t,r){return t.isBound?t.offset:r.isSnap?da(r).offset:0}function Qc(t,r,e,n,a){var i=T(r,2),o=i[0],s=i[1],u=T(e,2),l=u[0],f=u[1],v=T(n,2),c=v[0],d=v[1],p=T(a,2),h=p[0],g=p[1],m=-h,x=-g;if(t&&o&&s){m=0,x=0;var y=[];if(l&&f?y.push([0,g],[h,0]):l?y.push([h,0]):f?y.push([0,g]):c&&d?y.push([0,g],[h,0]):c?y.push([h,0]):d&&y.push([0,g]),y.length){y.sort(function(E,D){return rr(Q([o,s],E))-rr(Q([o,s],D))});var S=y[0];if(S[0]&&B(o)>Ct)m=-S[0],x=s*B(o+m)/B(o)-s;else if(S[1]&&B(s)>Ct){var _=s;x=-S[1],m=o*B(s+x)/B(_)-o}if(t&&f&&l)if(B(m)>Ct&&B(m)<B(h)){var b=B(h)/B(m);m*=b,x*=b}else if(B(x)>Ct&&B(x)<B(g)){var b=B(g)/B(x);m*=b,x*=b}else m=oe(-h,m),x=oe(-g,x)}}else m=o||l?-h:0,x=s||f?-g:0;return[m,x]}function tv(t,r,e,n,a,i){if(!de(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var o=Qa(i.absolutePoses,[r,e]),s=tr(o),u=s.left,l=s.right,f=s.top,v=s.bottom,c={horizontal:o.map(function(I){return I[1]}),vertical:o.map(function(I){return I[0]})},d=ja(t.props.snapDirections),p=Ua(d,{left:u,right:l,top:f,bottom:v,center:(u+l)/2,middle:(f+v)/2}),h=Tn(t,a,p,c),g=h.vertical,m=h.horizontal,x=qc(t,o,i),y=x.vertical,S=x.horizontal,_=g.isSnap,b=m.isSnap,E=g.isBound||y.isBound,D=m.isBound||S.isBound,C=oe(g.offset,y.offset),M=oe(m.offset,S.offset),P=T(Qc(n,[r,e],[E,D],[_,b],[C,M]),2),R=P[0],O=P[1];return[{isBound:E,isSnap:_,offset:R},{isBound:D,isSnap:b,offset:O}]}function Tn(t,r,e,n){n===void 0&&(n=e);var a=qa(wn(t),n.vertical,n.horizontal),i=a.horizontal,o=a.vertical,s=r?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:Mn(t,e.vertical,e.horizontal,void 0,void 0,void 0,void 0),u=s.horizontal,l=s.vertical,f=vn(i[0],u),v=vn(o[0],l),c=B(f),d=B(v);return{horizontal:{isBound:i[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:f,dist:c,bounds:i,snap:u},vertical:{isBound:o[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:v,dist:d,bounds:o,snap:l}}}function Vi(t,r,e,n,a,i,o){o===void 0&&(o=[1,1]);var s=qa(r,e,n),u=s.horizontal,l=s.vertical,f=As(t,e,n,[],[],a,i,o),v=f.horizontal,c=f.vertical,d=vn(u[0],v),p=vn(l[0],c),h=B(d),g=B(p);return{horizontal:{isBound:u[0].isBound,isSnap:v.isSnap,snapIndex:v.index,offset:d,dist:h,bounds:u,snap:v},vertical:{isBound:l[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:p,dist:g,bounds:l,snap:c}}}function rv(t,r,e,n){var a=_t(t,r)/Math.PI*180,i=e.vertical,o=i.isBound,s=i.isSnap,u=i.dist,l=e.horizontal,f=l.isBound,v=l.isSnap,c=l.dist,d=a%180,p=d<3||d>177,h=d>87&&d<93;return c<u&&(o||s&&!h&&(!n||!p))?"vertical":f||v&&!p&&(!n||!h)?"horizontal":""}function ev(t,r,e,n,a,i){return e.map(function(o){var s=T(o,2),u=s[0],l=s[1],f=Pt(r,u),v=Pt(r,l),c=n?nv(t,f,v,a):Tn(t,a,{vertical:[v[0]],horizontal:[v[1]]}),d=c.horizontal,p=d.offset,h=d.isBound,g=d.isSnap,m=c.vertical,x=m.offset,y=m.isBound,S=m.isSnap,_=Q(l,u);if(!x&&!p)return{isBound:y||h,isSnap:S||g,sign:_,offset:[0,0]};var b=rv(f,v,c,n);if(!b)return{sign:_,isBound:!1,isSnap:!1,offset:[0,0]};var E=b==="vertical",D=[0,0];return!n&&B(l[0])===1&&B(l[1])===1&&u[0]!==l[0]&&u[1]!==l[1]?D=vr({datas:i,distX:-x,distY:-p}):D=pa(f,v,-(E?x:p),E,i).offset,D=D.map(function(C,M){return C*(_[M]?2/_[M]:0)}),{sign:_,isBound:E?y:h,isSnap:E?S:g,offset:D}})}function qi(t,r){return t.isBound?t.offset:r.isSnap?r.offset:0}function nv(t,r,e,n){var a=zc(t,r,e),i=a.horizontal,o=a.vertical,s=n?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:Hc(t,r,e),u=s.horizontal,l=s.vertical,f=qi(i,u),v=qi(o,l),c=B(f),d=B(v);return{horizontal:{isBound:i.isBound,isSnap:u.isSnap,offset:f,dist:c},vertical:{isBound:o.isBound,isSnap:l.isSnap,offset:v,dist:d}}}function av(t,r,e,n,a){var i=[-e[0],-e[1]],o=t.state,s=o.width,u=o.height,l=t.props.bounds,f=1/0,v=1/0;if(l){var c=[[e[0],-e[1]],[-e[0],e[1]]],d=l.left,p=d===void 0?-1/0:d,h=l.top,g=h===void 0?-1/0:h,m=l.right,x=m===void 0?1/0:m,y=l.bottom,S=y===void 0?1/0:y;c.forEach(function(_){var b=_[0]!==i[0],E=_[1]!==i[1],D=Pt(r,_),C=_t(n,D)*360/Math.PI;if(E){var M=D.slice();(B(C-360)<2||B(C-180)<2)&&(M[1]=n[1]);var P=pa(n,M,(n[1]<D[1]?S:g)-D[1],!1,a),R=T(P.offset,2),O=R[1],I=P.isOutside;isNaN(O)||(v=u+(I?1:-1)*B(O))}if(b){var M=D.slice();(B(C-90)<2||B(C-270)<2)&&(M[0]=n[0]);var A=pa(n,M,(n[0]<D[0]?x:p)-D[0],!0,a),k=T(A.offset,1),F=k[0],G=A.isOutside;isNaN(F)||(f=s+(G?1:-1)*B(F))}})}return{maxWidth:f,maxHeight:v}}var Lt={name:"draggable",props:["draggable","throttleDrag","throttleDragRotate","hideThrottleDragRotateLine","startDragRotate","edgeDraggable"],events:["dragStart","drag","dragEnd","dragGroupStart","dragGroup","dragGroupEnd"],requestStyle:function(){return["left","top","right","bottom"]},requestChildStyle:function(){return["left","top","right","bottom"]},render:function(t,r){var e=t.props,n=e.hideThrottleDragRotateLine,a=e.throttleDragRotate,i=e.zoom,o=t.getState(),s=o.dragInfo,u=o.beforeOrigin;if(n||!a||!s)return[];var l=s.dist;if(!l[0]&&!l[1])return[];var f=rr(l),v=_t(l,[0,0]);return[r.createElement("div",{className:$("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(f,"px"),transform:"translate(".concat(u[0],"px, ").concat(u[1],"px) rotate(").concat(v,"rad) scaleY(").concat(i,")")}})]},dragStart:function(t,r){var e=r.datas,n=r.parentEvent,a=r.parentGesto,i=t.state,o=i.gestos,s=i.style;if(o.draggable)return!1;o.draggable=a||t.targetGesto,e.datas={},e.left=parseFloat(s.left||"")||0,e.top=parseFloat(s.top||"")||0,e.bottom=parseFloat(s.bottom||"")||0,e.right=parseFloat(s.right||"")||0,e.startValue=[0,0],Vr(t,r),Cn(t,r,"translate"),Ev(t,e),e.prevDist=[0,0],e.prevBeforeDist=[0,0],e.isDrag=!1,e.deltaOffset=[0,0];var u=at(t,r,w({set:function(f){e.startValue=f}},Dn(t,r))),l=n||U(t,"onDragStart",u);return l!==!1?(e.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(o.draggable=null,e.isPinch=!1),e.isDrag?u:!1},drag:function(t,r){if(r){_n(t,r,"translate");var e=r.datas,n=r.parentEvent,a=r.parentFlag,i=r.isPinch,o=r.deltaOffset,s=r.useSnap,u=r.isRequest,l=r.isGroup,f=r.parentThrottleDrag,v=r.distX,c=r.distY,d=e.isDrag,p=e.prevDist,h=e.prevBeforeDist,g=e.startValue;if(d){o&&(v+=o[0],c+=o[1]);var m=t.props,x=m.parentMoveable,y=l?0:m.throttleDrag||f||0,S=n?0:m.throttleDragRotate||0,_=0,b=!1,E=!1,D=!1,C=!1;if(!n&&S>0&&(v||c)){var M=m.startDragRotate||0,P=rt(M+_t([0,0],[v,c])*180/Math.PI,S)-M,R=c*Math.abs(Math.cos((P-90)/180*Math.PI)),O=v*Math.abs(Math.cos(P/180*Math.PI)),I=rr([O,R]);_=P*Math.PI/180,v=I*Math.cos(_),c=I*Math.sin(_)}if(!i&&!n&&!a){var A=T(tv(t,v,c,S,!s&&u||o,e),2),k=A[0],F=A[1];b=k.isSnap,E=k.isBound,D=F.isSnap,C=F.isBound;var G=k.offset,L=F.offset;v+=G,c+=L}var W=ft(xs({datas:e,distX:v,distY:c}),g),z=ft(hc({datas:e,distX:v,distY:c}),g);Ci(z,Yt),Ci(W,Yt),S||(!b&&!E&&(z[0]=rt(z[0],y),W[0]=rt(W[0],y)),!D&&!C&&(z[1]=rt(z[1],y),W[1]=rt(W[1],y)));var V=Q(W,g),q=Q(z,g),H=Q(q,p),j=Q(V,h);e.prevDist=q,e.prevBeforeDist=V,e.passDelta=H,e.passDist=q;var Y=e.left+V[0],K=e.top+V[1],J=e.right-V[0],it=e.bottom-V[1],lt=En(e,"translate(".concat(z[0],"px, ").concat(z[1],"px)"),"translate(".concat(q[0],"px, ").concat(q[1],"px)"));if(Xa(r,lt),t.state.dragInfo.dist=n?[0,0]:q,!(!n&&!x&&H.every(function(nt){return!nt})&&j.some(function(nt){return!nt}))){var X=t.state,Z=X.width,vt=X.height,et=at(t,r,w({transform:lt,dist:q,delta:H,translate:z,beforeDist:V,beforeDelta:j,beforeTranslate:W,left:Y,top:K,right:J,bottom:it,width:Z,height:vt,isPinch:i},Ht({transform:lt},r)));return!n&&U(t,"onDrag",et),et}}}},dragAfter:function(t,r){var e=r.datas,n=e.deltaOffset;return n[0]||n[1]?(e.deltaOffset=[0,0],this.drag(t,w(w({},r),{deltaOffset:n}))):!1},dragEnd:function(t,r){var e=r.parentEvent,n=r.datas;if(t.state.dragInfo=null,!!n.isDrag){n.isDrag=!1;var a=$t(t,r,{});return!e&&U(t,"onDragEnd",a),a}},dragGroupStart:function(t,r){var e,n,a=r.datas,i=r.clientX,o=r.clientY,s=this.dragStart(t,r);if(!s)return!1;var u=Hn(t,this,"dragStart",[i||0,o||0],r,!1,"draggable"),l=u.childEvents,f=u.eventParams,v=w(w({},s),{targets:t.props.targets,events:f}),c=U(t,"onDragGroupStart",v);a.isDrag=c!==!1;var d=(n=(e=l[0])===null||e===void 0?void 0:e.datas.startValue)!==null&&n!==void 0?n:[0,0];return a.throttleOffset=[d[0]%1,d[1]%1],a.isDrag?s:!1},dragGroup:function(t,r){var e=r.datas;if(e.isDrag){var n=this.drag(t,w(w({},r),{parentThrottleDrag:t.props.throttleDrag})),a=r.datas.passDelta,i=Hn(t,this,"drag",a,r,!1,"draggable").eventParams;if(n){var o=w({targets:t.props.targets,events:i},n);return U(t,"onDragGroup",o),o}}},dragGroupEnd:function(t,r){var e=r.isDrag,n=r.datas;if(n.isDrag){this.dragEnd(t,r);var a=Hn(t,this,"dragEnd",[0,0],r,!1,"draggable").eventParams;return U(t,"onDragGroupEnd",$t(t,r,{targets:t.props.targets,events:a})),e}},request:function(t){var r={},e=t.getRect(),n=0,a=0,i=!1;return{isControl:!1,requestStart:function(o){return i=o.useSnap,{datas:r,useSnap:i}},request:function(o){return"x"in o?n=o.x-e.left:"deltaX"in o&&(n+=o.deltaX),"y"in o?a=o.y-e.top:"deltaY"in o&&(a+=o.deltaY),{datas:r,distX:n,distY:a,useSnap:i}},requestEnd:function(){return{datas:r,isDrag:!0,useSnap:i}}}},unset:function(t){t.state.gestos.draggable=null,t.state.dragInfo=null}};function Fs(t,r){var e=Pt(t,r),n=[0,0];return{fixedPosition:e,fixedDirection:r,fixedOffset:n}}function iv(t,r){var e=t.allMatrix,n=t.is3d,a=t.width,i=t.height,o=n?4:3,s=[a/2*(1+r[0]),i/2*(1+r[1])],u=bt(e,s,o),l=[0,0];return{fixedPosition:u,fixedDirection:r,fixedOffset:l}}function Ns(t,r){var e=t.allMatrix,n=t.is3d,a=t.width,i=t.height,o=n?4:3,s=Ec(r,a,i),u=bt(e,r,o),l=[a?0:r[0],i?0:r[1]];return{fixedPosition:u,fixedDirection:s,fixedOffset:l}}var ji=ei("resizable"),ha={name:"resizable",ableGroup:"size",canPinch:!0,props:["resizable","throttleResize","renderDirections","displayAroundControls","keepRatio","resizeFormat","keepRatioFinally","edge","checkResizableError"],events:["resizeStart","beforeResize","resize","resizeEnd","resizeGroupStart","beforeResizeGroup","resizeGroup","resizeGroupEnd"],render:ws("resizable"),dragControlCondition:ji,viewClassName:ri("resizable"),dragControlStart:function(t,r){var e,n=r.inputEvent,a=r.isPinch,i=r.isGroup,o=r.parentDirection,s=r.parentGesto,u=r.datas,l=r.parentFixedDirection,f=r.parentEvent,v=Js(o,a,n,u),c=t.state,d=c.target,p=c.width,h=c.height,g=c.gestos;if(!v||!d||g.resizable)return!1;g.resizable=s||t.controlGesto,!a&&Vr(t,r),u.datas={},u.direction=v,u.startOffsetWidth=p,u.startOffsetHeight=h,u.prevWidth=0,u.prevHeight=0,u.minSize=[0,0],u.startWidth=c.inlineCSSWidth||c.cssWidth,u.startHeight=c.inlineCSSHeight||c.cssHeight,u.maxSize=[1/0,1/0],i||(u.minSize=[c.minOffsetWidth,c.minOffsetHeight],u.maxSize=[c.maxOffsetWidth,c.maxOffsetHeight]);var m=t.props.transformOrigin||"% %";u.transformOrigin=m&&Vt(m)?m.split(" "):m,u.startOffsetMatrix=c.offsetMatrix,u.startTransformOrigin=c.transformOrigin,u.isWidth=(e=r==null?void 0:r.parentIsWidth)!==null&&e!==void 0?e:!v[0]&&!v[1]||v[0]||!v[1];function x(C){u.ratio=C&&isFinite(C)?C:0}u.startPositions=er(t.state);function y(C){var M=Fs(u.startPositions,C);u.fixedDirection=M.fixedDirection,u.fixedPosition=M.fixedPosition,u.fixedOffset=M.fixedOffset}function S(C){var M=Ns(t.state,C);u.fixedDirection=M.fixedDirection,u.fixedPosition=M.fixedPosition,u.fixedOffset=M.fixedOffset}function _(C){u.minSize=[gt("".concat(C[0]),0)||0,gt("".concat(C[1]),0)||0]}function b(C){var M=[C[0]||1/0,C[1]||1/0];(!ee(M[0])||isFinite(M[0]))&&(M[0]=gt("".concat(M[0]),0)||1/0),(!ee(M[1])||isFinite(M[1]))&&(M[1]=gt("".concat(M[1]),0)||1/0),u.maxSize=M}x(p/h),y(l||[-v[0],-v[1]]),u.setFixedDirection=y,u.setFixedPosition=S,u.setMin=_,u.setMax=b;var E=at(t,r,{direction:v,startRatio:u.ratio,set:function(C){var M=T(C,2),P=M[0],R=M[1];u.startWidth=P,u.startHeight=R},setMin:_,setMax:b,setRatio:x,setFixedDirection:y,setFixedPosition:S,setOrigin:function(C){u.transformOrigin=C},dragStart:Lt.dragStart(t,new ae().dragStart([0,0],r))}),D=f||U(t,"onResizeStart",E);return u.startFixedDirection=u.fixedDirection,u.startFixedPosition=u.fixedPosition,D!==!1&&(u.isResize=!0,t.state.snapRenderInfo={request:r.isRequest,direction:v}),u.isResize?E:!1},dragControl:function(t,r){var e,n=r.datas,a=r.parentFlag,i=r.isPinch,o=r.parentKeepRatio,s=r.dragClient,u=r.parentDist,l=r.useSnap,f=r.isRequest,v=r.isGroup,c=r.parentEvent,d=r.resolveMatrix,p=n.isResize,h=n.transformOrigin,g=n.startWidth,m=n.startHeight,x=n.prevWidth,y=n.prevHeight,S=n.minSize,_=n.maxSize,b=n.ratio,E=n.startOffsetWidth,D=n.startOffsetHeight,C=n.isWidth;if(!p)return;if(d){var M=t.state.is3d,P=n.startOffsetMatrix,R=n.startTransformOrigin,O=M?4:3,I=Ce(ln(r)),A=Math.sqrt(I.length);O!==A&&(I=sr(I,A,O));var k=Le(P,I,R,O),F=qr(k,E,D,O);n.startPositions=F,n.nextTargetMatrix=I,n.nextAllMatrix=k}var G=Hr(t.props,"resizable"),L=G.resizeFormat,W=G.throttleResize,z=W===void 0?a?0:1:W,V=G.parentMoveable,q=G.keepRatioFinally,H=n.direction,j=H,Y=0,K=0;!H[0]&&!H[1]&&(j=[1,1]);var J=b&&(o??G.keepRatio)||!1;function it(){var Et=n.fixedDirection,Mt=au(j,J,n,r);Y=Mt.distWidth,K=Mt.distHeight;var Sr=j[0]-Et[0]||J?Math.max(E+Y,Yt):E,br=j[1]-Et[1]||J?Math.max(D+K,Yt):D;return J&&E&&D&&(C?br=Sr/b:Sr=br*b),[Sr,br]}var lt=T(it(),2),X=lt[0],Z=lt[1];c||(n.setFixedDirection(n.fixedDirection),U(t,"onBeforeResize",at(t,r,{startFixedDirection:n.startFixedDirection,startFixedPosition:n.startFixedPosition,setFixedDirection:function(Et){var Mt;return n.setFixedDirection(Et),Mt=T(it(),2),X=Mt[0],Z=Mt[1],[X,Z]},setFixedPosition:function(Et){var Mt;return n.setFixedPosition(Et),Mt=T(it(),2),X=Mt[0],Z=Mt[1],[X,Z]},boundingWidth:X,boundingHeight:Z,setSize:function(Et){var Mt;Mt=T(Et,2),X=Mt[0],Z=Mt[1]}},!0)));var vt=s;s||(!a&&i?vt=Mc(t,[0,0]):vt=n.fixedPosition);var et=[0,0];i||(et=bv(t,X,Z,H,vt,!l&&f,n)),u&&(!u[0]&&(et[0]=0),!u[1]&&(et[1]=0));function nt(){var Et;L&&(Et=T(L([X,Z]),2),X=Et[0],Z=Et[1]),X=rt(X,z),Z=rt(Z,z)}if(J){j[0]&&j[1]&&et[0]&&et[1]&&(B(et[0])>B(et[1])?et[1]=0:et[0]=0);var st=!et[0]&&!et[1];st&&nt(),j[0]&&!j[1]||et[0]&&!et[1]||st&&C?(X+=et[0],Z=X/b):(!j[0]&&j[1]||!et[0]&&et[1]||st&&!C)&&(Z+=et[1],X=Z*b)}else X+=et[0],Z+=et[1],X=Math.max(0,X),Z=Math.max(0,Z);e=T(Ro([X,Z],S,_,J?b:!1),2),X=e[0],Z=e[1],nt(),J&&(v||q)&&(C?Z=X/b:X=Z*b),Y=X-E,K=Z-D;var pt=[Y-x,K-y];n.prevWidth=Y,n.prevHeight=K;var xt=wc(t,X,Z,vt,h,n);if(!(!V&&pt.every(function(Et){return!Et})&&xt.every(function(Et){return!Et}))){var ot=Lt.drag(t,Ne(r,t.state,xt,!!i,!1,"draggable")),dt=ot.transform,It=g+Y,Ft=m+K,Gt=at(t,r,w({width:It,height:Ft,offsetWidth:Math.round(X),offsetHeight:Math.round(Z),startRatio:b,boundingWidth:X,boundingHeight:Z,direction:H,dist:[Y,K],delta:pt,isPinch:!!i,drag:ot},tu({style:{width:"".concat(It,"px"),height:"".concat(Ft,"px")},transform:dt},ot,r)));return!c&&U(t,"onResize",Gt),Gt}},dragControlAfter:function(t,r){var e=r.datas,n=e.isResize,a=e.startOffsetWidth,i=e.startOffsetHeight,o=e.prevWidth,s=e.prevHeight;if(!(!n||t.props.checkResizableError===!1)){var u=t.state,l=u.width,f=u.height,v=l-(a+o),c=f-(i+s),d=B(v)>3,p=B(c)>3;if(d&&(e.startWidth+=v,e.startOffsetWidth+=v,e.prevWidth+=v),p&&(e.startHeight+=c,e.startOffsetHeight+=c,e.prevHeight+=c),d||p)return this.dragControl(t,r)}},dragControlEnd:function(t,r){var e=r.datas,n=r.parentEvent;if(e.isResize){e.isResize=!1;var a=$t(t,r,{});return!n&&U(t,"onResizeEnd",a),a}},dragGroupControlCondition:ji,dragGroupControlStart:function(t,r){var e=r.datas,n=this.dragControlStart(t,w(w({},r),{isGroup:!0}));if(!n)return!1;var a=ir(t,"resizable",r),i=e.startOffsetWidth,o=e.startOffsetHeight;function s(){var d=e.minSize;a.forEach(function(p){var h=p.datas,g=h.minSize,m=h.startOffsetWidth,x=h.startOffsetHeight,y=i*(m?g[0]/m:0),S=o*(x?g[1]/x:0);d[0]=Math.max(d[0],y),d[1]=Math.max(d[1],S)})}function u(){var d=e.maxSize;a.forEach(function(p){var h=p.datas,g=h.maxSize,m=h.startOffsetWidth,x=h.startOffsetHeight,y=i*(m?g[0]/m:0),S=o*(x?g[1]/x:0);d[0]=Math.min(d[0],y),d[1]=Math.min(d[1],S)})}var l=hr(t,this,"dragControlStart",r,function(d,p){return fn(t,d,e,p)});s(),u();var f=function(d){n.setFixedDirection(d),l.forEach(function(p,h){p.setFixedDirection(d),fn(t,p.moveable,e,a[h])})};e.setFixedDirection=f;var v=w(w({},n),{targets:t.props.targets,events:l.map(function(d){return w(w({},d),{setMin:function(p){d.setMin(p),s()},setMax:function(p){d.setMax(p),u()}})}),setFixedDirection:f,setMin:function(d){n.setMin(d),s()},setMax:function(d){n.setMax(d),u()}}),c=U(t,"onResizeGroupStart",v);return e.isResize=c!==!1,e.isResize?n:!1},dragGroupControl:function(t,r){var e=r.datas;if(e.isResize){var n=Hr(t.props,"resizable");Rn(t,"onBeforeResize",function(d){U(t,"onBeforeResizeGroup",at(t,r,w(w({},d),{targets:n.targets}),!0))});var a=this.dragControl(t,w(w({},r),{isGroup:!0}));if(a){var i=a.boundingWidth,o=a.boundingHeight,s=a.dist,u=n.keepRatio,l=[i/(i-s[0]),o/(o-s[1])],f=e.fixedPosition,v=hr(t,this,"dragControl",r,function(d,p){var h=T(kt(Ge(t.rotation/180*Math.PI,3),[p.datas.originalX*l[0],p.datas.originalY*l[1],1],3),2),g=h[0],m=h[1];return w(w({},p),{parentDist:null,parentScale:l,dragClient:ft(f,[g,m]),parentKeepRatio:u})}),c=w({targets:n.targets,events:v},a);return U(t,"onResizeGroup",c),c}}},dragGroupControlEnd:function(t,r){var e=r.isDrag,n=r.datas;if(n.isResize){this.dragControlEnd(t,r);var a=hr(t,this,"dragControlEnd",r),i=$t(t,r,{targets:t.props.targets,events:a});return U(t,"onResizeGroupEnd",i),e}},request:function(t){var r={},e=0,n=0,a=!1,i=t.getRect();return{isControl:!0,requestStart:function(o){var s;return a=o.useSnap,{datas:r,parentDirection:o.direction||[1,1],parentIsWidth:(s=o==null?void 0:o.horizontal)!==null&&s!==void 0?s:!0,useSnap:a}},request:function(o){return"offsetWidth"in o?e=o.offsetWidth-i.offsetWidth:"deltaWidth"in o&&(e+=o.deltaWidth),"offsetHeight"in o?n=o.offsetHeight-i.offsetHeight:"deltaHeight"in o&&(n+=o.deltaHeight),{datas:r,parentDist:[e,n],parentKeepRatio:o.keepRatio,useSnap:a}},requestEnd:function(){return{datas:r,isDrag:!0,useSnap:a}}}},unset:function(t){t.state.gestos.resizable=null}};function Yn(t,r,e,n,a){var i=t.props.groupable,o=t.state,s=o.is3d?4:3,u=r.origin,l=bt(t.state.rootMatrix,Q([u[0],u[1]],i?[0,0]:[o.left,o.top]),s),f=ft([a.left,a.top],l);r.startAbsoluteOrigin=f,r.prevDeg=_t(f,[e,n])/Math.PI*180,r.defaultDeg=r.prevDeg,r.prevSnapDeg=0,r.loop=0,r.startDist=pr(f,[e,n])}function nn(t,r,e){var n=e.defaultDeg,a=e.prevDeg,i=a%360,o=Math.floor(a/360);i<0&&(i+=360),i>t&&i>270&&t<90?++o:i<t&&i<90&&t>270&&--o;var s=r*(o*360+t-n);return e.prevDeg=n+s,s}function Xn(t,r,e,n){return nn(_t(n.startAbsoluteOrigin,[t,r])/Math.PI*180,e,n)}function Vn(t,r,e,n,a,i){var o=t.props.throttleRotate,s=o===void 0?0:o,u=e.prevSnapDeg,l=0,f=!1;if(i){var v=Sv(t,r,n,a+n);f=v.isSnap,l=a+v.dist}f||(l=rt(a+n,s));var c=l-a;return e.prevSnapDeg=c,[c-u,c,l]}function Ls(t,r,e){var n=T(r,4),a=n[0],i=n[1],o=n[2],s=n[3];if(t==="none")return[];if(wt(t))return t.map(function(g){return Ls(g,[a,i,o,s],e)[0]});var u=T((t||"top").split("-"),2),l=u[0],f=u[1],v=[a,i];l==="left"?v=[o,a]:l==="right"?v=[i,s]:l==="bottom"&&(v=[s,o]);var c=[(v[0][0]+v[1][0])/2,(v[0][1]+v[1][1])/2],d=Zs(v,e);if(f){var p=f==="top"||f==="left",h=l==="bottom"||l==="left";c=v[p&&!h||!p&&h?0:1]}return[[c,d]]}function ga(t,r){if(r.isRequest)return r.requestAble==="rotatable";var e=r.inputEvent.target;if(Rt(e,$("rotation-control"))||t.props.rotateAroundControls&&Rt(e,$("around-control"))||Rt(e,$("control"))&&Rt(e,$("rotatable")))return!0;var n=t.props.rotationTarget;return n?ni(n,!0).some(function(a){return a?e===a||e.contains(a):!1}):!1}var ov=`.rotation {
position: absolute;
height: 40px;
width: 1px;
transform-origin: 50% 100%;
height: calc(40px * var(--zoom));
top: auto;
left: 0;
bottom: 100%;
will-change: transform;
}
.rotation .rotation-line {
display: block;
width: 100%;
height: 100%;
transform-origin: 50% 50%;
}
.rotation .rotation-control {
border-color: #4af;
border-color: var(--moveable-color);
background:#fff;
cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
cursor: alias;
}
.rotatable.direction.control.move {
cursor: move;
}
`,sv={name:"rotatable",canPinch:!0,props:["rotatable","rotationPosition","throttleRotate","renderDirections","rotationTarget","rotateAroundControls","edge","resolveAblesWithRotatable","displayAroundControls"],events:["rotateStart","beforeRotate","rotate","rotateEnd","rotateGroupStart","beforeRotateGroup","rotateGroup","rotateGroupEnd"],css:[ov],viewClassName:function(t){return t.isDragging("rotatable")?$("view-rotation-dragging"):""},render:function(t,r){var e=Hr(t.props,"rotatable"),n=e.rotatable,a=e.rotationPosition,i=e.zoom,o=e.renderDirections,s=e.rotateAroundControls,u=e.resolveAblesWithRotatable,l=t.getState(),f=l.renderPoses,v=l.direction;if(!n)return null;var c=Ls(a,f,v),d=[];if(c.forEach(function(m,x){var y=T(m,2),S=y[0],_=y[1];d.push(r.createElement("div",{key:"rotation".concat(x),className:$("rotation"),style:{transform:"translate(-50%) translate(".concat(S[0],"px, ").concat(S[1],"px) rotate(").concat(_,"rad)")}},r.createElement("div",{className:$("line rotation-line"),style:{transform:"scaleX(".concat(i,")")}}),r.createElement("div",{className:$("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(i,")")}})))}),o){var p=xr(u||{}),h={};p.forEach(function(m){u[m].forEach(function(x){h[x]=m})});var g=[];wt(o)&&(g=o.map(function(m){var x=h[m];return{data:x?{resolve:x}:{},classNames:x?["move"]:[],dir:m}})),d.push.apply(d,N([],T(Es(t,"rotatable",g,r)),!1))}return s&&d.push.apply(d,N([],T(Ts(t,r)),!1)),d},dragControlCondition:ga,dragControlStart:function(t,r){var e,n,a=r.datas,i=r.clientX,o=r.clientY,s=r.parentRotate,u=r.parentFlag,l=r.isPinch,f=r.isRequest,v=t.state,c=v.target,d=v.left,p=v.top,h=v.direction,g=v.beforeDirection,m=v.targetTransform,x=v.moveableClientRect,y=v.offsetMatrix,S=v.targetMatrix,_=v.allMatrix,b=v.width,E=v.height;if(!f&&!c)return!1;var D=t.getRect();a.rect=D,a.transform=m,a.left=d,a.top=p;var C=function(j){var Y=Ns(t.state,j);a.fixedDirection=Y.fixedDirection,a.fixedOffset=Y.fixedOffset,a.fixedPosition=Y.fixedPosition,z&&z.setFixedPosition(j)},M=function(j){var Y=iv(t.state,j);a.fixedDirection=Y.fixedDirection,a.fixedOffset=Y.fixedOffset,a.fixedPosition=Y.fixedPosition,z&&z.setFixedDirection(j)},P=i,R=o;if(f||l||u){var O=s||0;a.beforeInfo={origin:D.beforeOrigin,prevDeg:O,defaultDeg:O,prevSnapDeg:0,startDist:0},a.afterInfo=w(w({},a.beforeInfo),{origin:D.origin}),a.absoluteInfo=w(w({},a.beforeInfo),{origin:D.origin,startValue:O})}else{var I=(n=r.inputEvent)===null||n===void 0?void 0:n.target;if(I){var A=I.getAttribute("data-direction")||"",k=dc[A];if(k){a.isControl=!0,a.isAroundControl=Rt(I,$("around-control")),a.controlDirection=k;var F=I.getAttribute("data-resolve");F&&(a.resolveAble=F);var G=Gv(v.rootMatrix,v.renderPoses,x);e=T(Pt(G,k),2),P=e[0],R=e[1]}}a.beforeInfo={origin:D.beforeOrigin},a.afterInfo={origin:D.origin},a.absoluteInfo={origin:D.origin,startValue:D.rotation};var L=C;C=function(j){var Y=v.is3d?4:3,K=T(ft(es(S,Y),j),2),J=K[0],it=K[1],lt=kt(y,Nr([J,it],Y)),X=kt(_,Nr([j[0],j[1]],Y));L(j);var Z=v.posDelta;a.beforeInfo.origin=Q(lt,Z),a.afterInfo.origin=Q(X,Z),a.absoluteInfo.origin=Q(X,Z),Yn(t,a.beforeInfo,P,R,x),Yn(t,a.afterInfo,P,R,x),Yn(t,a.absoluteInfo,P,R,x)},M=function(j){var Y=Pt([[0,0],[b,0],[0,E],[b,E]],j);C(Y)}}a.startClientX=P,a.startClientY=R,a.direction=h,a.beforeDirection=g,a.startValue=0,a.datas={},Cn(t,r,"rotate");var W=!1,z=!1;if(a.isControl&&a.resolveAble){var V=a.resolveAble;V==="resizable"&&(z=ha.dragControlStart(t,w(w({},new ae("resizable").dragStart([0,0],r)),{parentPosition:a.controlPosition,parentFixedPosition:a.fixedPosition})))}z||(W=Lt.dragStart(t,new ae().dragStart([0,0],r))),C(kv(t));var q=at(t,r,w(w({set:function(j){a.startValue=j*Math.PI/180},setFixedDirection:M,setFixedPosition:C},Dn(t,r)),{dragStart:W,resizeStart:z})),H=U(t,"onRotateStart",q);return a.isRotate=H!==!1,v.snapRenderInfo={request:r.isRequest},a.isRotate?q:!1},dragControl:function(t,r){var e,n,a,i=r.datas,o=r.clientDistX,s=r.clientDistY,u=r.parentRotate,l=r.parentFlag,f=r.isPinch,v=r.groupDelta,c=r.resolveMatrix,d=i.beforeDirection,p=i.beforeInfo,h=i.afterInfo,g=i.absoluteInfo,m=i.isRotate,x=i.startValue,y=i.rect,S=i.startClientX,_=i.startClientY;if(m){_n(t,r,"rotate");var b=pc(r),E=d*b,D=t.props.parentMoveable,C=0,M,P,R=0,O,I,A=0,k,F,G=180/Math.PI*x,L=g.startValue,W=!1,z=S+o,V=_+s;if(!l&&"parentDist"in r){var q=r.parentDist;M=q,O=q,k=q}else f||l?(M=nn(u,d,p),O=nn(u,E,h),k=nn(u,E,g)):(M=Xn(z,V,d,p),O=Xn(z,V,E,h),k=Xn(z,V,E,g),W=!0);if(P=G+M,I=G+O,F=L+k,U(t,"onBeforeRotate",at(t,r,{beforeRotation:P,rotation:I,absoluteRotation:F,setRotation:function(vt){O=vt-G,M=O,k=O}},!0)),e=T(Vn(t,y,p,M,G,W),3),C=e[0],M=e[1],P=e[2],n=T(Vn(t,y,h,O,G,W),3),R=n[0],O=n[1],I=n[2],a=T(Vn(t,y,g,k,L,W),3),A=a[0],k=a[1],F=a[2],!(!A&&!R&&!C&&!D&&!c)){var H=En(i,"rotate(".concat(I,"deg)"),"rotate(".concat(O,"deg)"));c&&(i.fixedPosition=Va(t,i.targetAllTransform,i.fixedDirection,i.fixedOffset,i));var j=Cc(t,O,i),Y=Q(ft(v||[0,0],j),i.prevInverseDist||[0,0]);i.prevInverseDist=j,i.requestValue=null;var K=Ss(t,H,Y,f,r),J=K,it=pr([z,V],g.startAbsoluteOrigin)-g.startDist,lt=void 0;if(i.resolveAble==="resizable"){var X=ha.dragControl(t,w(w({},Ne(r,t.state,[r.deltaX,r.deltaY],!!f,!1,"resizable")),{resolveMatrix:!0,parentDistance:it}));X&&(lt=X,J=tu(J,X,r))}var Z=at(t,r,w(w({delta:R,dist:O,rotate:I,rotation:I,beforeDist:M,beforeDelta:C,beforeRotate:P,beforeRotation:P,absoluteDist:k,absoluteDelta:A,absoluteRotate:F,absoluteRotation:F,isPinch:!!f,resize:lt},K),J));return U(t,"onRotate",Z),Z}}},dragControlEnd:function(t,r){var e=r.datas;if(e.isRotate){e.isRotate=!1;var n=$t(t,r,{});return U(t,"onRotateEnd",n),n}},dragGroupControlCondition:ga,dragGroupControlStart:function(t,r){var e=r.datas,n=t.state,a=n.left,i=n.top,o=n.beforeOrigin,s=this.dragControlStart(t,r);if(!s)return!1;s.set(e.beforeDirection*t.rotation);var u=hr(t,this,"dragControlStart",r,function(v,c){var d=v.state,p=d.left,h=d.top,g=d.beforeOrigin,m=ft(Q([p,h],[a,i]),Q(g,o));return c.datas.startGroupClient=m,c.datas.groupClient=m,w(w({},c),{parentRotate:0})}),l=w(w({},s),{targets:t.props.targets,events:u}),f=U(t,"onRotateGroupStart",l);return e.isRotate=f!==!1,e.isRotate?s:!1},dragGroupControl:function(t,r){var e=r.datas;if(e.isRotate){Rn(t,"onBeforeRotate",function(l){U(t,"onBeforeRotateGroup",at(t,r,w(w({},l),{targets:t.props.targets}),!0))});var n=this.dragControl(t,r);if(n){var a=e.beforeDirection,i=n.beforeDist,o=i/180*Math.PI,s=hr(t,this,"dragControl",r,function(l,f){var v=f.datas.startGroupClient,c=T(f.datas.groupClient,2),d=c[0],p=c[1],h=T(Be(v,o*a),2),g=h[0],m=h[1],x=[g-d,m-p];return f.datas.groupClient=[g,m],w(w({},f),{parentRotate:i,groupDelta:x})});t.rotation=a*n.beforeRotation;var u=w({targets:t.props.targets,events:s,set:function(l){t.rotation=l},setGroupRotation:function(l){t.rotation=l}},n);return U(t,"onRotateGroup",u),u}}},dragGroupControlEnd:function(t,r){var e=r.isDrag,n=r.datas;if(n.isRotate){this.dragControlEnd(t,r);var a=hr(t,this,"dragControlEnd",r),i=$t(t,r,{targets:t.props.targets,events:a});return U(t,"onRotateGroupEnd",i),e}},request:function(t){var r={},e=0,n=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:r}},request:function(a){return"deltaRotate"in a?e+=a.deltaRotate:"rotate"in a&&(e=a.rotate-n),{datas:r,parentDist:e}},requestEnd:function(){return{datas:r,isDrag:!0}}}}};function uv(t,r){var e,n=t.direction,a=t.classNames,i=t.size,o=t.pos,s=t.zoom,u=t.key,l=n==="horizontal",f=l?"Y":"X";return r.createElement("div",{key:u,className:a.join(" "),style:(e={},e[l?"width":"height"]="".concat(i),e.transform="translate(".concat(o[0],", ").concat(o[1],") translate").concat(f,"(-50%) scale").concat(f,"(").concat(s,")"),e)})}function $a(t,r){return uv(w(w({},t),{classNames:N([$("line","guideline",t.direction)],T(t.classNames),!1).filter(function(e){return e}),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map(function(e){return"".concat(rt(e,.1),"px")})}),r)}function Ui(t,r,e,n,a,i,o,s){var u=t.props.zoom;return e.map(function(l,f){var v=l.type,c=l.pos,d=[0,0];return d[o]=n,d[o?0:1]=-a+c,$a({key:"".concat(r,"TargetGuideline").concat(f),classNames:[$("target","bold",v)],posValue:d,sizeValue:i,zoom:u,direction:r},s)})}function Ki(t,r,e,n,a,i){var o=t.props,s=o.zoom,u=o.isDisplayInnerSnapDigit,l=r==="horizontal"?Rr:Pr,f=a[l.start],v=a[l.end];return e.filter(function(c){var d=c.hide,p=c.elementRect;if(d)return!1;if(u&&p){var h=p.rect;if(h[l.start]<=f&&v<=h[l.end])return!1}return!0}).map(function(c,d){var p=c.pos,h=c.size,g=c.element,m=c.className,x=[-n[0]+p[0],-n[1]+p[1]];return $a({key:"".concat(r,"-default-guideline-").concat(d),classNames:g?[$("bold"),m]:[$("normal"),m],direction:r,posValue:x,sizeValue:h,zoom:s},i)})}function he(t,r,e,n,a,i,o,s){var u,l=t.props,f=l.snapDigit,v=f===void 0?0:f,c=l.isDisplaySnapDigit,d=c===void 0?!0:c,p=l.snapDistFormat,h=p===void 0?function(_,b){return _}:p,g=l.zoom,m=r==="horizontal"?"X":"Y",x=r==="vertical"?"height":"width",y=Math.abs(a),S=d?parseFloat(y.toFixed(v)):0;return s.createElement("div",{key:"".concat(r,"-").concat(e,"-guideline-").concat(n),className:$("guideline-group",r),style:(u={left:"".concat(i[0],"px"),top:"".concat(i[1],"px")},u[x]="".concat(y,"px"),u)},$a({direction:r,classNames:[$(e),o],size:"100%",posValue:[0,0],sizeValue:y,zoom:g},s),s.createElement("div",{className:$("size-value","gap"),style:{transform:"translate".concat(m,"(-50%) scale(").concat(g,")")}},S>0?h(S,r):""))}function lv(t,r,e,n){var a=t==="vertical"?0:1,i=t==="vertical"?1:0,o=a?Rr:Pr,s=e[o.start],u=e[o.end];return ru(r,function(l){return l.pos[a]}).map(function(l){var f=[],v=[],c=[];return l.forEach(function(d){var p,h,g=d.element,m=d.elementRect.rect;if(m[o.end]<s)f.push(d);else if(u<m[o.start])v.push(d);else if(m[o.start]<=s&&u<=m[o.end]&&n){var x=d.pos,y={element:g,rect:w(w({},m),(p={},p[o.end]=m[o.start],p))},S={element:g,rect:w(w({},m),(h={},h[o.start]=m[o.end],h))},_=[0,0],b=[0,0];_[a]=x[a],_[i]=x[i],b[a]=x[a],b[i]=x[i]+d.size,f.push({type:t,pos:_,size:0,elementRect:y,direction:"",elementDirection:"end"}),v.push({type:t,pos:b,size:0,elementRect:S,direction:"",elementDirection:"start"})}}),f.sort(function(d,p){return p.pos[i]-d.pos[i]}),v.sort(function(d,p){return d.pos[i]-p.pos[i]}),{total:l,start:f,end:v,inner:c}})}function fv(t,r,e,n,a){var i=t.props.isDisplayInnerSnapDigit,o=[];return["vertical","horizontal"].forEach(function(s){var u=r.filter(function(g){return g.type===s}),l=s==="vertical"?1:0,f=l?0:1,v=lv(s,u,n,i),c=l?Pr:Rr,d=l?Rr:Pr,p=n[c.start],h=n[c.end];v.forEach(function(g){var m=g.total,x=g.start,y=g.end,S=g.inner,_=e[f]+m[0].pos[f]-n[d.start],b=n;x.forEach(function(E){var D=E.elementRect.rect,C=b[c.start]-D[c.end];if(C>0){var M=[0,0];M[l]=e[l]+b[c.start]-p-C,M[f]=_,o.push(he(t,s,"dashed",o.length,C,M,E.className,a))}b=D}),b=n,y.forEach(function(E){var D=E.elementRect.rect,C=D[c.start]-b[c.end];if(C>0){var M=[0,0];M[l]=e[l]+b[c.end]-p,M[f]=_,o.push(he(t,s,"dashed",o.length,C,M,E.className,a))}b=D}),S.forEach(function(E){var D=E.elementRect.rect,C=p-D[c.start],M=D[c.end]-h,P=[0,0],R=[0,0];P[l]=e[l]-C,P[f]=_,R[l]=e[l]+h-p,R[f]=_,o.push(he(t,s,"dashed",o.length,C,P,E.className,a)),o.push(he(t,s,"dashed",o.length,M,R,E.className,a))})})}),o}function cv(t,r,e,n,a){var i=[];return["horizontal","vertical"].forEach(function(o){var s=r.filter(function(g){return g.type===o}).slice(0,1),u=o==="vertical"?0:1,l=u?0:1,f=u?Pr:Rr,v=u?Rr:Pr,c=n[f.start],d=n[f.end],p=n[v.start],h=n[v.end];s.forEach(function(g){var m=g.gap,x=g.gapRects,y=Math.max.apply(Math,N([p],T(x.map(function(b){var E=b.rect;return E[v.start]})),!1)),S=Math.min.apply(Math,N([h],T(x.map(function(b){var E=b.rect;return E[v.end]})),!1)),_=(y+S)/2;y===S||_===(p+h)/2||x.forEach(function(b){var E=b.rect,D=b.className,C=[e[0],e[1]];if(E[f.end]<c)C[u]+=E[f.end]-c;else if(d<E[f.start])C[u]+=E[f.start]-c-m;else return;C[l]+=_-p,i.push(he(t,u?"vertical":"horizontal","gap",i.length,m,C,D,a))})})}),i}function ma(t){var r,e,n=t.state,a=n.containerClientRect,i=n.hasFixed,o=a.overflow,s=a.scrollHeight,u=a.scrollWidth,l=a.clientHeight,f=a.clientWidth,v=a.clientLeft,c=a.clientTop,d=t.props,p=d.snapGap,h=p===void 0?!0:p,g=d.verticalGuidelines,m=d.horizontalGuidelines,x=d.snapThreshold,y=x===void 0?5:x,S=d.maxSnapElementGuidelineDistance,_=S===void 0?1/0:S,b=d.isDisplayGridGuidelines,E=tr(er(t.state)),D=E.top,C=E.left,M=E.bottom,P=E.right,R={top:D,left:C,bottom:M,right:P,center:(C+P)/2,middle:(D+M)/2},O=hv(t),I=N([],T(O),!1),A=((e=(r=n.snapThresholdInfo)===null||r===void 0?void 0:r.multiples)!==null&&e!==void 0?e:[1,1]).map(function(L){return L*y});h&&I.push.apply(I,N([],T(vv(t,R,A)),!1));var k=w({},n.snapOffset||{left:0,top:0,bottom:0,right:0});if(I.push.apply(I,N([],T(pv(t,o?u:f,o?s:l,v,c,k,b)),!1)),i){var F=a.left,G=a.top;k.left+=F,k.top+=G,k.right+=F,k.bottom+=G}return I.push.apply(I,N([],T(Hs(m||!1,g||!1,o?u:f,o?s:l,v,c,k)),!1)),I=I.filter(function(L){var W=L.element,z=L.elementRect,V=L.type;if(!W||!z)return!0;var q=z.rect;return Ws(R,q,V,_)}),I}function vv(t,r,e){var n=t.props,a=n.maxSnapElementGuidelineDistance,i=a===void 0?1/0:a,o=n.maxSnapElementGapDistance,s=o===void 0?1/0:o,u=t.state.elementRects,l=[];return[["vertical",Rr,Pr],["horizontal",Pr,Rr]].forEach(function(f){var v=T(f,3),c=v[0],d=v[1],p=v[2],h=r[d.start],g=r[d.end],m=r[d.center],x=r[p.start],y=r[p.end],S={left:e[0],top:e[1]};function _(D){var C=D.rect,M=S[d.start];return C[d.end]<h+M?h-C[d.end]:g-M<C[d.start]?C[d.start]-g:-1}var b=u.filter(function(D){var C=D.rect;return C[p.start]>y||C[p.end]<x?!1:_(D)>0}).sort(function(D,C){return _(D)-_(C)}),E=[];b.forEach(function(D){b.forEach(function(C){if(D!==C){var M=D.rect,P=C.rect,R=M[p.start],O=M[p.end],I=P[p.start],A=P[p.end];R>A||I>O||E.push([D,C])}})}),E.forEach(function(D){var C=T(D,2),M=C[0],P=C[1],R=M.rect,O=P.rect,I=R[d.start],A=R[d.end],k=O[d.start],F=O[d.end],G=S[d.start],L=0,W=0,z=!1,V=!1,q=!1;if(A<=h&&g<=k){if(V=!0,L=(k-A-(g-h))/2,W=A+L+(g-h)/2,B(W-m)>G)return}else if(A<k&&F<h+G){if(z=!0,L=k-A,W=F+L,B(W-h)>G)return}else if(A<k&&g-G<I){if(q=!0,L=k-A,W=I-L,B(W-g)>G)return}else return;L&&Ws(r,O,c,i)&&(L>s||l.push({type:c,pos:c==="vertical"?[W,0]:[0,W],element:P.element,size:0,className:P.className,isStart:z,isCenter:V,isEnd:q,gap:L,hide:!0,gapRects:[M,P],direction:"",elementDirection:""}))})}),l}function dv(t,r,e,n){var a,i,o=t.props,s=t.state,u=o.snapGridAll,l=o.snapGridWidth,f=l===void 0?0:l,v=o.snapGridHeight,c=v===void 0?0:v,d=s.snapRenderInfo,p=d&&(((a=d.direction)===null||a===void 0?void 0:a[0])||((i=d.direction)===null||i===void 0?void 0:i[1])),h=t.moveables;if(u&&h&&p&&(f||c)){if(s.snapThresholdInfo)return;s.snapThresholdInfo={multiples:[1,1],offset:[0,0]};var g=t.getRect(),m=g.children,x=d.direction;if(m){var y=x.map(function(_,b){var E=b===0?{snapSize:f,posName:"left",sizeName:"width",clientOffset:n.left-r}:{snapSize:c,posName:"top",sizeName:"height",clientOffset:n.top-e},D=E.snapSize,C=E.posName,M=E.sizeName,P=E.clientOffset;if(!D)return{dir:_,multiple:1,snapSize:D,snapOffset:0};var R=g[M],O=g[C],I=Po(m.map(function(z){return[z[C]-O,z[M],R-z[M]-z[C]+O]})).filter(function(z){return z}).sort(function(z,V){return z-V}),A=I[0],k=I.map(function(z){return rt(z/A,.1)*D}),F=1,G=rt(R/A,.1);for(F=1;F<=10&&!k.every(function(z){return z*F%1===0});++F);var L=(-_+1)/2,W=an(O-P,O-P+R,L,1-L);return{multiple:G*F,dir:_,snapSize:D,snapOffset:Math.round(W/D)}}),S=y.map(function(_){return _.multiple||1});s.snapThresholdInfo.multiples=S,s.snapThresholdInfo.offset=y.map(function(_){return _.snapOffset}),y.forEach(function(_,b){_.snapSize})}}else s.snapThresholdInfo=null}function pv(t,r,e,n,a,i,o){n===void 0&&(n=0),a===void 0&&(a=0);var s=t.props,u=t.state,l=s.snapGridWidth,f=l===void 0?0:l,v=s.snapGridHeight,c=v===void 0?0:v,d=[],p=i.left,h=i.top,g=[0,0];dv(t,n,a,i);var m=u.snapThresholdInfo,x=f,y=c;if(m&&(f*=m.multiples[0]||1,c*=m.multiples[1]||1,g=m.offset),c){for(var S=function(b){d.push({type:"horizontal",pos:[p,rt(g[1]*y+b-a+h,.1)],className:$("grid-guideline"),size:r,hide:!o,direction:"",grid:!0})},_=0;_<=e*2;_+=c)S(_);for(var _=-c;_>=-e;_-=c)S(_)}if(f){for(var S=function(E){d.push({type:"vertical",pos:[rt(g[0]*x+E-n+p,.1),h],className:$("grid-guideline"),size:e,hide:!o,direction:"",grid:!0})},_=0;_<=r*2;_+=f)S(_);for(var _=-f;_>=-r;_-=f)S(_)}return d}function Ws(t,r,e,n){return e==="horizontal"?B(t.right-r.left)<=n||B(t.left-r.right)<=n||t.left<=r.right&&r.left<=t.right:e==="vertical"?B(t.bottom-r.top)<=n||B(t.top-r.bottom)<=n||t.top<=r.bottom&&r.top<=t.bottom:!0}function hv(t){var r=t.state,e=t.props.elementGuidelines,n=e===void 0?[]:e;if(!n.length)return r.elementRects=[],[];var a=(r.elementRects||[]).filter(function(c){return!c.refresh}),i=n.map(function(c){return or(c)&&"element"in c?w(w({},c),{element:fr(c.element,!0)}):{element:fr(c,!0)}}).filter(function(c){return c.element}),o=Mf(a.map(function(c){return c.element}),i.map(function(c){return c.element})),s=o.maintained,u=o.added,l=[];s.forEach(function(c){var d=T(c,2),p=d[0],h=d[1];l[h]=a[p]}),gv(t,u.map(function(c){return i[c]})).map(function(c,d){l[u[d]]=c}),r.elementRects=l;var f=ja(t.props.elementSnapDirections),v=[];return l.forEach(function(c){var d=c.element,p=c.top,h=p===void 0?f.top:p,g=c.left,m=g===void 0?f.left:g,x=c.right,y=x===void 0?f.right:x,S=c.bottom,_=S===void 0?f.bottom:S,b=c.center,E=b===void 0?f.center:b,D=c.middle,C=D===void 0?f.middle:D,M=c.className,P=c.rect,R=Ua({top:h,right:y,left:m,bottom:_,center:E,middle:C},P),O=R.horizontal,I=R.vertical,A=R.horizontalNames,k=R.verticalNames,F=P.top,G=P.left,L=P.right-G,W=P.bottom-F,z=[L,W];I.forEach(function(V,q){v.push({type:"vertical",element:d,pos:[rt(V,.1),F],size:W,sizes:z,className:M,elementRect:c,elementDirection:Li[k[q]]||k[q],direction:""})}),O.forEach(function(V,q){v.push({type:"horizontal",element:d,pos:[G,rt(V,.1)],size:L,sizes:z,className:M,elementRect:c,elementDirection:Li[A[q]]||A[q],direction:""})})}),v}function Zi(t,r){return t?t.map(function(e){var n=or(e)?e:{pos:e},a=n.pos;return ee(a)?n:w(w({},n),{pos:gt(a,r)})}):[]}function Hs(t,r,e,n,a,i,o){a===void 0&&(a=0),i===void 0&&(i=0),o===void 0&&(o={left:0,top:0,right:0,bottom:0});var s=[],u=o.left,l=o.top,f=o.bottom,v=o.right,c=e+v-u,d=n+f-l;return Zi(t,d).forEach(function(p){s.push({type:"horizontal",pos:[u,rt(p.pos-i+l,.1)],size:c,className:p.className,direction:""})}),Zi(r,c).forEach(function(p){s.push({type:"vertical",pos:[rt(p.pos-a+u,.1),l],size:d,className:p.className,direction:""})}),s}function gv(t,r){if(!r.length)return[];var e=t.props.groupable,n=t.state,a=n.containerClientRect,i=n.rootMatrix,o=n.is3d,s=n.offsetDelta,u=o?4:3,l=T(Lc(i,a,u),2),f=l[0],v=l[1],c=e?0:s[0],d=e?0:s[1];return r.map(function(p){var h=p.element.getBoundingClientRect(),g=h.left-f-c,m=h.top-v-d,x=m+h.height,y=g+h.width,S=T(se(i,[g,m],u),2),_=S[0],b=S[1],E=T(se(i,[y,x],u),2),D=E[0],C=E[1];return w(w({},p),{rect:{left:_,right:D,top:b,bottom:C,center:(_+D)/2,middle:(b+C)/2}})})}function Ze(t){var r=t.state,e=r.container,n=t.props.snapContainer||e;if(r.snapContainer===n&&r.guidelines&&r.guidelines.length)return!1;var a=r.containerClientRect,i={left:0,top:0,bottom:0,right:0};if(e!==n){var o=fr(n,!0);if(o){var s=be(o),u=eo(r,[s.left-a.left,s.top-a.top]),l=eo(r,[s.right-a.right,s.bottom-a.bottom]);i.left=rt(u[0],1e-5),i.top=rt(u[1],1e-5),i.right=rt(l[0],1e-5),i.bottom=rt(l[1],1e-5)}}return r.snapContainer=n,r.snapOffset=i,r.guidelines=ma(t),r.enableSnap=!0,!0}function Ys(t,r,e,n,a,i){var o=qr(t,r,e,i?4:3),s=Pt(o,n);return Qa(o,Q(a,s))}function $i(t){return t?t/B(t):0}function mv(t,r,e,n,a,i){var o=i.fixedDirection,s=Xc(e,o,n),u=Za(t,r,e,n),l=N(N([],T(ev(t,r,s,n,a,i)),!1),T(ks(t,u,i)),!1),f=cn(l,0),v=cn(l,1);return{width:{isBound:f.isBound,offset:f.offset[0]},height:{isBound:v.isBound,offset:v.offset[1]}}}function xv(t,r,e,n,a,i,o,s,u){var l=Pt(r,o),f=Tn(t,s,{vertical:[l[0]],horizontal:[l[1]]}),v=f.horizontal.offset,c=f.vertical.offset;if(rt(c,fa)||rt(v,fa)){var d=T(vr({datas:u,distX:-c,distY:-v}),2),p=d[0],h=d[1],g=Math.min(a||1/0,e+o[0]*p),m=Math.min(i||1/0,n+o[1]*h);return[g-e,m-n]}return[0,0]}function Xs(t,r,e,n,a,i,o,s){for(var u=er(t.state),l=t.props.keepRatio,f=0,v=0,c=0;c<2;++c){var d=r(f,v),p=mv(t,d,a,l,o,s),h=p.width,g=p.height,m=h.isBound,x=g.isBound,y=h.offset,S=g.offset;if(c===1&&(m||(y=0),x||(S=0)),c===0&&o&&!m&&!x)return[0,0];if(l){var _=B(y)*(e?1/e:1),b=B(S)*(n?1/n:1),E=m&&x?_<b:x||!m&&_<b;E?y=e*S/n:S=n*y/e}f+=y,v+=S}if(!l&&a[0]&&a[1]){var D=av(t,u,a,i,s),C=D.maxWidth,M=D.maxHeight,P=T(xv(t,r(f,v).map(function(I){return I.map(function(A){return rt(A,fa)})}),e+f,n+v,C,M,a,o,s),2),y=P[0],S=P[1];f+=y,v+=S}return[f,v]}function ye(t){return t<0&&(t=t%360+360),t%=360,t}function yv(t,r){r=ye(r);var e=Math.floor(t/360),n=e*360+360-r,a=e*360+r;return B(t-n)<B(t-a)?n:a}function qn(t,r){t=ye(t),r=ye(r);var e=ye(t-r);return Math.min(e,360-e)}function Sv(t,r,e,n){var a,i=t.props,o=(a=i[Os])!==null&&a!==void 0?a:5,s=i[Rs];if(de(t,"rotatable")){var u=r.pos1,l=r.pos2,f=r.pos3,v=r.pos4,c=r.origin,d=e*Math.PI/180,p=[u,l,f,v].map(function(S){return Q(S,c)}),h=p.map(function(S){return Be(S,d)}),g=N(N([],T(Gc(t,p,h,c,e)),!1),T(Zc(t,p,h,c,e)),!1);g.sort(function(S,_){return B(S-e)-B(_-e)});var m=g.length>0;if(m)return{isSnap:m,dist:m?g[0]:e}}if(s!=null&&s.length&&o){var x=s.slice().sort(function(S,_){return qn(S,n)-qn(_,n)}),y=x[0];if(qn(y,n)<=o)return{isSnap:!0,dist:e+yv(n,y)-n}}return{isSnap:!1,dist:e}}function bv(t,r,e,n,a,i,o){if(!de(t,"resizable"))return[0,0];var s=o.fixedDirection,u=o.nextAllMatrix,l=t.state,f=l.allMatrix,v=l.is3d;return Xs(t,function(c,d){return Ys(u||f,r+c,e+d,s,a,v)},r,e,n,a,i,o)}function _v(t,r,e,n,a){if(!de(t,"scalable"))return[0,0];var i=a.startOffsetWidth,o=a.startOffsetHeight,s=a.fixedPosition,u=a.fixedDirection,l=a.is3d,f=Xs(t,function(v,c){return Ys(bc(a,ft(r,[v/i,c/o])),i,o,u,s,l)},i,o,e,s,n,a);return[f[0]/i,f[1]/o]}function Ev(t,r){r.absolutePoses=er(t.state)}function Ji(t){var r=[];return t.forEach(function(e){e.guidelineInfos.forEach(function(n){var a=n.guideline;qt(r,function(i){return i.guideline===a})||(a.direction="",r.push({guideline:a,posInfo:e}))})}),r.map(function(e){var n=e.guideline,a=e.posInfo;return w(w({},n),{direction:a.direction})})}function Qi(t,r,e,n,a,i){var o=qa(wn(t,i),r,e),s=o.vertical,u=o.horizontal,l=Jr();s.forEach(function(p){p.isBound&&(p.direction==="start"&&(l.left=!0),p.direction==="end"&&(l.right=!0),n.push({type:"bounds",pos:p.pos}))}),u.forEach(function(p){p.isBound&&(p.direction==="start"&&(l.top=!0),p.direction==="end"&&(l.bottom=!0),a.push({type:"bounds",pos:p.pos}))});var f=$c(t),v=f.boundMap,c=f.vertical,d=f.horizontal;return c.forEach(function(p){mr(n,function(h){var g=h.type,m=h.pos;return g==="bounds"&&m===p})>=0||n.push({type:"bounds",pos:p})}),d.forEach(function(p){mr(a,function(h){var g=h.type,m=h.pos;return g==="bounds"&&m===p})>=0||a.push({type:"bounds",pos:p})}),{boundMap:l,innerBoundMap:v}}var Dv=ei("",["resizable","scalable"]),Cv={name:"snappable",dragRelation:"strong",props:["snappable","snapContainer","snapDirections","elementSnapDirections","snapGap","snapGridWidth","snapGridHeight","isDisplaySnapDigit","isDisplayInnerSnapDigit","isDisplayGridGuidelines","snapDigit","snapThreshold","snapRenderThreshold","snapGridAll",Os,Rs,Ps,Is,"horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","snapDistFormat","maxSnapElementGuidelineDistance","maxSnapElementGapDistance"],events:["snap","bound"],css:[`:host {
--bounds-color: #d66;
}
.guideline {
pointer-events: none;
z-index: 2;
}
.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}
.guideline-group {
position: absolute;
top: 0;
left: 0;
}
.guideline-group .size-value {
position: absolute;
color: #f55;
font-size: 12px;
font-size: calc(12px * var(--zoom));
font-weight: bold;
}
.guideline-group.horizontal .size-value {
transform-origin: 50% 100%;
transform: translateX(-50%);
left: 50%;
bottom: 5px;
bottom: calc(2px + 3px * var(--zoom));
}
.guideline-group.vertical .size-value {
transform-origin: 0% 50%;
top: 50%;
transform: translateY(-50%);
left: 5px;
left: calc(2px + 3px * var(--zoom));
}
.guideline.gap {
background: #f55;
}
.size-value.gap {
color: #f55;
}
`],render:function(t,r){var e=t.state,n=e.top,a=e.left,i=e.pos1,o=e.pos2,s=e.pos3,u=e.pos4,l=e.snapRenderInfo,f=t.props.snapRenderThreshold,v=f===void 0?1:f;if(!l||!l.render||!de(t,""))return te(t,"boundMap",Jr(),function(H){return JSON.stringify(H)}),te(t,"innerBoundMap",Jr(),function(H){return JSON.stringify(H)}),[];e.guidelines=ma(t);var c=Math.min(i[0],o[0],s[0],u[0]),d=Math.min(i[1],o[1],s[1],u[1]),p=l.externalPoses||[],h=er(t.state),g=[],m=[],x=[],y=[],S=[],_=tr(h),b=_.width,E=_.height,D=_.top,C=_.left,M=_.bottom,P=_.right,R={left:C,right:P,top:D,bottom:M,center:(C+P)/2,middle:(D+M)/2},O=p.length>0,I=O?tr(p):{};if(!l.request){if(l.direction&&S.push(Yc(t,h,l.direction,v,v)),l.snap){var A=tr(h);l.center&&(A.middle=(A.top+A.bottom)/2,A.center=(A.left+A.right)/2),S.push(Wi(t,A,v,v))}O&&(l.center&&(I.middle=(I.top+I.bottom)/2,I.center=(I.left+I.right)/2),S.push(Wi(t,I,v,v))),S.forEach(function(H){var j=H.vertical.posInfos,Y=H.horizontal.posInfos;g.push.apply(g,N([],T(j.filter(function(K){var J=K.guidelineInfos;return J.some(function(it){var lt=it.guideline;return!lt.hide})}).map(function(K){return{type:"snap",pos:K.pos}})),!1)),m.push.apply(m,N([],T(Y.filter(function(K){var J=K.guidelineInfos;return J.some(function(it){var lt=it.guideline;return!lt.hide})}).map(function(K){return{type:"snap",pos:K.pos}})),!1)),x.push.apply(x,N([],T(Ji(j)),!1)),y.push.apply(y,N([],T(Ji(Y)),!1))})}var k=Qi(t,[C,P],[D,M],g,m),F=k.boundMap,G=k.innerBoundMap;O&&Qi(t,[I.left,I.right],[I.top,I.bottom],g,m,l.externalBounds);var L=N(N([],T(x),!1),T(y),!1),W=L.filter(function(H){return H.element&&!H.gapRects}),z=L.filter(function(H){return H.gapRects}).sort(function(H,j){return H.gap-j.gap});U(t,"onSnap",{guidelines:L.filter(function(H){var j=H.element;return!j}),elements:W,gaps:z},!0);var V=te(t,"boundMap",F,function(H){return JSON.stringify(H)},Jr()),q=te(t,"innerBoundMap",G,function(H){return JSON.stringify(H)},Jr());return(F===V||G===q)&&U(t,"onBound",{bounds:F,innerBounds:G},!0),N(N(N(N(N(N([],T(fv(t,W,[c,d],R,r)),!1),T(cv(t,z,[c,d],R,r)),!1),T(Ki(t,"horizontal",y,[a,n],R,r)),!1),T(Ki(t,"vertical",x,[a,n],R,r)),!1),T(Ui(t,"horizontal",m,c,n,b,0,r)),!1),T(Ui(t,"vertical",g,d,a,E,1,r)),!1)},dragStart:function(t,r){t.state.snapRenderInfo={request:r.isRequest,snap:!0,center:!0},Ze(t)},drag:function(t){var r=t.state;Ze(t)||(r.guidelines=ma(t)),r.snapRenderInfo&&(r.snapRenderInfo.render=!0)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,r){if(Dv(t,r)||ga(t,r))return!0;if(!r.isRequest&&r.inputEvent)return Rt(r.inputEvent.target,$("snap-control"))},dragControlStart:function(t){t.state.snapRenderInfo=null,Ze(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,r){this.dragStart(t,r)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,Ze(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var r=t.state;r.enableSnap=!1,r.guidelines=[],r.snapRenderInfo=null,r.elementRects=[]}};function wv(t,r){return[t[0]*r[0],t[1]*r[1]]}function $(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Sl.apply(void 0,N([Ha],T(t),!1))}function Vs(t){t()}function Mv(t){return!t||t==="none"?[1,0,0,1,0,0]:or(t)?t:Ce(t)}function Se(t,r,e){return sn(r,Lr(e,r),t,Lr(e.map(function(n){return-n}),r))}function Tv(t,r,e){if(r==="%"){var n=Ja(t.ownerSVGElement);return n[e?"width":"height"]/100}return 1}function Ov(t){var r=Rv(ti(t,":before"));return r.map(function(e,n){var a=Pe(e),i=a.value,o=a.unit;return i*Tv(t,o,n===0)})}function dn(t){return t?t.split(" "):["0","0"]}function Rv(t){return dn(t.transformOrigin)}function qs(t){var r=jt(t),e=r("transform");if(e&&e!=="none")return e;if("transform"in t){var n=t.transform,a=n.baseVal;if(!a)return"";var i=a.length;if(!i)return"";for(var o=[],s=function(l){var f=a[l].matrix;o.push("matrix(".concat(["a","b","c","d","e","f"].map(function(v){return f[v]}).join(", "),")"))},u=0;u<i;++u)s(u);return o.join(" ")}return""}function Me(t,r,e,n,a){var i,o,s=Pa(t)||Ir(t),u=!1,l,f;if(!t||e)l=t;else{var v=(i=t==null?void 0:t.assignedSlot)===null||i===void 0?void 0:i.parentElement,c=t.parentElement;v?(u=!0,f=c,l=v):l=c}for(var d=!1,p=t===r||l===r,h="relative",g=1,m=parseFloat(a==null?void 0:a("zoom"))||1,x=a==null?void 0:a("position");l&&l!==s;){r===l&&(p=!0);var y=jt(l),S=l.tagName.toLowerCase(),_=qs(l),b=y("willChange"),E=parseFloat(y("zoom"))||1;if(h=y("position"),n&&E!==1){g=E;break}if(!e&&n&&m!==1&&x&&x!=="absolute"||S==="svg"||S==="foreignobject"||h!=="static"||_&&_!=="none"||b==="transform")break;var D=(o=t==null?void 0:t.assignedSlot)===null||o===void 0?void 0:o.parentNode,C=l.parentNode;D&&(u=!0,f=C);var M=C;if(M&&M.nodeType===11){l=M.host,d=!0,h=jt(l)("position");break}l=M,h="relative"}return{offsetZoom:g,hasSlot:u,parentSlotElement:f,isCustomElement:d,isStatic:h==="static",isEnd:p||!l||l===s,offsetParent:l||s}}function Pv(t,r){var e,n=t.tagName.toLowerCase(),a=t.offsetLeft,i=t.offsetTop,o=jt(t),s=xn(a),u=!s,l,f;return!u&&(n!=="svg"||t.ownerSVGElement)?(l=cs?Ov(t):dn(o("transformOrigin")).map(function(v){return parseFloat(v)}),f=l.slice(),u=!0,n==="svg"?(a=0,i=0):(e=T(zv(t,l,t===r&&r.tagName.toLowerCase()==="g"),4),a=e[0],i=e[1],l[0]=e[2],l[1]=e[3])):(l=dn(o("transformOrigin")).map(function(v){return parseFloat(v)}),f=l.slice()),{tagName:n,isSVG:s,hasOffset:u,offset:[a||0,i||0],origin:l,targetOrigin:f}}function js(t,r){var e=jt(t),n=jt(Ir(t)),a=n("position");if(!r&&(!a||a==="static"))return[0,0];var i=parseInt(n("marginLeft"),10),o=parseInt(n("marginTop"),10);return e("position")==="absolute"&&((e("top")!=="auto"||e("bottom")!=="auto")&&(o=0),(e("left")!=="auto"||e("right")!=="auto")&&(i=0)),[i,o]}function xa(t){t.forEach(function(r){var e=r.matrix;e&&(r.matrix=sr(e,3,4))})}function Iv(t){for(var r=t.parentElement,e=!1,n=Ir(t);r;){var a=ti(r).transform;if(a&&a!=="none"){e=!0;break}if(r===n)break;r=r.parentElement}return{fixedContainer:r||n,hasTransform:e}}function On(t,r){return r===void 0&&(r=t.length>9),"".concat(r?"matrix3d":"matrix","(").concat(ns(t,!r).join(","),")")}function Ja(t){var r=t.clientWidth,e=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:r,clientHeight:e};var n=t.viewBox,a=n&&n.baseVal||{x:0,y:0,width:0,height:0};return{x:a.x,y:a.y,width:a.width||r,height:a.height||e,clientWidth:r,clientHeight:e}}function Av(t,r){var e,n=Ja(t),a=n.width,i=n.height,o=n.clientWidth,s=n.clientHeight,u=o/a,l=s/i,f=t.preserveAspectRatio.baseVal,v=f.align,c=f.meetOrSlice,d=[0,0],p=[u,l],h=[0,0];if(v!==1){var g=(v-2)%3,m=Math.floor((v-2)/3);d[0]=a*g/2,d[1]=i*m/2;var x=c===2?Math.max(l,u):Math.min(u,l);p[0]=x,p[1]=x,h[0]=(o-a)/2*g,h[1]=(s-i)/2*m}var y=Fa(p,r);return e=T(h,2),y[r*(r-1)]=e[0],y[r*(r-1)+1]=e[1],Se(y,r,d)}function zv(t,r,e){var n=t.tagName.toLowerCase();if(!t.getBBox||!e&&n==="g")return[0,0,0,0];var a=jt(t),i=a("transform-box")==="fill-box",o=t.getBBox(),s=Ja(t.ownerSVGElement),u=o.x,l=o.y;n==="foreignobject"&&!u&&!l&&(u=parseFloat(t.getAttribute("x"))||0,l=parseFloat(t.getAttribute("y"))||0);var f=u-s.x,v=l-s.y,c=i?r[0]:r[0]-f,d=i?r[1]:r[1]-v;return[f,v,c,d]}function bt(t,r,e){return kt(t,Nr(r,e),e)}function qr(t,r,e,n){return[[0,0],[r,0],[0,e],[r,e]].map(function(a){return bt(t,a,n)})}function tr(t){var r=t.map(function(l){return l[0]}),e=t.map(function(l){return l[1]}),n=Math.min.apply(Math,N([],T(r),!1)),a=Math.min.apply(Math,N([],T(e),!1)),i=Math.max.apply(Math,N([],T(r),!1)),o=Math.max.apply(Math,N([],T(e),!1)),s=i-n,u=o-a;return{left:n,top:a,right:i,bottom:o,width:s,height:u}}function to(t,r,e,n){var a=qr(t,r,e,n);return tr(a)}function Bv(t,r,e,n,a){var i,o=t.target,s=t.origin,u=r.matrix,l=Ks(o),f=l.offsetWidth,v=l.offsetHeight,c=e.getBoundingClientRect(),d=[0,0];e===Ir(e)&&(d=js(o,!0));for(var p=o.getBoundingClientRect(),h=p.left-c.left+e.scrollLeft-(e.clientLeft||0)+d[0],g=p.top-c.top+e.scrollTop-(e.clientTop||0)+d[1],m=p.width,x=p.height,y=sn(n,a,u),S=to(y,f,v,n),_=S.left,b=S.top,E=S.width,D=S.height,C=bt(y,s,n),M=Q(C,[_,b]),P=[h+M[0]*m/E,g+M[1]*x/D],R=[0,0],O=0;++O<10;){var I=cr(a,n);i=T(Q(bt(I,P,n),bt(I,C,n)),2),R[0]=i[0],R[1]=i[1];var A=sn(n,a,Lr(R,n),u),k=to(A,f,v,n),F=k.left,G=k.top,L=F-h,W=G-g;if(B(L)<2&&B(W)<2)break;P[0]-=L,P[1]-=W}return R.map(function(z){return Math.round(z)})}function Gv(t,r,e){var n=t.length===16,a=n?4:3,i=r.map(function(u){return bt(t,u,a)}),o=e.left,s=e.top;return i.map(function(u){return[u[0]+o,u[1]+s]})}function rr(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Us(t,r){return rr([r[0]-t[0],r[1]-t[1]])}function ge(t,r,e,n){e===void 0&&(e=1),n===void 0&&(n=_t(t,r));var a=Us(t,r);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(n,"rad) scaleY(").concat(e,")"),width:"".concat(a,"px")}}function pn(t,r){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];var a=e.length,i=e.reduce(function(s,u){return s+u[0]},0)/a,o=e.reduce(function(s,u){return s+u[1]},0)/a;return{transform:"translateZ(0px) translate(".concat(i,"px, ").concat(o,"px) rotate(").concat(t,"rad) scale(").concat(r,")")}}function Hr(t,r){var e=t[r];return or(e)?w(w({},t),e):t}function Ks(t){var r=t&&!xn(t.offsetWidth),e=0,n=0,a=0,i=0,o=0,s=0,u=0,l=0,f=0,v=0,c=0,d=0,p=1/0,h=1/0,g=1/0,m=1/0,x=0,y=0,S=!1;if(t)if(!r&&t.ownerSVGElement){var _=t.getBBox();S=!0,e=_.width,n=_.height,o=e,s=n,u=e,l=n,a=e,i=n}else{var b=jt(t),E=t.style,D=b("boxSizing")==="border-box",C=parseFloat(b("borderLeftWidth"))||0,M=parseFloat(b("borderRightWidth"))||0,P=parseFloat(b("borderTopWidth"))||0,R=parseFloat(b("borderBottomWidth"))||0,O=parseFloat(b("paddingLeft"))||0,I=parseFloat(b("paddingRight"))||0,A=parseFloat(b("paddingTop"))||0,k=parseFloat(b("paddingBottom"))||0,F=O+I,G=A+k,L=C+M,W=P+R,z=F+L,V=G+W,q=b("position"),H=0,j=0;if("clientLeft"in t){var Y=null;if(q==="absolute"){var K=Me(t,Ir(t));Y=K.offsetParent}else Y=t.parentElement;if(Y){var J=jt(Y);H=parseFloat(J("width")),j=parseFloat(J("height"))}}f=Math.max(F,gt(b("minWidth"),H)||0),v=Math.max(G,gt(b("minHeight"),j)||0),p=gt(b("maxWidth"),H),h=gt(b("maxHeight"),j),isNaN(p)&&(p=1/0),isNaN(h)&&(h=1/0),x=gt(E.width,0)||0,y=gt(E.height,0)||0,o=parseFloat(b("width"))||0,s=parseFloat(b("height"))||0,u=B(o-x)<1?$n(f,x||o,p):o,l=B(s-y)<1?$n(v,y||s,h):s,e=u,n=l,a=u,i=l,D?(g=p,m=h,c=f,d=v,u=e-z,l=n-V):(g=p+z,m=h+V,c=f+z,d=v+V,e=u+z,n=l+V),a=u+F,i=l+G}return{svg:S,offsetWidth:e,offsetHeight:n,clientWidth:a,clientHeight:i,contentWidth:u,contentHeight:l,inlineCSSWidth:x,inlineCSSHeight:y,cssWidth:o,cssHeight:s,minWidth:f,minHeight:v,maxWidth:p,maxHeight:h,minOffsetWidth:c,minOffsetHeight:d,maxOffsetWidth:g,maxOffsetHeight:m}}function Zs(t,r){return _t(r>0?t[0]:t[1],r>0?t[1]:t[0])}function $e(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function $s(t,r){var e=t===Ir(t)||t===Pa(t),n={clientLeft:t.clientLeft,clientTop:t.clientTop,clientWidth:t.clientWidth,clientHeight:t.clientHeight,scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight,overflow:!1};return e&&(n.clientHeight=Math.max(r.height,n.clientHeight),n.scrollHeight=Math.max(r.height,n.scrollHeight)),n.overflow=jt(t)("overflow")!=="visible",w(w({},r),n)}function jn(t,r,e,n){var a=t.left,i=t.right,o=t.top,s=t.bottom,u=r.top,l=r.left,f={left:l+a,top:u+o,right:l+i,bottom:u+s,width:i-a,height:s-o};return e&&n?$s(e,f):f}function be(t,r){var e=0,n=0,a=0,i=0;if(t){var o=t.getBoundingClientRect();e=o.left,n=o.top,a=o.width,i=o.height}var s={left:e,top:n,width:a,height:i,right:e+a,bottom:n+i};return t&&r?$s(t,s):s}function kv(t){var r=t.props,e=r.groupable,n=r.svgOrigin,a=t.getState(),i=a.offsetWidth,o=a.offsetHeight,s=a.svg,u=a.transformOrigin;return!e&&s&&n?ai(n,i,o):u}function Js(t,r,e,n){var a;if(t)a=t;else if(r)a=[0,0];else{var i=e.target;a=Qs(i,n)}return a}function Qs(t,r){if(t){var e=t.getAttribute("data-rotation")||"",n=t.getAttribute("data-direction");if(r.deg=e,!!n){var a=[0,0];return n.indexOf("w")>-1&&(a[0]=-1),n.indexOf("e")>-1&&(a[0]=1),n.indexOf("n")>-1&&(a[1]=-1),n.indexOf("s")>-1&&(a[1]=1),a}}}function Qa(t,r){return[ft(r,t[0]),ft(r,t[1]),ft(r,t[2]),ft(r,t[3])]}function er(t){var r=t.left,e=t.top,n=t.pos1,a=t.pos2,i=t.pos3,o=t.pos4;return Qa([n,a,i,o],[r,e])}function ya(t,r){t[r?"controlAbles":"targetAbles"].forEach(function(e){e.unset&&e.unset(t)})}function Qr(t,r){var e=r?"controlGesto":"targetGesto",n=t[e];(n==null?void 0:n.isIdle())===!1&&ya(t,r),n==null||n.unset(),t[e]=null}function Ht(t,r){if(r){var e=ve(r);e.nextStyle=w(w({},e.nextStyle),t)}return{style:t,cssText:xr(t).map(function(n){return"".concat(en(n,"-"),": ").concat(t[n],";")}).join("")}}function tu(t,r,e){var n=r.afterTransform||r.transform;return w(w({},Ht(w(w(w({},t.style),r.style),{transform:n}),e)),{afterTransform:n,transform:t.transform})}function at(t,r,e,n){var a=r.datas;a.datas||(a.datas={});var i=w(w({},e),{target:t.state.target,clientX:r.clientX,clientY:r.clientY,inputEvent:r.inputEvent,currentTarget:t,moveable:t,datas:a.datas,isRequest:r.isRequest,isRequestChild:r.isRequestChild,isFirstDrag:!!r.isFirstDrag,isTrusted:r.isTrusted!==!1,stopAble:function(){a.isEventStart=!1},stopDrag:function(){var o;(o=r.stop)===null||o===void 0||o.call(r)}});return a.isStartEvent?n||(a.lastEvent=i):a.isStartEvent=!0,i}function $t(t,r,e){var n=r.datas,a="isDrag"in e?e.isDrag:r.isDrag;return n.datas||(n.datas={}),w(w({isDrag:a},e),{moveable:t,target:t.state.target,clientX:r.clientX,clientY:r.clientY,inputEvent:r.inputEvent,currentTarget:t,lastEvent:n.lastEvent,isDouble:r.isDouble,datas:n.datas,isFirstDrag:!!r.isFirstDrag})}function Rn(t,r,e){t._emitter.on(r,e)}function U(t,r,e,n,a){return t.triggerEvent(r,e,n,a)}function ti(t,r){return Mr(t).getComputedStyle(t,r)}function Je(t,r,e){var n={},a={};return t.filter(function(i){var o=i.name;if(n[o]||!r.some(function(s){return i[s]}))return!1;if(!e&&i.ableGroup){if(a[i.ableGroup])return!1;a[i.ableGroup]=!0}return n[o]=!0,!0})}function Sa(t,r){return t===r||t==null&&r==null}function ro(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=t.length-1,n=0;n<e;++n){var a=t[n];if(!xn(a))return a}return t[e]}function ru(t,r){var e=[],n=[];return t.forEach(function(a,i){var o=r(a,i,t),s=n.indexOf(o),u=e[s]||[];s===-1&&(n.push(o),e.push(u)),u.push(a)}),e}function Fv(t,r){var e=[],n={};return t.forEach(function(a,i){var o=r(a,i,t),s=n[o];s||(s=[],n[o]=s,e.push(s)),s.push(a)}),e}function eu(t){return t.reduce(function(r,e){return r.concat(e)},[])}function oe(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t.sort(function(e,n){return B(n)-B(e)}),t[0]}function se(t,r,e){return kt(cr(t,e),Nr(r,e),e)}function Nv(t,r){var e,n=t.is3d,a=t.rootMatrix,i=n?4:3;return e=T(se(a,[r.distX,r.distY],i),2),r.distX=e[0],r.distY=e[1],r}function Jt(t,r,e,n){if(!e[0]&&!e[1])return r;var a=bt(t,[$i(e[0]||1),0],n),i=bt(t,[0,$i(e[1]||1)],n),o=bt(t,[e[0]/rr(a),e[1]/rr(i)],n);return ft(r,o)}function nr(t,r,e){return e?"".concat(t/r*100,"%"):"".concat(t,"px")}function hn(t){return B(t)<=Yt?0:t}function ri(t){return function(r){if(!r.isDragging(t))return"";var e=Tc(r,t),n=e.deg;return n?$("view-control-rotation".concat(n)):""}}function ei(t,r){return r===void 0&&(r=[t]),function(e,n){if(n.isRequest)return r.some(function(i){return n.requestAble===i})?n.parentDirection:!1;var a=n.inputEvent.target;return Rt(a,$("direction"))&&(!t||Rt(a,$(t)))}}function Lv(t,r,e){var n,a=ne(t,{"x%":function(_){return _/100*r.offsetWidth},"y%":function(_){return _/100*r.offsetHeight}}),i=t.slice(0,e<0?void 0:e),o=t.slice(0,e<0?void 0:e+1),s=t[e]||"",u=e<0?[]:t.slice(e),l=e<0?[]:t.slice(e+1),f=a.slice(0,e<0?void 0:e),v=a.slice(0,e<0?void 0:e+1),c=(n=a[e])!==null&&n!==void 0?n:ne([""])[0],d=e<0?[]:a.slice(e),p=e<0?[]:a.slice(e+1),h=c?[c]:[],g=Kr(f),m=Kr(v),x=Kr(d),y=Kr(p),S=mt(g,x,4);return{transforms:t,beforeFunctionMatrix:g,beforeFunctionMatrix2:m,targetFunctionMatrix:Kr(h),afterFunctionMatrix:x,afterFunctionMatrix2:y,allFunctionMatrix:S,beforeFunctions:f,beforeFunctions2:v,targetFunction:h[0],afterFunctions:d,afterFunctions2:p,beforeFunctionTexts:i,beforeFunctionTexts2:o,targetFunctionText:s,afterFunctionTexts:u,afterFunctionTexts2:l}}function Wv(t){return!t||!or(t)||fe(t)?!1:wt(t)||"length"in t}function fr(t,r){return t?fe(t)?t:Vt(t)?r?document.querySelector(t):t:Ta(t)?t():Bo(t)?t:"current"in t?t.current:t:null}function ni(t,r){if(!t)return[];var e=Wv(t)?[].slice.call(t):[t];return e.reduce(function(n,a){return Vt(a)&&r?N(N([],T(n),!1),T([].slice.call(document.querySelectorAll(a))),!1):(wt(a)?n.push(ni(a,r)):n.push(fr(a,r)),n)},[])}function Hv(t,r,e){var n=_t(t,r)/Math.PI*180;return n=e>=0?n:180-n,n=n>=0?n:360+n,n}function eo(t,r){var e=t.rootMatrix,n=t.is3d,a=n?4:3,i=cr(e,a);return n||(i=sr(i,3,4)),i[12]=0,i[13]=0,i[14]=0,Cf(i,r)}function nu(t,r,e,n,a){var i=T(t,2),o=i[0],s=i[1],u=0,l=0;if(a&&o&&s){var f=_t([0,0],r),v=_t([0,0],n),c=rr(r),d=Math.cos(f-v)*c;if(!n[0])l=d,u=l*e;else if(!n[1])u=d,l=u/e;else{var p=n[0]*o,h=n[1]*s,g=Math.atan2(p+r[0],h+r[1]),m=Math.atan2(p,h);g<0&&(g+=Math.PI*2),m<0&&(m+=Math.PI*2);var x=0;B(g-m)<Math.PI/2||B(g-m)>Math.PI/2*3||(m+=Math.PI),x=g-m,x>Math.PI*2?x-=Math.PI*2:x>Math.PI?x=2*Math.PI-x:x<-Math.PI&&(x=-2*Math.PI-x);var y=rr([p+r[0],h+r[1]])*Math.cos(x);u=y*Math.sin(m)-p,l=y*Math.cos(m)-h,n[0]<0&&(u*=-1),n[1]<0&&(l*=-1)}}else u=n[0]*r[0],l=n[1]*r[1];return[u,l]}function au(t,r,e,n){var a,i=e.ratio,o=e.startOffsetWidth,s=e.startOffsetHeight,u=0,l=0,f=n.distX,v=n.distY,c=n.pinchScale,d=n.parentDistance,p=n.parentDist,h=n.parentScale,g=e.fixedDirection,m=[0,1].map(function(E){return B(t[E]-g[E])}),x=[0,1].map(function(E){var D=m[E];return D!==0&&(D=2/D),D});if(p)u=p[0],l=p[1],r&&(u?l||(l=u/i):u=l*i);else if(ee(c))u=(c-1)*o,l=(c-1)*s;else if(h)u=(h[0]-1)*o,l=(h[1]-1)*s;else if(d){var y=o*m[0],S=s*m[1],_=rr([y,S]);u=d/_*y*x[0],l=d/_*S*x[1]}else{var b=vr({datas:e,distX:f,distY:v});b=x.map(function(E,D){return b[D]*E}),a=T(nu([o,s],b,i,t,r),2),u=a[0],l=a[1]}return{distWidth:u,distHeight:l}}function ba(t,r){if(r){if(t==="left")return{x:"0%",y:"50%"};if(t==="top")return{x:"50%",y:"50%"};if(t==="center")return{x:"50%",y:"50%"};if(t==="right")return{x:"100%",y:"50%"};if(t==="bottom")return{x:"50%",y:"100%"};var e=T(t.split(" "),2),n=e[0],a=e[1],i=ba(n||""),o=ba(a||""),s=w(w({},i),o),u={x:"50%",y:"50%"};return s.x&&(u.x=s.x),s.y&&(u.y=s.y),s.value&&(s.x&&!s.y&&(u.y=s.value),!s.x&&s.y&&(u.x=s.value)),u}return t==="left"?{x:"0%"}:t==="right"?{x:"100%"}:t==="top"?{y:"0%"}:t==="bottom"?{y:"100%"}:t?t==="center"?{value:"50%"}:{value:t}:{}}function ai(t,r,e){var n=ba(t,!0),a=n.x,i=n.y;return[gt(a,r)||0,gt(i,e)||0]}function Yv(t,r,e){var n=t.map(function(i){return Q(i,r)}),a=n.map(function(i){return Be(i,e)});return{prev:n,next:a,result:a.map(function(i){return ft(i,r)})}}function iu(t,r){return t.length===r.length&&t.every(function(e,n){var a=r[n],i=wt(e),o=wt(a);return i&&o?iu(e,a):!i&&!o?e===a:!1})}function te(t,r,e,n,a){var i=t._store,o=i[r];if(!(r in i))if(a!=null)i[r]=a,o=a;else return i[r]=e,e;return o===e||n(o)===n(e)?o:(i[r]=e,e)}function Wt(t){return t>=0?1:-1}function B(t){return Math.abs(t)}function Un(t,r){return kl(t).map(function(e){return r(e)})}function ou(t){return ee(t)?{top:t,left:t,right:t,bottom:t}:{left:t.left||0,top:t.top||0,right:t.right||0,bottom:t.bottom||0}}var Xv=Fe("pinchable",{props:["pinchable"],events:["pinchStart","pinch","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd"],dragStart:function(){return!0},pinchStart:function(t,r){var e=r.datas,n=r.targets,a=r.angle,i=r.originalDatas,o=t.props,s=o.pinchable,u=o.ables;if(!s)return!1;var l="onPinch".concat(n?"Group":"","Start"),f="drag".concat(n?"Group":"","ControlStart"),v=(s===!0?t.controlAbles:u.filter(function(h){return s.indexOf(h.name)>-1})).filter(function(h){return h.canPinch&&h[f]}),c=at(t,r,{});n&&(c.targets=n);var d=U(t,l,c);e.isPinch=d!==!1,e.ables=v;var p=e.isPinch;return p?(v.forEach(function(h){if(i[h.name]=i[h.name]||{},!!h[f]){var g=w(w({},r),{datas:i[h.name],parentRotate:a,isPinch:!0});h[f](t,g)}}),t.state.snapRenderInfo={request:r.isRequest,direction:[0,0]},p):!1},pinch:function(t,r){var e=r.datas,n=r.scale,a=r.distance,i=r.originalDatas,o=r.inputEvent,s=r.targets,u=r.angle;if(e.isPinch){var l=a*(1-1/n),f=at(t,r,{});s&&(f.targets=s);var v="onPinch".concat(s?"Group":"");U(t,v,f);var c=e.ables,d="drag".concat(s?"Group":"","Control");return c.forEach(function(p){p[d]&&p[d](t,w(w({},r),{datas:i[p.name],inputEvent:o,resolveMatrix:!0,pinchScale:n,parentDistance:l,parentRotate:u,isPinch:!0}))}),f}},pinchEnd:function(t,r){var e=r.datas,n=r.isPinch,a=r.inputEvent,i=r.targets,o=r.originalDatas;if(e.isPinch){var s="onPinch".concat(i?"Group":"","End"),u=$t(t,r,{isDrag:n});i&&(u.targets=i),U(t,s,u);var l=e.ables,f="drag".concat(i?"Group":"","ControlEnd");return l.forEach(function(v){v[f]&&v[f](t,w(w({},r),{isDrag:n,datas:o[v.name],inputEvent:a,isPinch:!0}))}),n}},pinchGroupStart:function(t,r){return this.pinchStart(t,w(w({},r),{targets:t.props.targets}))},pinchGroup:function(t,r){return this.pinch(t,w(w({},r),{targets:t.props.targets}))},pinchGroupEnd:function(t,r){return this.pinchEnd(t,w(w({},r),{targets:t.props.targets}))}}),no=ei("scalable"),Vv={name:"scalable",ableGroup:"size",canPinch:!0,props:["scalable","throttleScale","renderDirections","keepRatio","edge","displayAroundControls"],events:["scaleStart","beforeScale","scale","scaleEnd","scaleGroupStart","beforeScaleGroup","scaleGroup","scaleGroupEnd"],render:ws("scalable"),dragControlCondition:no,viewClassName:ri("scalable"),dragControlStart:function(t,r){var e=r.datas,n=r.isPinch,a=r.inputEvent,i=r.parentDirection,o=Js(i,n,a,e),s=t.state,u=s.width,l=s.height,f=s.targetTransform,v=s.target,c=s.pos1,d=s.pos2,p=s.pos4;if(!o||!v)return!1;n||Vr(t,r),e.datas={},e.transform=f,e.prevDist=[1,1],e.direction=o,e.startOffsetWidth=u,e.startOffsetHeight=l,e.startValue=[1,1];var h=!o[0]&&!o[1]||o[0]||!o[1];Cn(t,r,"scale"),e.isWidth=h;function g(b){e.ratio=b&&isFinite(b)?b:0}e.startPositions=er(t.state);function m(b){var E=Fs(e.startPositions,b);e.fixedDirection=E.fixedDirection,e.fixedPosition=E.fixedPosition,e.fixedOffset=E.fixedOffset}e.setFixedDirection=m,g(pr(c,d)/pr(d,p)),m([-o[0],-o[1]]);var x=function(b){e.minScaleSize=b},y=function(b){e.maxScaleSize=b};x([-1/0,-1/0]),y([1/0,1/0]);var S=at(t,r,w(w({direction:o,set:function(b){e.startValue=b},setRatio:g,setFixedDirection:m,setMinScaleSize:x,setMaxScaleSize:y},Dn(t,r)),{dragStart:Lt.dragStart(t,new ae().dragStart([0,0],r))})),_=U(t,"onScaleStart",S);return e.startFixedDirection=e.fixedDirection,_!==!1&&(e.isScale=!0,t.state.snapRenderInfo={request:r.isRequest,direction:o}),e.isScale?S:!1},dragControl:function(t,r){_n(t,r,"scale");var e=r.datas,n=r.parentKeepRatio,a=r.parentFlag,i=r.isPinch,o=r.dragClient,s=r.isRequest,u=r.useSnap,l=r.resolveMatrix,f=e.prevDist,v=e.direction,c=e.startOffsetWidth,d=e.startOffsetHeight,p=e.isScale,h=e.startValue,g=e.isWidth,m=e.ratio;if(!p)return!1;var x=t.props,y=x.throttleScale,S=x.parentMoveable,_=v;!v[0]&&!v[1]&&(_=[1,1]);var b=m&&(n??x.keepRatio)||!1,E=t.state,D=[h[0],h[1]];function C(){var X=au(_,b,e,r),Z=X.distWidth,vt=X.distHeight,et=c?(c+Z)/c:1,nt=d?(d+vt)/d:1;h[0]||(D[0]=Z/c),h[1]||(D[1]=vt/d);var st=(_[0]||b?et:1)*D[0],pt=(_[1]||b?nt:1)*D[1];return st===0&&(st=Wt(f[0])*je),pt===0&&(pt=Wt(f[1])*je),[st,pt]}var M=C();if(!i&&t.props.groupable){var P=E.snapRenderInfo||{},R=P.direction;wt(R)&&(R[0]||R[1])&&(E.snapRenderInfo={direction:v,request:r.isRequest})}U(t,"onBeforeScale",at(t,r,{scale:M,setFixedDirection:function(X){return e.setFixedDirection(X),M=C(),M},startFixedDirection:e.startFixedDirection,setScale:function(X){M=X}},!0));var O=[M[0]/D[0],M[1]/D[1]],I=o,A=[0,0],k=Wt(O[0]*O[1]),F=!o&&!a&&i;if(F||l?I=Va(t,e.targetAllTransform,[0,0],[0,0],e):o||(I=e.fixedPosition),i||(A=_v(t,O,v,!u&&s,e)),b){_[0]&&_[1]&&A[0]&&A[1]&&(Math.abs(A[0]*c)>Math.abs(A[1]*d)?A[1]=0:A[0]=0);var G=!A[0]&&!A[1];if(G&&(g?O[0]=rt(O[0]*D[0],y)/D[0]:O[1]=rt(O[1]*D[1],y)/D[1]),_[0]&&!_[1]||A[0]&&!A[1]||G&&g){O[0]+=A[0];var L=c*O[0]*D[0]/m;O[1]=Wt(k*O[0])*B(L/d/D[1])}else if(!_[0]&&_[1]||!A[0]&&A[1]||G&&!g){O[1]+=A[1];var W=d*O[1]*D[1]*m;O[0]=Wt(k*O[1])*B(W/c/D[0])}}else O[0]+=A[0],O[1]+=A[1],A[0]||(O[0]=rt(O[0]*D[0],y)/D[0]),A[1]||(O[1]=rt(O[1]*D[1],y)/D[1]);O[0]===0&&(O[0]=Wt(f[0])*je),O[1]===0&&(O[1]=Wt(f[1])*je),M=wv(O,[D[0],D[1]]);var z=[c,d],V=[c*M[0],d*M[1]];V=Ro(V,e.minScaleSize,e.maxScaleSize,b?m:!1),M=Un(2,function(X){return z[X]?V[X]/z[X]:V[X]}),O=Un(2,function(X){return M[X]/D[X]});var q=Un(2,function(X){return f[X]?O[X]/f[X]:O[X]}),H="scale(".concat(O.join(", "),")"),j="scale(".concat(M.join(", "),")"),Y=En(e,j,H),K=!h[0]||!h[1],J=_c(t,K?j:H,e.fixedDirection,I,e.fixedOffset,e,K),it=F?J:Q(J,e.prevInverseDist||[0,0]);if(e.prevDist=O,e.prevInverseDist=J,M[0]===f[0]&&M[1]===f[1]&&it.every(function(X){return!X})&&!S&&!F)return!1;var lt=at(t,r,w({offsetWidth:c,offsetHeight:d,direction:v,scale:M,dist:O,delta:q,isPinch:!!i},Ss(t,Y,it,i,r)));return U(t,"onScale",lt),lt},dragControlEnd:function(t,r){var e=r.datas;if(!e.isScale)return!1;e.isScale=!1;var n=$t(t,r,{});return U(t,"onScaleEnd",n),n},dragGroupControlCondition:no,dragGroupControlStart:function(t,r){var e=r.datas,n=this.dragControlStart(t,r);if(!n)return!1;var a=ir(t,"resizable",r);e.moveableScale=t.scale;var i=hr(t,this,"dragControlStart",r,function(l,f){return fn(t,l,e,f)}),o=function(l){n.setFixedDirection(l),i.forEach(function(f,v){f.setFixedDirection(l),fn(t,f.moveable,e,a[v])})};e.setFixedDirection=o;var s=w(w({},n),{targets:t.props.targets,events:i,setFixedDirection:o}),u=U(t,"onScaleGroupStart",s);return e.isScale=u!==!1,e.isScale?s:!1},dragGroupControl:function(t,r){var e=r.datas;if(e.isScale){Rn(t,"onBeforeScale",function(f){U(t,"onBeforeScaleGroup",at(t,r,w(w({},f),{targets:t.props.targets}),!0))});var n=this.dragControl(t,r);if(n){var a=n.dist,i=e.moveableScale;t.scale=[a[0]*i[0],a[1]*i[1]];var o=t.props.keepRatio,s=e.fixedPosition,u=hr(t,this,"dragControl",r,function(f,v){var c=T(kt(Ge(t.rotation/180*Math.PI,3),[v.datas.originalX*a[0],v.datas.originalY*a[1],1],3),2),d=c[0],p=c[1];return w(w({},v),{parentDist:null,parentScale:a,parentKeepRatio:o,dragClient:ft(s,[d,p])})}),l=w({targets:t.props.targets,events:u},n);return U(t,"onScaleGroup",l),l}}},dragGroupControlEnd:function(t,r){var e=r.isDrag,n=r.datas;if(n.isScale){this.dragControlEnd(t,r);var a=hr(t,this,"dragControlEnd",r),i=$t(t,r,{targets:t.props.targets,events:a});return U(t,"onScaleGroupEnd",i),e}},request:function(){var t={},r=0,e=0,n=!1;return{isControl:!0,requestStart:function(a){return n=a.useSnap,{datas:t,parentDirection:a.direction||[1,1],useSnap:n}},request:function(a){return r+=a.deltaWidth,e+=a.deltaHeight,{datas:t,parentDist:[r,e],parentKeepRatio:a.keepRatio,useSnap:n}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:n}}}}};function Er(t,r){return t.map(function(e,n){return an(e,r[n],1,2)})}function ao(t,r,e){var n=_t(t,r),a=_t(t,e),i=a-n;return i>=0?i:i+2*Math.PI}function qv(t,r){var e=ao(t[0],t[1],t[2]),n=ao(r[0],r[1],r[2]),a=Math.PI;return!(e>=a&&n<=a||e<=a&&n>=a)}var jv={name:"warpable",ableGroup:"size",props:["warpable","renderDirections","edge","displayAroundControls"],events:["warpStart","warp","warpEnd"],viewClassName:ri("warpable"),render:function(t,r){var e=t.props,n=e.resizable,a=e.scalable,i=e.warpable,o=e.zoom;if(n||a||!i)return[];var s=t.state,u=s.pos1,l=s.pos2,f=s.pos3,v=s.pos4,c=Er(u,l),d=Er(l,u),p=Er(u,f),h=Er(f,u),g=Er(f,v),m=Er(v,f),x=Er(l,v),y=Er(v,l);return N([r.createElement("div",{className:$("line"),key:"middeLine1",style:ge(c,g,o)}),r.createElement("div",{className:$("line"),key:"middeLine2",style:ge(d,m,o)}),r.createElement("div",{className:$("line"),key:"middeLine3",style:ge(p,x,o)}),r.createElement("div",{className:$("line"),key:"middeLine4",style:ge(h,y,o)})],T(Ms(t,"warpable",r)),!1)},dragControlCondition:function(t,r){if(r.isRequest)return!1;var e=r.inputEvent.target;return Rt(e,$("direction"))&&Rt(e,$("warpable"))},dragControlStart:function(t,r){var e=r.datas,n=r.inputEvent,a=t.props.target,i=n.target,o=Qs(i,e);if(!o||!a)return!1;var s=t.state,u=s.transformOrigin,l=s.is3d,f=s.targetTransform,v=s.targetMatrix,c=s.width,d=s.height,p=s.left,h=s.top;e.datas={},e.targetTransform=f,e.warpTargetMatrix=l?v:sr(v,3,4),e.targetInverseMatrix=rs(cr(e.warpTargetMatrix,4),3,4),e.direction=o,e.left=p,e.top=h,e.poses=[[0,0],[c,0],[0,d],[c,d]].map(function(x){return Q(x,u)}),e.nextPoses=e.poses.map(function(x){var y=T(x,2),S=y[0],_=y[1];return kt(e.warpTargetMatrix,[S,_,0,1],4)}),e.startValue=St(4),e.prevMatrix=St(4),e.absolutePoses=er(s),e.posIndexes=ys(o),Vr(t,r),Cn(t,r,"matrix3d"),s.snapRenderInfo={request:r.isRequest,direction:o};var g=at(t,r,w({set:function(x){e.startValue=x}},Dn(t,r))),m=U(t,"onWarpStart",g);return m!==!1&&(e.isWarp=!0),e.isWarp},dragControl:function(t,r){var e=r.datas,n=r.isRequest,a=r.distX,i=r.distY,o=e.targetInverseMatrix,s=e.prevMatrix,u=e.isWarp,l=e.startValue,f=e.poses,v=e.posIndexes,c=e.absolutePoses;if(!u)return!1;if(_n(t,r,"matrix3d"),de(t,"warpable")){var d=v.map(function(C){return c[C]});d.length>1&&d.push([(d[0][0]+d[1][0])/2,(d[0][1]+d[1][1])/2]);var p=Tn(t,n,{horizontal:d.map(function(C){return C[1]+i}),vertical:d.map(function(C){return C[0]+a})}),h=p.horizontal,g=p.vertical;i-=h.offset,a-=g.offset}var m=vr({datas:e,distX:a,distY:i},!0),x=e.nextPoses.slice();if(v.forEach(function(C){x[C]=ft(x[C],m)}),!vc.every(function(C){return qv(C.map(function(M){return f[M]}),C.map(function(M){return x[M]}))}))return!1;var y=Na(f[0],f[2],f[1],f[3],x[0],x[2],x[1],x[3]);if(!y.length)return!1;var S=mt(o,y,4),_=ms(e,S,!0),b=mt(cr(s,4),_,4);e.prevMatrix=_;var E=mt(l,_,4),D=En(e,"matrix3d(".concat(E.join(", "),")"),"matrix3d(".concat(_.join(", "),")"));return Xa(r,D),U(t,"onWarp",at(t,r,w({delta:b,matrix:E,dist:_,multiply:mt,transform:D},Ht({transform:D},r)))),!0},dragControlEnd:function(t,r){var e=r.datas,n=r.isDrag;return e.isWarp?(e.isWarp=!1,U(t,"onWarpEnd",$t(t,r,{})),n):!1}},Uv=$("area-pieces"),Qe=$("area-piece"),su=$("avoid"),Kv=$("view-dragging");function Kn(t){var r=t.areaElement;if(r){var e=t.state,n=e.width,a=e.height;zo(r,su),r.style.cssText+="left: 0px; top: 0px; width: ".concat(n,"px; height: ").concat(a,"px")}}function io(t){return t.createElement("div",{key:"area_pieces",className:Uv},t.createElement("div",{className:Qe}),t.createElement("div",{className:Qe}),t.createElement("div",{className:Qe}),t.createElement("div",{className:Qe}))}var uu={name:"dragArea",props:["dragArea","passDragArea"],events:["click","clickGroup"],render:function(t,r){var e=t.props,n=e.target,a=e.dragArea,i=e.groupable,o=e.passDragArea,s=t.getState(),u=s.width,l=s.height,f=s.renderPoses,v=o?$("area","pass"):$("area");if(i)return[r.createElement("div",{key:"area",ref:dr(t,"areaElement"),className:v}),io(r)];if(!n||!a)return[];var c=Na([0,0],[u,0],[0,l],[u,l],f[0],f[1],f[2],f[3]),d=c.length?On(c,!0):"none";return[r.createElement("div",{key:"area",ref:dr(t,"areaElement"),className:v,style:{top:"0px",left:"0px",width:"".concat(u,"px"),height:"".concat(l,"px"),transformOrigin:"0 0",transform:d}}),io(r)]},dragStart:function(t,r){var e=r.datas,n=r.clientX,a=r.clientY,i=r.inputEvent;if(!i)return!1;e.isDragArea=!1;var o=t.areaElement,s=t.state,u=s.moveableClientRect,l=s.renderPoses,f=s.rootMatrix,v=s.is3d,c=u.left,d=u.top,p=tr(l),h=p.left,g=p.top,m=p.width,x=p.height,y=v?4:3,S=T(se(f,[n-c,a-d],y),2),_=S[0],b=S[1];_-=h,b-=g;var E=[{left:h,top:g,width:m,height:b-10},{left:h,top:g,width:_-10,height:x},{left:h,top:g+b+10,width:m,height:x-b-10},{left:h+_+10,top:g,width:m-_-10,height:x}],D=[].slice.call(o.nextElementSibling.children);E.forEach(function(C,M){D[M].style.cssText="left: ".concat(C.left,"px;top: ").concat(C.top,"px; width: ").concat(C.width,"px; height: ").concat(C.height,"px;")}),Ao(o,su),s.disableNativeEvent=!0},drag:function(t,r){var e=r.datas,n=r.inputEvent;if(this.enableNativeEvent(t),!n)return!1;e.isDragArea||(e.isDragArea=!0,Kn(t))},dragEnd:function(t,r){this.enableNativeEvent(t);var e=r.inputEvent,n=r.datas;if(!e)return!1;n.isDragArea||Kn(t)},dragGroupStart:function(t,r){return this.dragStart(t,r)},dragGroup:function(t,r){return this.drag(t,r)},dragGroupEnd:function(t,r){return this.dragEnd(t,r)},unset:function(t){Kn(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var r=t.state;r.disableNativeEvent&&Oo(function(){r.disableNativeEvent=!1})}},Zv=Fe("origin",{props:["origin","svgOrigin"],render:function(t,r){var e=t.props,n=e.zoom,a=e.svgOrigin,i=e.groupable,o=t.getState(),s=o.beforeOrigin,u=o.rotation,l=o.svg,f=o.allMatrix,v=o.is3d,c=o.left,d=o.top,p=o.offsetWidth,h=o.offsetHeight,g;if(!i&&l&&a){var m=T(ai(a,p,h),2),x=m[0],y=m[1],S=v?4:3,_=bt(f,[x,y],S);g=pn(u,n,Q(_,[c,d]))}else g=pn(u,n,s);return[r.createElement("div",{className:$("control","origin"),style:g,key:"beforeOrigin"})]}});function $v(t){var r=t.scrollContainer;return[r.scrollLeft,r.scrollTop]}var Jv={name:"scrollable",canPinch:!0,props:["scrollable","scrollContainer","scrollThreshold","scrollThrottleTime","getScrollPosition","scrollOptions"],events:["scroll","scrollGroup"],dragRelation:"strong",dragStart:function(t,r){var e=t.props,n=e.scrollContainer,a=n===void 0?t.getContainer():n,i=e.scrollOptions,o=new Pf,s=fr(a,!0);r.datas.dragScroll=o,t.state.dragScroll=o;var u=r.isControl?"controlGesto":"targetGesto",l=r.targets;o.on("scroll",function(f){var v=f.container,c=f.direction,d=at(t,r,{scrollContainer:v,direction:c}),p=l?"onScrollGroup":"onScroll";l&&(d.targets=l),U(t,p,d)}).on("move",function(f){var v=f.offsetX,c=f.offsetY,d=f.inputEvent;t[u].scrollBy(v,c,d.inputEvent,!1)}).on("scrollDrag",function(f){var v=f.next;v(t[u].getCurrentEvent())}),o.dragStart(r,w({container:s},i))},checkScroll:function(t,r){var e=r.datas.dragScroll;if(e){var n=t.props,a=n.scrollContainer,i=a===void 0?t.getContainer():a,o=n.scrollThreshold,s=o===void 0?0:o,u=n.scrollThrottleTime,l=u===void 0?0:u,f=n.getScrollPosition,v=f===void 0?$v:f,c=n.scrollOptions;return e.drag(r,w({container:i,threshold:s,throttleTime:l,getScrollPosition:function(d){return v({scrollContainer:d.container,direction:d.direction})}},c)),!0}},drag:function(t,r){return this.checkScroll(t,r)},dragEnd:function(t,r){r.datas.dragScroll.dragEnd(),r.datas.dragScroll=null},dragControlStart:function(t,r){return this.dragStart(t,w(w({},r),{isControl:!0}))},dragControl:function(t,r){return this.drag(t,r)},dragControlEnd:function(t,r){return this.dragEnd(t,r)},dragGroupStart:function(t,r){return this.dragStart(t,w(w({},r),{targets:t.props.targets}))},dragGroup:function(t,r){return this.drag(t,w(w({},r),{targets:t.props.targets}))},dragGroupEnd:function(t,r){return this.dragEnd(t,w(w({},r),{targets:t.props.targets}))},dragGroupControlStart:function(t,r){return this.dragStart(t,w(w({},r),{targets:t.props.targets,isControl:!0}))},dragGroupControl:function(t,r){return this.drag(t,w(w({},r),{targets:t.props.targets}))},dragGroupControEnd:function(t,r){return this.dragEnd(t,w(w({},r),{targets:t.props.targets}))},unset:function(t){var r,e=t.state;(r=e.dragScroll)===null||r===void 0||r.dragEnd(),e.dragScroll=null}},lu={name:"",props:["target","dragTargetSelf","dragTarget","dragContainer","container","warpSelf","rootContainer","useResizeObserver","useMutationObserver","zoom","dragFocusedInput","transformOrigin","ables","className","pinchThreshold","pinchOutside","triggerAblesSimultaneously","checkInput","cspNonce","translateZ","hideDefaultLines","props","flushSync","stopPropagation","preventClickEventOnDrag","preventClickDefault","viewContainer","persistData","useAccuratePosition","firstRenderState","linePadding","controlPadding","preventDefault","preventRightClick","preventWheelClick","requestStyles"],events:["changeTargets"]},Qv=Fe("padding",{props:["padding"],render:function(t,r){var e=t.props;if(e.dragArea)return[];var n=ou(e.padding||{}),a=n.left,i=n.top,o=n.right,s=n.bottom,u=t.getState(),l=u.renderPoses,f=u.pos1,v=u.pos2,c=u.pos3,d=u.pos4,p=[f,v,c,d],h=[];return a>0&&h.push([0,2]),i>0&&h.push([0,1]),o>0&&h.push([1,3]),s>0&&h.push([2,3]),h.map(function(g,m){var x=T(g,2),y=x[0],S=x[1],_=p[y],b=p[S],E=l[y],D=l[S],C=Na([0,0],[100,0],[0,100],[100,100],_,b,E,D);if(C.length)return r.createElement("div",{key:"padding".concat(m),className:$("padding"),style:{transform:On(C,!0)}})})}}),oo=["nw","ne","se","sw"];function tn(t,r){var e=t[0]+t[1],n=e>r?r/e:1;return t[0]*=n,t[1]=r-t[1]*n,t}var td=[1,2,5,6],rd=[0,3,4,7],Br=[1,-1,-1,1],Gr=[1,1,-1,-1];function ii(t,r,e,n,a,i,o,s){a===void 0&&(a=0),i===void 0&&(i=0),o===void 0&&(o=e),s===void 0&&(s=n);var u=[],l=!1,f=t.filter(function(c){return!c.virtual}),v=f.map(function(c){var d=c.horizontal,p=c.vertical,h=c.pos;if(p&&!l&&(l=!0,u.push("/")),l){var g=Math.max(0,p===1?h[1]-i:s-h[1]);return u.push(nr(g,n,r)),g}else{var g=Math.max(0,d===1?h[0]-a:o-h[0]);return u.push(nr(g,e,r)),g}});return{radiusPoses:f,styles:u,raws:v}}function fu(t){for(var r=[0,0],e=[0,0],n=t.length,a=0;a<n;++a){var i=t[a];i.sub&&(i.horizontal&&(r[1]===0&&(r[0]=a),r[1]=a-r[0]+1,e[0]=a+1),i.vertical&&(e[1]===0&&(e[0]=a),e[1]=a-e[0]+1))}return{horizontalRange:r,verticalRange:e}}function cu(t,r,e,n,a,i,o){var s,u,l,f;i===void 0&&(i=[0,0]),o===void 0&&(o=!1);var v=t.indexOf("/"),c=(v>-1?t.slice(0,v):t).length,d=t.slice(0,c),p=t.slice(c+1),h=d.length,g=p.length,m=g>0,x=T(d,4),y=x[0],S=y===void 0?"0px":y,_=x[1],b=_===void 0?S:_,E=x[2],D=E===void 0?S:E,C=x[3],M=C===void 0?b:C,P=T(p,4),R=P[0],O=R===void 0?S:R,I=P[1],A=I===void 0?m?O:b:I,k=P[2],F=k===void 0?m?O:D:k,G=P[3],L=G===void 0?m?A:M:G,W=[S,b,D,M].map(function(Y){return gt(Y,r)}),z=[O,A,F,L].map(function(Y){return gt(Y,e)}),V=W.slice(),q=z.slice();s=T(tn([V[0],V[1]],r),2),V[0]=s[0],V[1]=s[1],u=T(tn([V[3],V[2]],r),2),V[3]=u[0],V[2]=u[1],l=T(tn([q[0],q[3]],e),2),q[0]=l[0],q[3]=l[1],f=T(tn([q[1],q[2]],e),2),q[1]=f[0],q[2]=f[1];var H=o?V:V.slice(0,Math.max(i[0],h)),j=o?q:q.slice(0,Math.max(i[1],g));return N(N([],T(H.map(function(Y,K){var J=oo[K];return{virtual:K>=h,horizontal:Br[K],vertical:0,pos:[n+Y,a+(Gr[K]===-1?e:0)],sub:!0,raw:W[K],direction:J}})),!1),T(j.map(function(Y,K){var J=oo[K];return{virtual:K>=g,horizontal:0,vertical:Gr[K],pos:[n+(Br[K]===-1?r:0),a+Y],sub:!0,raw:z[K],direction:J}})),!1)}function ed(t,r,e,n,a){a===void 0&&(a=r.length);var i=fu(t.slice(n)),o=i.horizontalRange,s=i.verticalRange,u=e-n,l=0;if(u===0)l=a;else if(u>0&&u<o[1])l=o[1]-u;else if(u>=s[0])l=s[0]+s[1]-u;else return;t.splice(e,l),r.splice(e,l)}function nd(t,r,e,n,a,i,o,s,u,l,f){l===void 0&&(l=0),f===void 0&&(f=0);var v=fu(t.slice(e)),c=v.horizontalRange,d=v.verticalRange;if(n>-1)for(var p=Br[n]===1?i-l:s-i,h=c[1];h<=n;++h){var g=Gr[h]===1?f:u,m=0;if(n===h?m=i:h===0?m=l+p:Br[h]===-1&&(m=s-(r[e][0]-l)),t.splice(e+h,0,{horizontal:Br[h],vertical:0,pos:[m,g]}),r.splice(e+h,0,[m,g]),h===0)break}else if(a>-1){var x=Gr[a]===1?o-f:u-o;if(c[1]===0&&d[1]===0){var y=[l+x,f];t.push({horizontal:Br[0],vertical:0,pos:y}),r.push(y)}for(var S=d[0],h=d[1];h<=a;++h){var m=Br[h]===1?l:s,g=0;if(a===h?g=o:h===0?g=f+x:Gr[h]===1?g=r[e+S][1]:Gr[h]===-1&&(g=u-(r[e+S][1]-f)),t.push({horizontal:0,vertical:Gr[h],pos:[m,g]}),r.push([m,g]),h===0)break}}}function ad(t,r){r===void 0&&(r=t.map(function(a){return a.raw}));var e=t.map(function(a,i){return a.horizontal?r[i]:null}).filter(function(a){return a!=null}),n=t.map(function(a,i){return a.vertical?r[i]:null}).filter(function(a){return a!=null});return{horizontals:e,verticals:n}}var id=[[0,-1,"n"],[1,0,"e"]],od=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function oi(t,r,e){var n=t.props.clipRelative,a=t.state,i=a.width,o=a.height,s=r,u=s.type,l=s.poses,f=u==="rect",v=u==="circle";if(u==="polygon")return e.map(function(b){return"".concat(nr(b[0],i,n)," ").concat(nr(b[1],o,n))});if(f||u==="inset"){var c=e[1][1],d=e[3][0],p=e[7][0],h=e[5][1];if(f)return[c,d,h,p].map(function(b){return"".concat(b,"px")});var g=[c,i-d,o-h,p].map(function(b,E){return nr(b,E%2?i:o,n)});if(e.length>8){var m=T(Q(e[4],e[0]),2),x=m[0],y=m[1];g.push.apply(g,N(["round"],T(ii(l.slice(8).map(function(b,E){return w(w({},b),{pos:e[E]})}),n,x,y,p,c,d,h).styles),!1))}return g}else if(v||u==="ellipse"){var S=e[0],_=nr(B(e[1][1]-S[1]),v?Math.sqrt((i*i+o*o)/2):o,n),g=v?[_]:[nr(B(e[2][0]-S[0]),i,n),_];return g.push("at",nr(S[0],i,n),nr(S[1],o,n)),g}}function gn(t,r,e,n){var a=[n,(n+r)/2,r],i=[t,(t+e)/2,e];return od.map(function(o){var s=T(o,3),u=s[0],l=s[1],f=s[2],v=a[u+1],c=i[l+1];return{vertical:B(l),horizontal:B(u),direction:f,pos:[v,c]}})}function vu(t){var r=[1/0,-1/0],e=[1/0,-1/0];return t.forEach(function(n){var a=n.pos;r[0]=Math.min(r[0],a[0]),r[1]=Math.max(r[1],a[0]),e[0]=Math.min(e[0],a[1]),e[1]=Math.max(e[1],a[1])}),[B(r[1]-r[0]),B(e[1]-e[0])]}function so(t,r,e,n,a){var i,o,s,u,l,f,v,c,d;if(t){var p=a;if(!p){var h=jt(t),g=h("clipPath");p=g!=="none"?g:h("clip")}if(!((!p||p==="none"||p==="auto")&&(p=n,!p))){var m=To(p),x=m.prefix,y=x===void 0?p:x,S=m.value,_=S===void 0?"":S,b=y==="circle",E=" ";if(y==="polygon"){var D=Fr(_||"0% 0%, 100% 0%, 100% 100%, 0% 100%");E=",";var C=D.map(function(It){var Ft=T(It.split(" "),2),Gt=Ft[0],Et=Ft[1];return{vertical:1,horizontal:1,pos:[gt(Gt,r),gt(Et,e)]}}),M=Wr(C.map(function(It){return It.pos}));return{type:y,clipText:p,poses:C,splitter:E,left:M.minX,right:M.maxX,top:M.minY,bottom:M.maxY}}else if(b||y==="ellipse"){var P="",R="",O=0,I=0,D=Or(_);if(b){var A="";i=T(D,4),o=i[0],A=o===void 0?"50%":o,s=i[2],P=s===void 0?"50%":s,u=i[3],R=u===void 0?"50%":u,O=gt(A,Math.sqrt((r*r+e*e)/2)),I=O}else{var k="",F="";l=T(D,5),f=l[0],k=f===void 0?"50%":f,v=l[1],F=v===void 0?"50%":v,c=l[3],P=c===void 0?"50%":c,d=l[4],R=d===void 0?"50%":d,O=gt(k,r),I=gt(F,e)}var G=[gt(P,r),gt(R,e)],C=N([{vertical:1,horizontal:1,pos:G,direction:"nesw"}],T(id.slice(0,b?1:2).map(function(Gt){return{vertical:B(Gt[1]),horizontal:Gt[0],direction:Gt[2],sub:!0,pos:[G[0]+Gt[0]*O,G[1]+Gt[1]*I]}})),!1);return{type:y,clipText:p,radiusX:O,radiusY:I,left:G[0]-O,top:G[1]-I,right:G[0]+O,bottom:G[1]+I,poses:C,splitter:E}}else if(y==="inset"){var D=Or(_||"0 0 0 0"),L=D.indexOf("round"),W=(L>-1?D.slice(0,L):D).length,z=D.slice(W+1),V=T(D.slice(0,W),4),q=V[0],H=V[1],j=H===void 0?q:H,Y=V[2],K=Y===void 0?q:Y,J=V[3],it=J===void 0?j:J,lt=T([q,K].map(function(Gt){return gt(Gt,e)}),2),X=lt[0],Z=lt[1],vt=T([it,j].map(function(Gt){return gt(Gt,r)}),2),et=vt[0],nt=vt[1],st=r-nt,pt=e-Z,xt=cu(z,st-et,pt-X,et,X),C=N(N([],T(gn(X,st,pt,et)),!1),T(xt),!1);return{type:"inset",clipText:p,poses:C,top:X,left:et,right:st,bottom:pt,radius:z,splitter:E}}else if(y==="rect"){var D=Fr(_||"0px, ".concat(r,"px, ").concat(e,"px, 0px"));E=",";var ot=T(D.map(function(Sr){var br=Pe(Sr).value;return br}),4),dt=ot[0],nt=ot[1],Z=ot[2],et=ot[3],C=gn(dt,nt,Z,et);return{type:"rect",clipText:p,poses:C,top:dt,right:nt,bottom:Z,left:et,values:D,splitter:E}}}}}function sd(t,r,e,n,a){var i=t[r],o=i.direction,s=i.sub,u=t.map(function(){return[0,0]}),l=o?o.split(""):[];if(n&&r<8){var f=l.filter(function(O){return O==="w"||O==="e"}),v=l.filter(function(O){return O==="n"||O==="s"}),c=f[0],d=v[0];u[r]=e;var p=T(vu(t),2),h=p[0],g=p[1],m=h&&g?h/g:0;if(m&&a){var x=(r+4)%8,y=t[x].pos,S=[0,0];o.indexOf("w")>-1?S[0]=-1:o.indexOf("e")>-1&&(S[0]=1),o.indexOf("n")>-1?S[1]=-1:o.indexOf("s")>-1&&(S[1]=1);var _=nu([h,g],e,m,S,!0),b=h+_[0],E=g+_[1],D=y[1],C=y[1],M=y[0],P=y[0];S[0]===-1?M=P-b:S[0]===1?P=M+b:(M=M-b/2,P=P+b/2),S[1]===-1?D=C-E:(S[1]===1||(D=C-E/2),C=D+E);var R=gn(D,P,C,M);t.forEach(function(O,I){u[I][0]=R[I].pos[0]-O.pos[0],u[I][1]=R[I].pos[1]-O.pos[1]})}else t.forEach(function(O,I){var A=O.direction;A&&(A.indexOf(c)>-1&&(u[I][0]=e[0]),A.indexOf(d)>-1&&(u[I][1]=e[1]))}),c&&(u[1][0]=e[0]/2,u[5][0]=e[0]/2),d&&(u[3][1]=e[1]/2,u[7][1]=e[1]/2)}else o&&!s?l.forEach(function(O){var I=O==="n"||O==="s";t.forEach(function(A,k){var F=A.direction,G=A.horizontal,L=A.vertical;!F||F.indexOf(O)===-1||(u[k]=[I||!G?0:e[0],!I||!L?0:e[1]])})}):u[r]=e;return u}function ud(t,r){var e=T(gs(t,r),2),n=e[0],a=e[1],i=r.datas,o=i.clipPath,s=i.clipIndex,u=o,l=u.type,f=u.poses,v=u.splitter,c=f.map(function(x){return x.pos});if(l==="polygon")c.splice(s,0,[n,a]);else if(l==="inset"){var d=td.indexOf(s),p=rd.indexOf(s),h=f.length;if(nd(f,c,8,d,p,n,a,c[4][0],c[4][1],c[0][0],c[0][1]),h===f.length)return}else return;var g=oi(t,o,c),m="".concat(l,"(").concat(g.join(v),")");U(t,"onClip",at(t,r,w({clipEventType:"added",clipType:l,poses:c,clipStyles:g,clipStyle:m,distX:0,distY:0},Ht({clipPath:m},r))))}function ld(t,r){var e=r.datas,n=e.clipPath,a=e.clipIndex,i=n,o=i.type,s=i.poses,u=i.splitter,l=s.map(function(d){return d.pos}),f=l.length;if(o==="polygon")s.splice(a,1),l.splice(a,1);else if(o==="inset"){if(a<8||(ed(s,l,a,8,f),f===s.length))return}else return;var v=oi(t,n,l),c="".concat(o,"(").concat(v.join(u),")");U(t,"onClip",at(t,r,w({clipEventType:"removed",clipType:o,poses:l,clipStyles:v,clipStyle:c,distX:0,distY:0},Ht({clipPath:c},r))))}var fd={name:"clippable",props:["clippable","defaultClipPath","customClipPath","keepRatio","clipRelative","clipArea","dragWithClip","clipTargetBounds","clipVerticalGuidelines","clipHorizontalGuidelines","clipSnapThreshold"],events:["clipStart","clip","clipEnd"],css:[`.control.clip-control {
background: #6d6;
cursor: pointer;
}
.control.clip-control.clip-radius {
background: #d66;
}
.line.clip-line {
background: #6e6;
cursor: move;
z-index: 1;
}
.clip-area {
position: absolute;
top: 0;
left: 0;
}
.clip-ellipse {
position: absolute;
cursor: move;
border: 1px solid #6d6;
border: var(--zoompx) solid #6d6;
border-radius: 50%;
transform-origin: 0px 0px;
}`,`:host {
--bounds-color: #d66;
}`,`.guideline {
pointer-events: none;
z-index: 2;
}`,`.line.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}`],render:function(t,r){var e=t.props,n=e.customClipPath,a=e.defaultClipPath,i=e.clipArea,o=e.zoom,s=e.groupable,u=t.getState(),l=u.target,f=u.width,v=u.height,c=u.allMatrix,d=u.is3d,p=u.left,h=u.top,g=u.pos1,m=u.pos2,x=u.pos3,y=u.pos4,S=u.clipPathState,_=u.snapBoundInfos,b=u.rotation;if(!l||s)return[];var E=so(l,f,v,a||"inset",S||n);if(!E)return[];var D=d?4:3,C=E.type,M=E.poses,P=M.map(function(nt){var st=bt(c,nt.pos,D);return[st[0]-p,st[1]-h]}),R=[],O=[],I=C==="rect",A=C==="inset",k=C==="polygon";if(I||A||k){var F=A?P.slice(0,8):P;O=F.map(function(nt,st){var pt=st===0?F[F.length-1]:F[st-1],xt=_t(pt,nt),ot=Us(pt,nt);return r.createElement("div",{key:"clipLine".concat(st),className:$("line","clip-line","snap-control"),"data-clip-index":st,style:{width:"".concat(ot,"px"),transform:"translate(".concat(pt[0],"px, ").concat(pt[1],"px) rotate(").concat(xt,"rad) scaleY(").concat(o,")")}})})}if(R=P.map(function(nt,st){return r.createElement("div",{key:"clipControl".concat(st),className:$("control","clip-control","snap-control"),"data-clip-index":st,style:{transform:"translate(".concat(nt[0],"px, ").concat(nt[1],"px) rotate(").concat(b,"rad) scale(").concat(o,")")}})}),A&&R.push.apply(R,N([],T(P.slice(8).map(function(nt,st){return r.createElement("div",{key:"clipRadiusControl".concat(st),className:$("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+st,style:{transform:"translate(".concat(nt[0],"px, ").concat(nt[1],"px) rotate(").concat(b,"rad) scale(").concat(o,")")}})})),!1)),C==="circle"||C==="ellipse"){var G=E.left,L=E.top,W=E.radiusX,z=E.radiusY,V=T(Q(bt(c,[G,L],D),bt(c,[0,0],D)),2),q=V[0],H=V[1],j="none";if(!i){for(var Y=Math.max(10,W/5,z/5),K=[],J=0;J<=Y;++J){var it=Math.PI*2/Y*J;K.push([W+(W-o)*Math.cos(it),z+(z-o)*Math.sin(it)])}K.push([W,-2]),K.push([-2,-2]),K.push([-2,z*2+2]),K.push([W*2+2,z*2+2]),K.push([W*2+2,-2]),K.push([W,-2]),j="polygon(".concat(K.map(function(nt){return"".concat(nt[0],"px ").concat(nt[1],"px")}).join(", "),")")}R.push(r.createElement("div",{key:"clipEllipse",className:$("clip-ellipse","snap-control"),style:{width:"".concat(W*2,"px"),height:"".concat(z*2,"px"),clipPath:j,transform:"translate(".concat(-p+q,"px, ").concat(-h+H,"px) ").concat(On(c))}}))}if(i){var lt=tr(N([g,m,x,y],T(P),!1)),X=lt.width,Z=lt.height,vt=lt.left,et=lt.top;if(k||I||A){var K=A?P.slice(0,8):P;R.push(r.createElement("div",{key:"clipArea",className:$("clip-area","snap-control"),style:{width:"".concat(X,"px"),height:"".concat(Z,"px"),transform:"translate(".concat(vt,"px, ").concat(et,"px)"),clipPath:"polygon(".concat(K.map(function(st){return"".concat(st[0]-vt,"px ").concat(st[1]-et,"px")}).join(", "),")")}}))}}return _&&["vertical","horizontal"].forEach(function(nt){var st=_[nt],pt=nt==="horizontal";st.isSnap&&O.push.apply(O,N([],T(st.snap.posInfos.map(function(xt,ot){var dt=xt.pos,It=Q(bt(c,pt?[0,dt]:[dt,0],D),[p,h]),Ft=Q(bt(c,pt?[f,dt]:[dt,v],D),[p,h]);return we(r,"",It,Ft,o,"clip".concat(nt,"snap").concat(ot),"guideline")})),!1)),st.isBound&&O.push.apply(O,N([],T(st.bounds.map(function(xt,ot){var dt=xt.pos,It=Q(bt(c,pt?[0,dt]:[dt,0],D),[p,h]),Ft=Q(bt(c,pt?[f,dt]:[dt,v],D),[p,h]);return we(r,"",It,Ft,o,"clip".concat(nt,"bounds").concat(ot),"guideline","bounds","bold")})),!1))}),N(N([],T(R),!1),T(O),!1)},dragControlCondition:function(t,r){return r.inputEvent&&(r.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,r){var e=t.props,n=e.dragWithClip,a=n===void 0?!0:n;return a?!1:this.dragControlStart(t,r)},drag:function(t,r){return this.dragControl(t,w(w({},r),{isDragTarget:!0}))},dragEnd:function(t,r){return this.dragControlEnd(t,r)},dragControlStart:function(t,r){var e=t.state,n=t.props,a=n.defaultClipPath,i=n.customClipPath,o=e.target,s=e.width,u=e.height,l=r.inputEvent?r.inputEvent.target:null,f=l&&l.getAttribute("class")||"",v=r.datas,c=so(o,s,u,a||"inset",i);if(!c)return!1;var d=c.clipText,p=c.type,h=c.poses,g=U(t,"onClipStart",at(t,r,{clipType:p,clipStyle:d,poses:h.map(function(m){return m.pos})}));return g===!1?(v.isClipStart=!1,!1):(v.isControl=f&&f.indexOf("clip-control")>-1,v.isLine=f.indexOf("clip-line")>-1,v.isArea=f.indexOf("clip-area")>-1||f.indexOf("clip-ellipse")>-1,v.clipIndex=l?parseInt(l.getAttribute("data-clip-index"),10):-1,v.clipPath=c,v.isClipStart=!0,e.clipPathState=d,Vr(t,r),!0)},dragControl:function(t,r){var e,n,a,i=r.datas,o=r.originalDatas,s=r.isDragTarget;if(!i.isClipStart)return!1;var u=i,l=u.isControl,f=u.isLine,v=u.isArea,c=u.clipIndex,d=u.clipPath;if(!d)return!1;var p=Hr(t.props,"clippable"),h=p.keepRatio,g=0,m=0,x=o.draggable,y=vr(r);s&&x?(e=T(x.prevBeforeDist,2),g=e[0],m=e[1]):(n=T(y,2),g=n[0],m=n[1]);var S=[g,m],_=t.state,b=_.width,E=_.height,D=!v&&!l&&!f,C=d.type,M=d.poses,P=d.splitter,R=M.map(function(yt){return yt.pos});D&&(g=-g,m=-m);var O=!l||M[c].direction==="nesw",I=C==="inset"||C==="rect",A=M.map(function(){return[0,0]});if(l&&!O){var k=M[c],F=k.horizontal,G=k.vertical,L=[g*B(F),m*B(G)];A=sd(M,c,L,I,h)}else O&&(A=R.map(function(){return[g,m]}));var W=R.map(function(yt,Nt){return ft(yt,A[Nt])}),z=N([],T(W),!1);_.snapBoundInfos=null;var V=d.type==="circle",q=d.type==="ellipse";if(V||q){var H=tr(W),j=B(H.bottom-H.top),Y=B(q?H.right-H.left:j),K=W[0][1]+j,J=W[0][0]-Y,it=W[0][0]+Y;V&&(z.push([it,H.bottom]),A.push([1,0])),z.push([H.left,K]),A.push([0,1]),z.push([J,H.bottom]),A.push([1,0])}var lt=Hs((p.clipHorizontalGuidelines||[]).map(function(yt){return gt("".concat(yt),E)}),(p.clipVerticalGuidelines||[]).map(function(yt){return gt("".concat(yt),b)}),b,E),X=[],Z=[];if(V||q)X=[z[4][0],z[2][0]],Z=[z[1][1],z[3][1]];else if(I){var vt=[z[0],z[2],z[4],z[6]],et=[A[0],A[2],A[4],A[6]];X=vt.filter(function(yt,Nt){return et[Nt][0]}).map(function(yt){return yt[0]}),Z=vt.filter(function(yt,Nt){return et[Nt][1]}).map(function(yt){return yt[1]})}else X=z.filter(function(yt,Nt){return A[Nt][0]}).map(function(yt){return yt[0]}),Z=z.filter(function(yt,Nt){return A[Nt][1]}).map(function(yt){return yt[1]});var nt=[0,0],st=Vi(lt,p.clipTargetBounds&&{left:0,top:0,right:b,bottom:E},X,Z,5,5),pt=st.horizontal,xt=st.vertical,ot=pt.offset,dt=xt.offset;if(pt.isBound&&(nt[1]+=ot),xt.isBound&&(nt[0]+=dt),(q||V)&&A[0][0]===0&&A[0][1]===0){var H=tr(W),It=H.bottom-H.top,Ft=q?H.right-H.left:It,Gt=xt.isBound?B(dt):xt.snapIndex===0?-dt:dt,Et=pt.isBound?B(ot):pt.snapIndex===0?-ot:ot;Ft-=Gt,It-=Et,V&&(It=zs(xt,pt)>0?It:Ft,Ft=It);var Mt=z[0];z[1][1]=Mt[1]-It,z[2][0]=Mt[0]+Ft,z[3][1]=Mt[1]+It,z[4][0]=Mt[0]-Ft}else if(I&&h&&l){var Sr=T(vu(M),2),br=Sr[0],ci=Sr[1],vi=br&&ci?br/ci:0,Eu=M[c],We=Eu.direction||"",Pn=z[1][1],K=z[5][1],J=z[7][0],it=z[3][0];B(ot)<=B(dt)?ot=Wt(ot)*B(dt)/vi:dt=Wt(dt)*B(ot)*vi,We.indexOf("w")>-1?J-=dt:We.indexOf("e")>-1?it-=dt:(J+=dt/2,it-=dt/2),We.indexOf("n")>-1?Pn-=ot:We.indexOf("s")>-1?K-=ot:(Pn+=ot/2,K-=ot/2);var Du=gn(Pn,it,K,J);z.forEach(function(hi,Tu){var zn;zn=T(Du[Tu].pos,2),hi[0]=zn[0],hi[1]=zn[1]})}else z.forEach(function(yt,Nt){var pi=A[Nt];pi[0]&&(yt[0]-=dt),pi[1]&&(yt[1]-=ot)});var di=oi(t,d,W),In="".concat(C,"(").concat(di.join(P),")");if(_.clipPathState=In,V||q)X=[z[4][0],z[2][0]],Z=[z[1][1],z[3][1]];else if(I){var vt=[z[0],z[2],z[4],z[6]];X=vt.map(function(Nt){return Nt[0]}),Z=vt.map(function(Nt){return Nt[1]})}else X=z.map(function(yt){return yt[0]}),Z=z.map(function(yt){return yt[1]});if(_.snapBoundInfos=Vi(lt,p.clipTargetBounds&&{left:0,top:0,right:b,bottom:E},X,Z,1,1),x){var Cu=_.is3d,wu=_.allMatrix,Mu=Cu?4:3,An=nt;s&&(An=[S[0]+nt[0]-y[0],S[1]+nt[1]-y[1]]),x.deltaOffset=mt(wu,[An[0],An[1],0,0],Mu)}return U(t,"onClip",at(t,r,w({clipEventType:"changed",clipType:C,poses:W,clipStyle:In,clipStyles:di,distX:g,distY:m},Ht((a={},a[C==="rect"?"clip":"clipPath"]=In,a),r)))),!0},dragControlEnd:function(t,r){this.unset(t);var e=r.isDrag,n=r.datas,a=r.isDouble,i=n.isLine,o=n.isClipStart,s=n.isControl;return o?(U(t,"onClipEnd",$t(t,r,{})),a&&(s?ld(t,r):i&&ud(t,r)),a||e):!1},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},cd={name:"originDraggable",props:["originDraggable","originRelative"],events:["dragOriginStart","dragOrigin","dragOriginEnd"],css:[`:host[data-able-origindraggable] .control.origin {
pointer-events: auto;
}`],dragControlCondition:function(t,r){return r.isRequest?r.requestAble==="originDraggable":Rt(r.inputEvent.target,$("origin"))},dragControlStart:function(t,r){var e=r.datas;Vr(t,r);var n=at(t,r,{dragStart:Lt.dragStart(t,new ae().dragStart([0,0],r))}),a=U(t,"onDragOriginStart",n);return e.startOrigin=t.state.transformOrigin,e.startTargetOrigin=t.state.targetOrigin,e.prevOrigin=[0,0],e.isDragOrigin=!0,a===!1?(e.isDragOrigin=!1,!1):n},dragControl:function(t,r){var e=r.datas,n=r.isPinch,a=r.isRequest;if(!e.isDragOrigin)return!1;var i=T(vr(r),2),o=i[0],s=i[1],u=t.state,l=u.width,f=u.height,v=u.offsetMatrix,c=u.targetMatrix,d=u.is3d,p=t.props.originRelative,h=p===void 0?!0:p,g=d?4:3,m=[o,s];if(a){var x=r.distOrigin;(x[0]||x[1])&&(m=x)}var y=ft(e.startOrigin,m),S=ft(e.startTargetOrigin,m),_=Q(m,e.prevOrigin),b=Le(v,c,y,g),E=t.getRect(),D=tr(qr(b,l,f,g)),C=[E.left-D.left,E.top-D.top];e.prevOrigin=m;var M=[nr(S[0],l,h),nr(S[1],f,h)].join(" "),P=Lt.drag(t,Ne(r,t.state,C,!!n)),R=at(t,r,w(w({width:l,height:f,origin:y,dist:m,delta:_,transformOrigin:M,drag:P},Ht({transformOrigin:M,transform:P.transform},r)),{afterTransform:P.transform}));return U(t,"onDragOrigin",R),R},dragControlEnd:function(t,r){var e=r.datas;return e.isDragOrigin?(U(t,"onDragOriginEnd",$t(t,r,{})),!0):!1},dragGroupControlCondition:function(t,r){return this.dragControlCondition(t,r)},dragGroupControlStart:function(t,r){var e=this.dragControlStart(t,r);return!!e},dragGroupControl:function(t,r){var e=this.dragControl(t,r);return e?(t.transformOrigin=e.transformOrigin,!0):!1},request:function(t){var r={},e=t.getRect(),n=0,a=0,i=e.transformOrigin,o=[0,0];return{isControl:!0,requestStart:function(){return{datas:r}},request:function(s){return"deltaOrigin"in s?(o[0]+=s.deltaOrigin[0],o[1]+=s.deltaOrigin[1]):"origin"in s?(o[0]=s.origin[0]-i[0],o[1]=s.origin[1]-i[1]):("x"in s?n=s.x-e.left:"deltaX"in s&&(n+=s.deltaX),"y"in s?a=s.y-e.top:"deltaY"in s&&(a+=s.deltaY)),{datas:r,distX:n,distY:a,distOrigin:o}},requestEnd:function(){return{datas:r,isDrag:!0}}}}};function vd(t,r,e,n){var a=t.filter(function(u){var l=u.virtual,f=u.horizontal;return f&&!l}).length,i=t.filter(function(u){var l=u.virtual,f=u.vertical;return f&&!l}).length,o=-1;if(r===0&&(a===0?o=0:a===1&&(o=1)),r===2&&(a<=2?o=2:a<=3&&(o=3)),r===3&&(i===0?o=4:i<4&&(o=7)),r===1&&(i<=1?o=5:i<=2&&(o=6)),!(o===-1||!t[o].virtual)){var s=t[o];dd(t,o),o<4?s.pos[0]=e:s.pos[1]=n}}function dd(t,r){r<4?t.slice(0,r+1).forEach(function(e){e.virtual=!1}):(t[0].virtual&&(t[0].virtual=!1),t.slice(4,r+1).forEach(function(e){e.virtual=!1}))}function pd(t,r){r<4?t.slice(r,4).forEach(function(e){e.virtual=!0}):t.slice(r).forEach(function(e){e.virtual=!0})}function uo(t,r,e,n,a){n===void 0&&(n=[0,0]);var i=[];return!t||t==="0px"?i=[]:i=Or(t),cu(i,r,e,0,0,n,a)}function lo(t,r,e,n,a){var i=t.state,o=i.width,s=i.height,u=ii(a,t.props.roundRelative,o,s),l=u.raws,f=u.styles,v=u.radiusPoses,c=ad(v,l),d=c.horizontals,p=c.verticals,h=f.join(" ");i.borderRadiusState=h;var g=at(t,r,w({horizontals:d,verticals:p,borderRadius:h,width:o,height:s,delta:n,dist:e},Ht({borderRadius:h},r)));return U(t,"onRound",g),g}function fo(t){var r,e,n=t.getState().style,a=n.borderRadius||"";if(!a&&t.props.groupable){var i=t.moveables[0],o=t.getTargets()[0];o&&((i==null?void 0:i.props.target)===o?(a=(e=(r=t.moveables[0])===null||r===void 0?void 0:r.state.style.borderRadius)!==null&&e!==void 0?e:"",n.borderRadius=a):(a=ti(o).borderRadius,n.borderRadius=a))}return a}var hd={name:"roundable",props:["roundable","roundRelative","minRoundControls","maxRoundControls","roundClickable","roundPadding","isDisplayShadowRoundControls"],events:["roundStart","round","roundEnd","roundGroupStart","roundGroup","roundGroupEnd"],css:[`.control.border-radius {
background: #d66;
cursor: pointer;
z-index: 3;
}`,`.control.border-radius.vertical {
background: #d6d;
z-index: 2;
}`,`.control.border-radius.virtual {
opacity: 0.5;
z-index: 1;
}`,`:host.round-line-clickable .line.direction {
cursor: pointer;
}`],className:function(t){var r=t.props.roundClickable;return r===!0||r==="line"?$("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},requestChildStyle:function(){return["borderRadius"]},render:function(t,r){var e=t.getState(),n=e.target,a=e.width,i=e.height,o=e.allMatrix,s=e.is3d,u=e.left,l=e.top,f=e.borderRadiusState,v=t.props,c=v.minRoundControls,d=c===void 0?[0,0]:c,p=v.maxRoundControls,h=p===void 0?[4,4]:p,g=v.zoom,m=v.roundPadding,x=m===void 0?0:m,y=v.isDisplayShadowRoundControls,S=v.groupable;if(!n)return null;var _=f||fo(t),b=s?4:3,E=uo(_,a,i,d,!0);if(!E)return null;var D=0,C=0,M=S?[0,0]:[u,l];return E.map(function(P,R){var O=P.horizontal,I=P.vertical,A=P.direction||"",k=N([],T(P.pos),!1);C+=Math.abs(O),D+=Math.abs(I),O&&A.indexOf("n")>-1&&(k[1]-=x),I&&A.indexOf("w")>-1&&(k[0]-=x),O&&A.indexOf("s")>-1&&(k[1]+=x),I&&A.indexOf("e")>-1&&(k[0]+=x);var F=Q(bt(o,k,b),M),G=y&&y!=="horizontal",L=P.vertical?D<=h[1]&&(G||!P.virtual):C<=h[0]&&(y||!P.virtual);return r.createElement("div",{key:"borderRadiusControl".concat(R),className:$("control","border-radius",P.vertical?"vertical":"",P.virtual?"virtual":""),"data-radius-index":R,style:{display:L?"block":"none",transform:"translate(".concat(F[0],"px, ").concat(F[1],"px) scale(").concat(g,")")}})})},dragControlCondition:function(t,r){if(!r.inputEvent||r.isRequest)return!1;var e=r.inputEvent.target.getAttribute("class")||"";return e.indexOf("border-radius")>-1||e.indexOf("moveable-line")>-1&&e.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(t,r){return this.dragControlCondition(t,r)},dragControlStart:function(t,r){var e=r.inputEvent,n=r.datas,a=e.target,i=a.getAttribute("class")||"",o=i.indexOf("border-radius")>-1,s=i.indexOf("moveable-line")>-1&&i.indexOf("moveable-direction")>-1,u=o?parseInt(a.getAttribute("data-radius-index"),10):-1,l=-1;if(s){var f=a.getAttribute("data-line-key")||"";f&&(l=parseInt(f.replace(/render-line-/g,""),10),isNaN(l)&&(l=-1))}if(!o&&!s)return!1;var v=at(t,r,{}),c=U(t,"onRoundStart",v);if(c===!1)return!1;n.lineIndex=l,n.controlIndex=u,n.isControl=o,n.isLine=s,Vr(t,r);var d=t.props,p=d.roundRelative,h=d.minRoundControls,g=h===void 0?[0,0]:h,m=t.state,x=m.width,y=m.height;n.isRound=!0,n.prevDist=[0,0];var S=fo(t),_=uo(S||"",x,y,g,!0)||[];return n.controlPoses=_,m.borderRadiusState=ii(_,p,x,y).styles.join(" "),v},dragControl:function(t,r){var e=r.datas,n=e.controlPoses;if(!e.isRound||!e.isControl||!n.length)return!1;var a=e.controlIndex,i=T(vr(r),2),o=i[0],s=i[1],u=[o,s],l=Q(u,e.prevDist),f=t.props.maxRoundControls,v=f===void 0?[4,4]:f,c=t.state,d=c.width,p=c.height,h=n[a],g=h.vertical,m=h.horizontal,x=n.map(function(S){var _=S.horizontal,b=S.vertical,E=[_*m*u[0],b*g*u[1]];if(_){if(v[0]===1)return E;if(v[0]<4&&_!==m)return E}else{if(v[1]===0)return E[1]=b*m*u[0]/d*p,E;if(g){if(v[1]===1)return E;if(v[1]<4&&b!==g)return E}}return[0,0]});x[a]=u;var y=n.map(function(S,_){return w(w({},S),{pos:ft(S.pos,x[_])})});return a<4?y.slice(0,a+1).forEach(function(S){S.virtual=!1}):y.slice(4,a+1).forEach(function(S){S.virtual=!1}),e.prevDist=[o,s],lo(t,r,u,l,y)},dragControlEnd:function(t,r){var e=t.state;e.borderRadiusState="";var n=r.datas,a=r.isDouble;if(!n.isRound)return!1;var i=n.isControl,o=n.controlIndex,s=n.isLine,u=n.lineIndex,l=n.controlPoses,f=l.filter(function(m){var x=m.virtual;return x}).length,v=t.props.roundClickable,c=v===void 0?!0:v;if(a&&c){if(i&&(c===!0||c==="control"))pd(l,o);else if(s&&(c===!0||c==="line")){var d=T(gs(t,r),2),p=d[0],h=d[1];vd(l,u,p,h)}f!==l.filter(function(m){var x=m.virtual;return x}).length&&lo(t,r,[0,0],[0,0],l)}var g=$t(t,r,{});return U(t,"onRoundEnd",g),e.borderRadiusState="",g},dragGroupControlStart:function(t,r){var e=this.dragControlStart(t,r);if(!e)return!1;var n=t.moveables,a=t.props.targets,i=ir(t,"roundable",r),o=w({targets:t.props.targets,events:i.map(function(s,u){return w(w({},s),{target:a[u],moveable:n[u],currentTarget:n[u]})})},e);return U(t,"onRoundGroupStart",o),e},dragGroupControl:function(t,r){var e=this.dragControl(t,r);if(!e)return!1;var n=t.moveables,a=t.props.targets,i=ir(t,"roundable",r),o=w({targets:t.props.targets,events:i.map(function(s,u){return w(w(w({},s),{target:a[u],moveable:n[u],currentTarget:n[u]}),Ht({borderRadius:e.borderRadius},s))})},e);return U(t,"onRoundGroup",o),o},dragGroupControlEnd:function(t,r){var e=t.moveables,n=t.props.targets,a=ir(t,"roundable",r);Rn(t,"onRound",function(s){var u=w({targets:t.props.targets,events:a.map(function(l,f){return w(w(w({},l),{target:n[f],moveable:e[f],currentTarget:e[f]}),Ht({borderRadius:s.borderRadius},l))})},s);U(t,"onRoundGroup",u)});var i=this.dragControlEnd(t,r);if(!i)return!1;var o=w({targets:t.props.targets,events:a.map(function(s,u){var l;return w(w({},s),{target:n[u],moveable:e[u],currentTarget:e[u],lastEvent:(l=s.datas)===null||l===void 0?void 0:l.lastEvent})})},i);return U(t,"onRoundGroupEnd",o),o},unset:function(t){t.state.borderRadiusState=""}};function gd(t,r){var e=r?4:3,n=St(e),a="matrix".concat(r?"3d":"","(").concat(n.join(","),")");return t===a||t==="matrix(1,0,0,1,0,0)"}var du={isPinch:!0,name:"beforeRenderable",props:[],events:["beforeRenderStart","beforeRender","beforeRenderEnd","beforeRenderGroupStart","beforeRenderGroup","beforeRenderGroupEnd"],dragRelation:"weak",setTransform:function(t,r){var e=t.state,n=e.is3d,a=e.targetMatrix,i=e.inlineTransform,o=n?"matrix3d(".concat(a.join(","),")"):"matrix(".concat(ns(a,!0),")"),s=!i||i==="none"?o:i;r.datas.startTransforms=gd(s,n)?[]:Or(s)},resetStyle:function(t){var r=t.datas;r.nextStyle={},r.nextTransforms=t.datas.startTransforms,r.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,r){return at(t,r,{setTransform:function(e){r.datas.startTransforms=wt(e)?e:Or(e)},isPinch:!!r.isPinch})},fillDragParams:function(t,r){return at(t,r,{isPinch:!!r.isPinch})},dragStart:function(t,r){this.setTransform(t,r),this.resetStyle(r),U(t,"onBeforeRenderStart",this.fillDragStartParams(t,r))},drag:function(t,r){r.datas.startTransforms||this.setTransform(t,r),this.resetStyle(r),U(t,"onBeforeRender",at(t,r,{isPinch:!!r.isPinch}))},dragEnd:function(t,r){r.datas.startTransforms||(this.setTransform(t,r),this.resetStyle(r)),U(t,"onBeforeRenderEnd",at(t,r,{isPinch:!!r.isPinch,isDrag:r.isDrag}))},dragGroupStart:function(t,r){var e=this;this.dragStart(t,r);var n=ir(t,"beforeRenderable",r),a=t.moveables,i=n.map(function(o,s){var u=a[s];return e.setTransform(u,o),e.resetStyle(o),e.fillDragStartParams(u,o)});U(t,"onBeforeRenderGroupStart",at(t,r,{isPinch:!!r.isPinch,targets:t.props.targets,setTransform:function(){},events:i}))},dragGroup:function(t,r){var e=this;this.drag(t,r);var n=ir(t,"beforeRenderable",r),a=t.moveables,i=n.map(function(o,s){var u=a[s];return e.resetStyle(o),e.fillDragParams(u,o)});U(t,"onBeforeRenderGroup",at(t,r,{isPinch:!!r.isPinch,targets:t.props.targets,events:i}))},dragGroupEnd:function(t,r){this.dragEnd(t,r),U(t,"onBeforeRenderGroupEnd",at(t,r,{isPinch:!!r.isPinch,isDrag:r.isDrag,targets:t.props.targets}))},dragControlStart:function(t,r){return this.dragStart(t,r)},dragControl:function(t,r){return this.drag(t,r)},dragControlEnd:function(t,r){return this.dragEnd(t,r)},dragGroupControlStart:function(t,r){return this.dragGroupStart(t,r)},dragGroupControl:function(t,r){return this.dragGroup(t,r)},dragGroupControlEnd:function(t,r){return this.dragGroupEnd(t,r)}},pu={name:"renderable",props:[],events:["renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],dragRelation:"weak",dragStart:function(t,r){U(t,"onRenderStart",at(t,r,{isPinch:!!r.isPinch}))},drag:function(t,r){U(t,"onRender",this.fillDragParams(t,r))},dragAfter:function(t,r){return this.drag(t,r)},dragEnd:function(t,r){U(t,"onRenderEnd",this.fillDragEndParams(t,r))},dragGroupStart:function(t,r){U(t,"onRenderGroupStart",at(t,r,{isPinch:!!r.isPinch,targets:t.props.targets}))},dragGroup:function(t,r){var e=this,n=ir(t,"beforeRenderable",r),a=t.moveables,i=n.map(function(o,s){var u=a[s];return e.fillDragParams(u,o)});U(t,"onRenderGroup",at(t,r,w(w({isPinch:!!r.isPinch,targets:t.props.targets,transform:Ue(r),transformObject:{}},Ht(Ke(r))),{events:i})))},dragGroupEnd:function(t,r){var e=this,n=ir(t,"beforeRenderable",r),a=t.moveables,i=n.map(function(o,s){var u=a[s];return e.fillDragEndParams(u,o)});U(t,"onRenderGroupEnd",at(t,r,w({isPinch:!!r.isPinch,isDrag:r.isDrag,targets:t.props.targets,events:i,transformObject:{},transform:Ue(r)},Ht(Ke(r)))))},dragControlStart:function(t,r){return this.dragStart(t,r)},dragControl:function(t,r){return this.drag(t,r)},dragControlAfter:function(t,r){return this.dragAfter(t,r)},dragControlEnd:function(t,r){return this.dragEnd(t,r)},dragGroupControlStart:function(t,r){return this.dragGroupStart(t,r)},dragGroupControl:function(t,r){return this.dragGroup(t,r)},dragGroupControlEnd:function(t,r){return this.dragGroupEnd(t,r)},fillDragParams:function(t,r){var e={};return ne(ln(r)||[]).forEach(function(n){e[n.name]=n.functionValue}),at(t,r,w({isPinch:!!r.isPinch,transformObject:e,transform:Ue(r)},Ht(Ke(r))))},fillDragEndParams:function(t,r){var e={};return ne(ln(r)||[]).forEach(function(n){e[n.name]=n.functionValue}),at(t,r,w({isPinch:!!r.isPinch,isDrag:r.isDrag,transformObject:e,transform:Ue(r)},Ht(Ke(r))))}};function _e(t,r,e,n,a,i,o){i.clientDistX=i.distX,i.clientDistY=i.distY;var s=a==="Start",u=a==="End",l=a==="After",f=t.state.target,v=i.isRequest,c=n.indexOf("Control")>-1;if(!f||s&&c&&!v&&t.areaElement===i.inputEvent.target)return!1;var d=N([],T(r),!1);if(v){var p=i.requestAble;d.some(function(R){return R.name===p})||d.push.apply(d,N([],T(t.props.ables.filter(function(R){return R.name===p})),!1))}if(!d.length||d.every(function(R){return R.dragRelation}))return!1;var h=i.inputEvent,g;u&&h&&(g=document.elementFromPoint(i.clientX,i.clientY)||h.target);var m=!1,x=function(){var R;m=!0,(R=i.stop)===null||R===void 0||R.call(i)},y=s&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());y&&t.updateRect(a,!0,!1);var S=i.datas,_=c?"controlGesto":"targetGesto",b=t[_],E=function(R,O,I){if(!(O in R)||b!==t[_])return!1;var A=R.name,k=S[A]||(S[A]={});if(s&&(k.isEventStart=!I||!R[I]||R[I](t,i)),!k.isEventStart)return!1;var F=R[O](t,w(w({},i),{stop:x,datas:k,originalDatas:S,inputTarget:g}));return t._emitter.off(),s&&F===!1&&(k.isEventStart=!1),F};y&&d.forEach(function(R){R.unset&&R.unset(t)}),E(du,"drag".concat(n).concat(a));var D=0,C=0;e.forEach(function(R){if(m)return!1;var O="".concat(R).concat(n).concat(a),I="".concat(R).concat(n,"Condition");a===""&&!v&&Nv(t.state,i);var A=d.filter(function(G){return G[O]});A=A.filter(function(G,L){return G.name&&A.indexOf(G)===L});var k=A.filter(function(G){return E(G,O,I)}),F=k.length;m&&++D,F&&++C,!m&&s&&A.length&&!F&&(D+=A.filter(function(G){var L=G.name,W=S[L];return W.isEventStart?G.dragRelation!=="strong":!1}).length?1:0)}),(!l||C)&&E(pu,"drag".concat(n).concat(a));var M=b!==t[_]||D===e.length;if((u||m||M)&&(t.state.gestos={},t.moveables&&t.moveables.forEach(function(R){R.state.gestos={}}),d.forEach(function(R){R.unset&&R.unset(t)})),s&&!M&&!v&&C&&t.props.preventDefault&&(i==null||i.preventDefault()),t.isUnmounted||M)return!1;if(!s&&C&&!o||u){var P=t.props.flushSync||Vs;P(function(){t.updateRect(u?a:"",!0,!1),t.forceUpdate()})}return!s&&!u&&!l&&C&&!o&&_e(t,r,e,n,a+"After",i),!0}function si(t,r){return function(e,n){var a;n===void 0&&(n=e.inputEvent.target);var i=n,o=t.areaElement,s=t._dragTarget;return!s||!r&&(!((a=t.controlGesto)===null||a===void 0)&&a.isFlag())?!1:i===s||s.contains(i)||i===o||!t.isMoveableElement(i)&&!t.controlBox.contains(i)||Rt(i,"moveable-area")||Rt(i,"moveable-padding")||Rt(i,"moveable-edgeDraggable")}}function hu(t,r,e){var n=t.controlBox,a=[],i=t.props,o=i.dragArea,s=t.state.target,u=i.dragTarget;a.push(n),(!o||u)&&a.push(r),!o&&u&&s&&r!==s&&i.dragTargetSelf&&a.push(s);var l=si(t);return mu(t,a,"targetAbles",e,{dragStart:l,pinchStart:l})}function gu(t,r){var e=t.controlBox,n=[];n.push(e);var a=si(t,!0),i=function(o,s){if(s===void 0&&(s=o.inputEvent.target),s===e)return!0;var u=a(o,s);return!u};return mu(t,n,"controlAbles",r,{dragStart:i,pinchStart:i})}function mu(t,r,e,n,a){a===void 0&&(a={});var i=e==="targetAbles",o=t.props,s=o.pinchOutside,u=o.pinchThreshold,l=o.preventClickEventOnDrag,f=o.preventClickDefault,v=o.checkInput,c=o.dragFocusedInput,d=o.preventDefault,p=d===void 0?!0:d,h=o.preventRightClick,g=h===void 0?!0:h,m=o.preventWheelClick,x=m===void 0?!0:m,y=o.dragContainer,S=fr(y,!0),_={preventDefault:p,preventRightClick:g,preventWheelClick:x,container:S||Mr(t.getControlBoxElement()),pinchThreshold:u,pinchOutside:s,preventClickEventOnDrag:i?l:!1,preventClickEventOnDragStart:i?f:!1,preventClickEventByCondition:i?null:function(D){return t.controlBox.contains(D.target)},checkInput:i?v:!1,dragFocusedInput:c},b=new Yf(r,_),E=n==="Control";return["drag","pinch"].forEach(function(D){["Start","","End"].forEach(function(C){b.on("".concat(D).concat(C),function(M){var P,R=M.eventType,O=D==="drag"&&M.isPinch;if(a[R]&&!a[R](M)){M.stop();return}if(!O){var I=D==="drag"?[D]:["drag",D],A=N([],T(t[e]),!1),k=_e(t,A,I,n,C,M);k?(t.props.stopPropagation||C==="Start"&&E)&&((P=M==null?void 0:M.inputEvent)===null||P===void 0||P.stopPropagation()):M.stop()}})})}),b}var md=function(){function t(r,e,n){var a=this;this.target=r,this.moveable=e,this.eventName=n,this.ables=[],this._onEvent=function(i){var o=a.eventName,s=a.moveable;s.state.disableNativeEvent||a.ables.forEach(function(u){u[o](s,{inputEvent:i})})},r.addEventListener(n.toLowerCase(),this._onEvent)}return t.prototype.setAbles=function(r){this.ables=r},t.prototype.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t}();function xd(t,r,e,n){var a;e===void 0&&(e=r);var i=_s(t,r),o=i.matrixes,s=i.is3d,u=i.targetMatrix,l=i.transformOrigin,f=i.targetOrigin,v=i.offsetContainer,c=i.hasFixed,d=i.zoom,p=Ic(v,e),h=p.matrixes,g=p.is3d,m=p.offsetContainer,x=p.zoom,y=n,S=4,_=t.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in t,b=u,E=St(S),D=St(S),C=St(S),M=St(S),P=o.length,R=h.map(function(L){return w(w({},L),{matrix:L.matrix?N([],T(L.matrix),!1):void 0})}).reverse();o.reverse(),!s&&y&&(b=sr(b,3,4),xa(o)),!g&&y&&xa(R),R.forEach(function(L){D=mt(D,L.matrix,S)});var O=e||Ir(t),I=((a=R[0])===null||a===void 0?void 0:a.target)||Me(O,O,!0).offsetParent,A=R.slice(1).reduce(function(L,W){return mt(L,W.matrix,S)},St(S));o.forEach(function(L,W){if(P-2===W&&(C=E.slice()),P-1===W&&(M=E.slice()),!L.matrix){var z=o[W+1],V=Bv(L,z,I,S,mt(A,E,S));L.matrix=Lr(V,S)}E=mt(E,L.matrix,S)});var k=!_&&s;b||(b=St(k?4:3));var F=On(_&&b.length===16?sr(b,4,3):b,k),G=D;return D=rs(D,S,S),{hasZoom:d!==1||x!==1,hasFixed:c,matrixes:o,rootMatrix:D,originalRootMatrix:G,beforeMatrix:C,offsetMatrix:M,allMatrix:E,targetMatrix:b,targetTransform:F,inlineTransform:t.style.transform,transformOrigin:l,targetOrigin:f,is3d:y,offsetContainer:v,offsetRootContainer:m}}function yd(t,r,e,n){e===void 0&&(e=r);var a=0,i=0,o=0,s={},u=Ks(t);if(t&&(a=u.offsetWidth,i=u.offsetHeight),t){var l=xd(t,r,e,n),f=re(l.allMatrix,l.transformOrigin,a,i);s=w(w({},l),f);var v=re(l.allMatrix,[50,50],100,100);o=Zs([v.pos1,v.pos2],v.direction)}var c=4;return w(w(w({hasZoom:!1,width:a,height:i,rotation:o},u),{originalRootMatrix:St(c),rootMatrix:St(c),beforeMatrix:St(c),offsetMatrix:St(c),allMatrix:St(c),targetMatrix:St(c),targetTransform:"",inlineTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!n,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null,matrixes:[]}),s)}function _a(t,r,e,n,a,i){i===void 0&&(i=[]);var o=1,s=[0,0],u=$e(),l=$e(),f=$e(),v=$e(),c=[0,0],d={},p=yd(r,e,a,!0);if(r){var h=jt(r);i.forEach(function(R){d[R]=h(R)});var g=p.is3d?4:3,m=re(p.offsetMatrix,ft(p.transformOrigin,es(p.targetMatrix,g)),p.width,p.height);o=m.direction,s=ft(m.origin,[m.left-p.left,m.top-p.top]),v=be(p.offsetRootContainer);var x=Me(n,n,!0).offsetParent||p.offsetRootContainer;if(p.hasZoom){var y=re(mt(p.originalRootMatrix,p.allMatrix),p.transformOrigin,p.width,p.height),S=re(p.originalRootMatrix,dn(jt(x)("transformOrigin")).map(function(R){return parseFloat(R)}),x.offsetWidth,x.offsetHeight);if(u=jn(y,v),f=jn(S,v,x,!0),t){var _=y.left,b=y.top;l=jn({left:_,top:b,bottom:b,right:b},v)}}else{u=be(r),f=Pc(x),t&&(l=be(t));var E=f.left,D=f.top,C=f.clientLeft,M=f.clientTop,P=[u.left-E,u.top-D];c=Q(se(p.rootMatrix,P,4),[C+p.left,M+p.top])}}return w({targetClientRect:u,containerClientRect:f,moveableClientRect:l,rootContainerClientRect:v,beforeDirection:o,beforeOrigin:s,originalBeforeOrigin:s,target:r,style:d,offsetDelta:c},p)}function co(t){var r=t.pos1,e=t.pos2,n=t.pos3,a=t.pos4;if(!r||!e||!n||!a)return null;var i=Wr([r,e,n,a]),o=[i.minX,i.minY],s=Q(t.origin,o);return r=Q(r,o),e=Q(e,o),n=Q(n,o),a=Q(a,o),w(w({},t),{left:t.left,top:t.top,posDelta:o,pos1:r,pos2:e,pos3:n,pos4:a,origin:s,beforeOrigin:s,isPersisted:!0})}var ue=function(t){ke(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.state=w({container:null,gestos:{},renderLines:[[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]]],renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},_a(null)),e.renderState={},e.enabledAbles=[],e.targetAbles=[],e.controlAbles=[],e.rotation=0,e.scale=[1,1],e.isMoveableMounted=!1,e.isUnmounted=!1,e.events={mouseEnter:null,mouseLeave:null},e._emitter=new bn,e._prevOriginalDragTarget=null,e._originalDragTarget=null,e._prevDragTarget=null,e._dragTarget=null,e._prevPropTarget=null,e._propTarget=null,e._prevDragArea=!1,e._isPropTargetChanged=!1,e._hasFirstTarget=!1,e._reiszeObserver=null,e._observerId=0,e._mutationObserver=null,e._rootContainer=null,e._viewContainer=null,e._viewClassNames=[],e._store={},e.checkUpdateRect=function(){if(!e.isDragging()){var n=e.props.parentMoveable;if(n){n.checkUpdateRect();return}Al(e._observerId),e._observerId=Oo(function(){e.isDragging()||e.updateRect()})}},e._onPreventClick=function(n){n.stopPropagation(),n.preventDefault()},e}return r.prototype.render=function(){var e=this.props,n=this.getState(),a=e.parentPosition,i=e.className,o=e.target,s=e.zoom,u=e.cspNonce,l=e.translateZ,f=e.cssStyled,v=e.groupable,c=e.linePadding,d=e.controlPadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var p=T(a||[0,0],2),h=p[0],g=p[1],m=n.left,x=n.top,y=n.target,S=n.direction,_=n.hasFixed,b=n.offsetDelta,E=e.targets,D=this.isDragging(),C={};this.getEnabledAbles().forEach(function(A){C["data-able-".concat(A.name.toLowerCase())]=!0});var M=this._getAbleClassName(),P=E&&E.length&&(y||v)||o||!this._hasFirstTarget&&this.state.isPersisted,R=this.controlBox||this.props.firstRenderState||this.props.persistData,O=[m-h,x-g];!v&&e.useAccuratePosition&&(O[0]+=b[0],O[1]+=b[1]);var I={position:_?"fixed":"absolute",display:P?"block":"none",visibility:R?"visible":"hidden",transform:"translate3d(".concat(O[0],"px, ").concat(O[1],"px, ").concat(l,")"),"--zoom":s,"--zoompx":"".concat(s,"px")};return c&&(I["--moveable-line-padding"]=c),d&&(I["--moveable-control-padding"]=d),ar(f,w({cspNonce:u,ref:dr(this,"controlBox"),className:"".concat($("control-box",S===-1?"reverse":"",D?"dragging":"")," ").concat(M," ").concat(i)},C,{onClick:this._onPreventClick,style:I}),this.renderAbles(),this._renderLines())},r.prototype.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1;var e=this.props,n=e.parentMoveable,a=e.container;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!a&&!n&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},r.prototype.componentDidUpdate=function(e){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateTargets(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(e)},r.prototype.componentWillUnmount=function(){var e,n;this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off(),(e=this._reiszeObserver)===null||e===void 0||e.disconnect(),(n=this._mutationObserver)===null||n===void 0||n.disconnect();var a=this._viewContainer;a&&this._changeAbleViewClassNames([]),Qr(this,!1),Qr(this,!0);var i=this.events;for(var o in i){var s=i[o];s&&s.destroy()}},r.prototype.getTargets=function(){var e=this.props.target;return e?[e]:[]},r.prototype.getAble=function(e){var n=this.props.ables||[];return qt(n,function(a){return a.name===e})},r.prototype.getContainer=function(){var e=this.props,n=e.parentMoveable,a=e.wrapperMoveable,i=e.container;return i||a&&a.getContainer()||n&&n.getContainer()||this.controlBox.parentElement},r.prototype.getControlBoxElement=function(){return this.controlBox},r.prototype.getDragElement=function(){return this._dragTarget},r.prototype.isMoveableElement=function(e){var n;return e&&(((n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"class"))||"").indexOf(Ha)>-1},r.prototype.dragStart=function(e,n){n===void 0&&(n=e.target);var a=this.targetGesto,i=this.controlGesto;return a&&si(this)({inputEvent:e},n)?a.isFlag()||a.triggerDragStart(e):i&&this.isMoveableElement(n)&&(i.isFlag()||i.triggerDragStart(e)),this},r.prototype.hitTest=function(e){var n=this.state,a=n.target,i=n.pos1,o=n.pos2,s=n.pos3,u=n.pos4,l=n.targetClientRect;if(!a)return 0;var f;if(fe(e)){var v=e.getBoundingClientRect();f={left:v.left,top:v.top,width:v.width,height:v.height}}else f=w({width:0,height:0},e);var c=f.left,d=f.top,p=f.width,h=f.height,g=zi([i,o,u,s],l),m=kf(g,[[c,d],[c+p,d],[c+p,d+h],[c,d+h]]),x=os(g);return!m||!x?0:Math.min(100,m/x*100)},r.prototype.isInside=function(e,n){var a=this.state,i=a.target,o=a.pos1,s=a.pos2,u=a.pos3,l=a.pos4,f=a.targetClientRect;return i?ia([e,n],zi([o,s,l,u],f)):!1},r.prototype.updateRect=function(e,n,a){a===void 0&&(a=!0);var i=this.props,o=!i.parentPosition&&!i.wrapperMoveable;o&&ie(!0);var s=i.parentMoveable,u=this.state,l=u.target||i.target,f=this.getContainer(),v=s?s._rootContainer:this._rootContainer,c=_a(this.controlBox,l,f,f,v||f,this._getRequestStyles());if(!l&&this._hasFirstTarget&&i.persistData){var d=co(i.persistData);for(var p in d)c[p]=d[p]}o&&ie(),this.updateState(c,s?!1:a)},r.prototype.isDragging=function(e){var n,a,i=this.targetGesto,o=this.controlGesto;if(i!=null&&i.isFlag()){if(!e)return!0;var s=i.getEventData();return!!(!((n=s[e])===null||n===void 0)&&n.isEventStart)}if(o!=null&&o.isFlag()){if(!e)return!0;var s=o.getEventData();return!!(!((a=s[e])===null||a===void 0)&&a.isEventStart)}return!1},r.prototype.updateTarget=function(e){this.updateRect(e,!0)},r.prototype.getRect=function(){var e=this.state,n=er(this.state),a=T(n,4),i=a[0],o=a[1],s=a[2],u=a[3],l=tr(n),f=e.width,v=e.height,c=l.width,d=l.height,p=l.left,h=l.top,g=[e.left,e.top],m=ft(g,e.origin),x=ft(g,e.beforeOrigin),y=e.transformOrigin;return{width:c,height:d,left:p,top:h,pos1:i,pos2:o,pos3:s,pos4:u,offsetWidth:f,offsetHeight:v,beforeOrigin:x,origin:m,transformOrigin:y,rotation:this.getRotation()}},r.prototype.getManager=function(){return this},r.prototype.stopDrag=function(e){if(!e||e==="target"){var n=this.targetGesto;(n==null?void 0:n.isIdle())===!1&&ya(this,!1),n==null||n.stop()}if(!e||e==="control"){var n=this.controlGesto;(n==null?void 0:n.isIdle())===!1&&ya(this,!0),n==null||n.stop()}},r.prototype.getRotation=function(){var e=this.state,n=e.pos1,a=e.pos2,i=e.direction;return Hv(n,a,i)},r.prototype.request=function(e,n,a){n===void 0&&(n={});var i=this,o=i.props,s=o.parentMoveable||o.wrapperMoveable||i,u=s.props.ables,l=o.groupable,f=qt(u,function(m){return m.name===e});if(this.isDragging()||!f||!f.request)return{request:function(){return this},requestEnd:function(){return this}};var v=f.request(i),c=a||n.isInstant,d=v.isControl?"controlAbles":"targetAbles",p="".concat(l?"Group":"").concat(v.isControl?"Control":""),h=N([],T(s[d]),!1),g={request:function(m){return _e(i,h,["drag"],p,"",w(w({},v.request(m)),{requestAble:e,isRequest:!0}),c),g},requestEnd:function(){return _e(i,h,["drag"],p,"End",w(w({},v.requestEnd()),{requestAble:e,isRequest:!0}),c),g}};return _e(i,h,["drag"],p,"Start",w(w({},v.requestStart(n)),{requestAble:e,isRequest:!0}),c),c?g.request(n).requestEnd():g},r.prototype.getMoveables=function(){return[this]},r.prototype.destroy=function(){this.componentWillUnmount()},r.prototype.updateRenderPoses=function(){var e=this.getState(),n=this.props,a=n.padding,i=e.originalBeforeOrigin,o=e.transformOrigin,s=e.allMatrix,u=e.is3d,l=e.pos1,f=e.pos2,v=e.pos3,c=e.pos4,d=e.left,p=e.top,h=e.isPersisted,g=n.zoom||1;if(!a&&g<=1){e.renderPoses=[l,f,v,c],e.renderLines=[[l,f],[f,c],[c,v],[v,l]];return}var m=ou(a||{}),x=m.left,y=m.top,S=m.bottom,_=m.right,b=u?4:3,E=[];h?E=o:this.controlBox&&n.groupable?E=i:E=ft(i,[d,p]);var D=sn(b,Lr(E.map(function(I){return-I}),b),s,Lr(o,b)),C=Jt(D,l,[-x,-y],b),M=Jt(D,f,[_,-y],b),P=Jt(D,v,[-x,S],b),R=Jt(D,c,[_,S],b);if(e.renderPoses=[C,M,P,R],e.renderLines=[[C,M],[M,R],[R,P],[P,C]],g){var O=g/2;e.renderLines=[[Jt(D,l,[-x-O,-y],b),Jt(D,f,[_+O,-y],b)],[Jt(D,f,[_,-y-O],b),Jt(D,c,[_,S+O],b)],[Jt(D,c,[_+O,S],b),Jt(D,v,[-x-O,S],b)],[Jt(D,v,[-x,S+O],b),Jt(D,l,[-x,-y-O],b)]]}},r.prototype.checkUpdate=function(){this._isPropTargetChanged=!1;var e=this.props,n=e.target,a=e.container,i=e.parentMoveable,o=this.state,s=o.target,u=o.container;if(!(!s&&!n)){this.updateAbles();var l=!Sa(s,n),f=l||!Sa(u,a);if(f){var v=a||this.controlBox;v&&this.unsetAbles(),this.updateState({target:n,container:a}),!i&&v&&this.updateRect("End",!1,!1),this._isPropTargetChanged=l}}},r.prototype.waitToChangeTarget=function(){return new Promise(function(){})},r.prototype.triggerEvent=function(e,n){var a=this.props;if(this._emitter.trigger(e,n),a.parentMoveable&&n.isRequest&&!n.isRequestChild)return a.parentMoveable.triggerEvent(e,n,!0);var i=a[e];return i&&i(n)},r.prototype.useCSS=function(e,n){var a=this.props.customStyledMap,i=e+n;return a[i]||(a[i]=ls(e,n)),a[i]},r.prototype.getState=function(){var e,n=this.props;(n.target||!((e=n.targets)===null||e===void 0)&&e.length)&&(this._hasFirstTarget=!0);var a=this.controlBox,i=n.persistData,o=n.firstRenderState;if(o&&!a)return o;if(!this._hasFirstTarget&&i){var s=co(i);if(s)return this.updateState(s,!1),this.state}return this.state.isPersisted=!1,this.state},r.prototype.updateSelectors=function(){},r.prototype.unsetAbles=function(){var e=this;this.targetAbles.forEach(function(n){n.unset&&n.unset(e)})},r.prototype.updateAbles=function(e,n){e===void 0&&(e=this.props.ables),n===void 0&&(n="");var a=this.props,i=a.triggerAblesSimultaneously,o=this.getEnabledAbles(e),s="drag".concat(n,"Start"),u="pinch".concat(n,"Start"),l="drag".concat(n,"ControlStart"),f=Je(o,[s,u],i),v=Je(o,[l],i);this.enabledAbles=o,this.targetAbles=f,this.controlAbles=v},r.prototype.updateState=function(e,n){if(n){if(this.isUnmounted)return;this.setState(e)}else{var a=this.state;for(var i in e)a[i]=e[i]}},r.prototype.getEnabledAbles=function(e){e===void 0&&(e=this.props.ables);var n=this.props;return e.filter(function(a){return a&&(a.always&&n[a.name]!==!1||n[a.name])})},r.prototype.renderAbles=function(){var e=this,n=this.props,a=n.triggerAblesSimultaneously,i={createElement:ar};return this.renderState={},Fv(eu(Je(this.getEnabledAbles(),["render"],a).map(function(o){var s=o.render;return s(e,i)||[]})).filter(function(o){return o}),function(o){var s=o.key;return s}).map(function(o){return o[0]})},r.prototype.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},r.prototype._getRequestStyles=function(){var e=this.getEnabledAbles().reduce(function(n,a){var i,o,s=(o=(i=a.requestStyle)===null||i===void 0?void 0:i.call(a))!==null&&o!==void 0?o:[];return N(N([],T(n),!1),T(s),!1)},N([],T(this.props.requestStyles||[]),!1));return e},r.prototype._updateObserver=function(e){this._updateResizeObserver(e),this._updateMutationObserver(e)},r.prototype._updateEvents=function(){var e=this.targetAbles.length,n=this.controlAbles.length,a=this._dragTarget,i=!e&&this.targetGesto||this._isTargetChanged(!0);i&&(Qr(this,!1),this.updateState({gestos:{}})),n||Qr(this,!0),a&&e&&!this.targetGesto&&(this.targetGesto=hu(this,a,"")),!this.controlGesto&&n&&(this.controlGesto=gu(this,"Control"))},r.prototype._updateTargets=function(){var e=this.props;this._prevPropTarget=this._propTarget,this._prevDragTarget=this._dragTarget,this._prevOriginalDragTarget=this._originalDragTarget,this._prevDragArea=e.dragArea,this._propTarget=e.target,this._originalDragTarget=e.dragTarget||e.target,this._dragTarget=fr(this._originalDragTarget,!0)},r.prototype._renderLines=function(){var e=this.props,n=e,a=n.zoom,i=n.hideDefaultLines,o=n.hideChildMoveableDefaultLines,s=n.parentMoveable;if(i||s&&o)return[];var u=this.getState(),l={createElement:ar};return u.renderLines.map(function(f,v){return we(l,"",f[0],f[1],a,"render-line-".concat(v))})},r.prototype._isTargetChanged=function(e){var n=this.props,a=n.dragTarget||n.target,i=this._prevOriginalDragTarget,o=this._prevDragArea,s=n.dragArea,u=!s&&i!==a,l=(e||s)&&o!==s;return u||l||this._prevPropTarget!=this._propTarget},r.prototype._updateNativeEvents=function(){var e=this,n=this.props,a=n.dragArea?this.areaElement:this.state.target,i=this.events,o=xr(i);if(this._isTargetChanged())for(var s in i){var u=i[s];u&&u.destroy(),i[s]=null}if(a){var l=this.enabledAbles;o.forEach(function(f){var v=Je(l,[f]),c=v.length>0,d=i[f];if(!c){d&&(d.destroy(),i[f]=null);return}d||(d=new md(a,e,f),i[f]=d),d.setAbles(v)})}},r.prototype._checkUpdateRootContainer=function(){var e=this.props.rootContainer;!this._rootContainer&&e&&(this._rootContainer=fr(e,!0))},r.prototype._checkUpdateViewContainer=function(){var e=this.props.viewContainer;!this._viewContainer&&e&&(this._viewContainer=fr(e,!0));var n=this._viewContainer;n&&this._changeAbleViewClassNames(N(N([],T(this._getAbleViewClassNames()),!1),[this.isDragging()?Kv:""],!1))},r.prototype._changeAbleViewClassNames=function(e){var n=this._viewContainer,a=ru(e.filter(Boolean),function(l){return l}).map(function(l){var f=T(l,1),v=f[0];return v}),i=this._viewClassNames,o=Ie(i,a),s=o.removed,u=o.added;s.forEach(function(l){zo(n,i[l])}),u.forEach(function(l){Ao(n,a[l])}),this._viewClassNames=a},r.prototype._getAbleViewClassNames=function(){var e=this;return(this.getEnabledAbles().map(function(n){var a;return((a=n.viewClassName)===null||a===void 0?void 0:a.call(n,e))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},r.prototype._getAbleClassName=function(e){var n=this;e===void 0&&(e="");var a=this.getEnabledAbles(),i=this.targetGesto,o=this.controlGesto,s=i!=null&&i.isFlag()?i.getEventData():{},u=o!=null&&o.isFlag()?o.getEventData():{};return a.map(function(l){var f,v,c,d=l.name,p=((f=l.className)===null||f===void 0?void 0:f.call(l,n))||"";return(!((v=s[d])===null||v===void 0)&&v.isEventStart||!((c=u[d])===null||c===void 0)&&c.isEventStart)&&(p+=" ".concat($("".concat(d).concat(e,"-dragging")))),p.trim()}).filter(Boolean).join(" ")},r.prototype._updateResizeObserver=function(e){var n,a=this.props,i=a.target,o=Mr(this.getControlBoxElement());if(!o.ResizeObserver||!i||!a.useResizeObserver){(n=this._reiszeObserver)===null||n===void 0||n.disconnect();return}if(!(e.target===i&&this._reiszeObserver)){var s=new o.ResizeObserver(this.checkUpdateRect);s.observe(i,{box:"border-box"}),this._reiszeObserver=s}},r.prototype._updateMutationObserver=function(e){var n=this,a,i=this.props,o=i.target,s=Mr(this.getControlBoxElement());if(!s.MutationObserver||!o||!i.useMutationObserver){(a=this._mutationObserver)===null||a===void 0||a.disconnect();return}if(!(e.target===o&&this._mutationObserver)){var u=new s.MutationObserver(function(l){var f,v;try{for(var c=tc(l),d=c.next();!d.done;d=c.next()){var p=d.value;p.type==="attributes"&&p.attributeName==="style"&&n.checkUpdateRect()}}catch(h){f={error:h}}finally{try{d&&!d.done&&(v=c.return)&&v.call(c)}finally{if(f)throw f.error}}});u.observe(o,{attributes:!0}),this._mutationObserver=u}},r.defaultProps={dragTargetSelf:!1,target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,warpSelf:!1,svgOrigin:"",dragContainer:null,useResizeObserver:!1,useMutationObserver:!1,preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,linePadding:0,controlPadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,dragFocusedInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:Vs,firstRenderState:null,persistData:null,viewContainer:null,requestStyles:[],useAccuratePosition:!1},r}(Wo),ui={name:"groupable",props:["defaultGroupRotate","useDefaultGroupRotate","defaultGroupOrigin","groupable","groupableProps","targetGroups","hideChildMoveableDefaultLines"],events:[],render:function(t,r){var e,n=t.props,a=n.targets||[],i=t.getState(),o=i.left,s=i.top,u=i.isPersisted,l=n.zoom||1,f=t.renderGroupRects,v=((e=n.persistData)===null||e===void 0?void 0:e.children)||[];u?a=v.map(function(){return null}):v=[];var c=te(t,"parentPosition",[o,s],function(p){return p.join(",")}),d=te(t,"requestStyles",t.getRequestChildStyles(),function(p){return p.join(",")});return t.moveables=t.moveables.slice(0,a.length),N(N([],T(a.map(function(p,h){return r.createElement(ue,{key:"moveable"+h,ref:Co(t,"moveables",h),target:p,origin:!1,requestStyles:d,cssStyled:n.cssStyled,customStyledMap:n.customStyledMap,useResizeObserver:n.useResizeObserver,useMutationObserver:n.useMutationObserver,hideChildMoveableDefaultLines:n.hideChildMoveableDefaultLines,parentMoveable:t,parentPosition:[o,s],persistData:v[h],zoom:l})})),!1),T(eu(f.map(function(p,h){var g=p.pos1,m=p.pos2,x=p.pos3,y=p.pos4,S=[g,m,x,y];return[[0,1],[1,3],[3,2],[2,0]].map(function(_,b){var E=T(_,2),D=E[0],C=E[1];return we(r,"",Q(S[D],c),Q(S[C],c),l,"group-rect-".concat(h,"-").concat(b))})}))),!1)}},Sd=Fe("clickable",{props:["clickable"],events:["click","clickGroup"],always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(t,r){r.datas.inputTarget=r.inputEvent&&r.inputEvent.target},dragEnd:function(t,r){var e=t.props.target,n=r.inputEvent,a=r.inputTarget,i=t.isMoveableElement(a),o=!i&&t.controlBox.contains(a);if(!(!n||!a||r.isDrag||t.isMoveableElement(a)||o)){var s=e.contains(a);U(t,"onClick",at(t,r,{isDouble:r.isDouble,inputTarget:a,isTarget:e===a,moveableTarget:t.props.target,containsTarget:s}))}},dragGroupEnd:function(t,r){var e=r.inputEvent,n=r.inputTarget;if(!(!e||!n||r.isDrag||t.isMoveableElement(n)||r.datas.inputTarget===n)){var a=t.props.targets,i=a.indexOf(n),o=i>-1,s=!1;i===-1&&(i=mr(a,function(u){return u.contains(n)}),s=i>-1),U(t,"onClickGroup",at(t,r,{isDouble:r.isDouble,targets:a,inputTarget:n,targetIndex:i,isTarget:o,containsTarget:s,moveableTarget:a[i]}))}},dragControlEnd:function(t,r){this.dragEnd(t,r)},dragGroupControlEnd:function(t,r){this.dragEnd(t,r)}});function Ur(t){var r=t.originalDatas.draggable;return r||(t.originalDatas.draggable={},r=t.originalDatas.draggable),w(w({},t),{datas:r})}var bd=Fe("edgeDraggable",{css:[`.edge.edgeDraggable.line {
cursor: move;
}`],render:function(t,r){var e=t.props,n=e.edgeDraggable;return n?Cs(r,"edgeDraggable",n,t.getState().renderPoses,e.zoom):[]},dragCondition:function(t,r){var e,n=t.props,a=(e=r.inputEvent)===null||e===void 0?void 0:e.target;return!n.edgeDraggable||!a?!1:!n.draggable&&Rt(a,$("direction"))&&Rt(a,$("edge"))&&Rt(a,$("edgeDraggable"))},dragStart:function(t,r){return Lt.dragStart(t,Ur(r))},drag:function(t,r){return Lt.drag(t,Ur(r))},dragEnd:function(t,r){return Lt.dragEnd(t,Ur(r))},dragGroupCondition:function(t,r){var e,n=t.props,a=(e=r.inputEvent)===null||e===void 0?void 0:e.target;return!n.edgeDraggable||!a?!1:!n.draggable&&Rt(a,$("direction"))&&Rt(a,$("line"))},dragGroupStart:function(t,r){return Lt.dragGroupStart(t,Ur(r))},dragGroup:function(t,r){return Lt.dragGroup(t,Ur(r))},dragGroupEnd:function(t,r){return Lt.dragGroupEnd(t,Ur(r))},unset:function(t){return Lt.unset(t)}}),xu={name:"individualGroupable",props:["individualGroupable","individualGroupableProps"],events:[]},li=[du,lu,Cv,Xv,Lt,bd,ha,Vv,jv,sv,Jv,Qv,Zv,cd,fd,hd,ui,xu,Sd,uu,pu],_d=li.reduce(function(t,r){return(r.events||[]).forEach(function(e){Io(t,e)}),t},[]),Ed=li.reduce(function(t,r){return(r.props||[]).forEach(function(e){Io(t,e)}),t},[]);function vo(t,r){var e=T(t,3),n=e[0],a=e[1],i=e[2];return(n*r[0]+a*r[1]+i)/Math.sqrt(n*n+a*a)}function rn(t,r){var e=T(t,2),n=e[0],a=e[1];return-n*r[0]-a*r[1]}function po(t,r){return Math.max.apply(Math,N([],T(t.map(function(e){var n=T(e,4),a=n[0],i=n[1],o=n[2],s=n[3];return Math.max(a[r],i[r],o[r],s[r])})),!1))}function ho(t,r){return Math.min.apply(Math,N([],T(t.map(function(e){var n=T(e,4),a=n[0],i=n[1],o=n[2],s=n[3];return Math.min(a[r],i[r],o[r],s[r])})),!1))}function Dd(t,r){var e,n,a,i=[0,0],o=[0,0],s=[0,0],u=[0,0],l=0,f=0;if(!t.length)return{pos1:i,pos2:o,pos3:s,pos4:u,minX:0,minY:0,maxX:0,maxY:0,width:l,height:f,rotation:r};var v=rt(r,Yt);if(v%90){var c=v/180*Math.PI,d=Math.tan(c),p=-1/d,h=[ca,ki],g=[[0,0],[0,0]],m=[ca,ki],x=[[0,0],[0,0]];t.forEach(function(q){q.forEach(function(H){var j=vo([-d,1,0],H),Y=vo([-p,1,0],H);h[0]>j&&(g[0]=H,h[0]=j),h[1]<j&&(g[1]=H,h[1]=j),m[0]>Y&&(x[0]=H,m[0]=Y),m[1]<Y&&(x[1]=H,m[1]=Y)})});var y=T(g,2),S=y[0],_=y[1],b=T(x,2),E=b[0],D=b[1],C=[-d,1,rn([-d,1],S)],M=[-d,1,rn([-d,1],_)],P=[-p,1,rn([-p,1],E)],R=[-p,1,rn([-p,1],D)];e=T([[C,P],[C,R],[M,P],[M,R]].map(function(q){var H=T(q,2),j=H[0],Y=H[1];return La(j,Y)[0]}),4),i=e[0],o=e[1],s=e[2],u=e[3],l=m[1]-m[0],f=h[1]-h[0]}else{var O=ho(t,0),I=ho(t,1),A=po(t,0),k=po(t,1);if(i=[O,I],o=[A,I],s=[O,k],u=[A,k],l=A-O,f=k-I,v%180){var F=[s,i,u,o];n=T(F,4),i=n[0],o=n[1],s=n[2],u=n[3],l=k-I,f=A-O}}if(v%360>180){var F=[u,s,o,i];a=T(F,4),i=a[0],o=a[1],s=a[2],u=a[3]}var G=Wr([i,o,s,u]),L=G.minX,W=G.minY,z=G.maxX,V=G.maxY;return{pos1:i,pos2:o,pos3:s,pos4:u,width:l,height:f,minX:L,minY:W,maxX:z,maxY:V,rotation:r}}function yu(t,r){var e=r.map(function(n){if(wt(n)){var a=yu(t,n),i=a.length;return i>1?a:i===1?a[0]:null}else{var o=qt(t,function(s){var u=s.manager;return u.props.target===n});return o?(o.finded=!0,o.manager):null}}).filter(Boolean);return e.length===1&&wt(e[0])?e[0]:e}var Cd=function(t){ke(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.differ=new is,e.moveables=[],e.transformOrigin="50% 50%",e.renderGroupRects=[],e._targetGroups=[],e._hasFirstTargets=!1,e}return r.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this)},r.prototype.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},r.prototype.getTargets=function(){return this.props.targets},r.prototype.updateRect=function(e,n,a){var i;a===void 0&&(a=!0);var o=this.state;if(!this.controlBox||o.isPersisted)return;ie(!0),this.moveables.forEach(function(J){J.updateRect(e,!1,!1)});var s=this.props,u=this.moveables,l=o.target||s.target,f=u.map(function(J){return{finded:!1,manager:J}}),v=this.props.targetGroups||[],c=yu(f,v),d=s.useDefaultGroupRotate;c.push.apply(c,N([],T(f.filter(function(J){var it=J.finded;return!it}).map(function(J){var it=J.manager;return it})),!1));var p=[],h=!n||e!==""&&s.updateGroup,g=s.defaultGroupRotate||0;if(!this._hasFirstTargets){var m=(i=s.persistData)===null||i===void 0?void 0:i.rotation;m!=null&&(g=m)}function x(J,it,lt){var X=J.map(function(xt){if(wt(xt)){var ot=x(xt,it),dt=[ot.pos1,ot.pos2,ot.pos3,ot.pos4];return p.push(ot),{poses:dt,rotation:ot.rotation}}else return{poses:er(xt.state),rotation:xt.getRotation()}}),Z=X.map(function(xt){var ot=xt.rotation;return ot}),vt=0,et=Z[0],nt=Z.every(function(xt){return Math.abs(et-xt)<.1});h?vt=!d&&nt?et:g:vt=!d&&!lt&&nt?et:it;var st=X.map(function(xt){var ot=xt.poses;return ot}),pt=Dd(st,vt);return pt}var y=x(c,this.rotation,!0);h&&(this.rotation=y.rotation,this.transformOrigin=s.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=v,this.renderGroupRects=p;var S=this.transformOrigin,_=this.rotation,b=this.scale,E=y.width,D=y.height,C=y.minX,M=y.minY,P=Yv([[0,0],[E,0],[0,D],[E,D]],ai(S,E,D),this.rotation/180*Math.PI),R=Wr(P.result),O=R.minX,I=R.minY,A=" rotate(".concat(_,"deg)")+" scale(".concat(Wt(b[0]),", ").concat(Wt(b[1]),")"),k="translate(".concat(-O,"px, ").concat(-I,"px)").concat(A);this.controlBox.style.transform="translate3d(".concat(C,"px, ").concat(M,"px, ").concat(this.props.translateZ||0,")"),l.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(S,";")+"width:".concat(E,"px;height:").concat(D,"px;")+"transform: ".concat(k),o.width=E,o.height=D;var F=this.getContainer(),G=_a(this.controlBox,l,this.controlBox,this.getContainer(),this._rootContainer||F,[]),L=[G.left,G.top],W=T(er(G),4),z=W[0],V=W[1],q=W[2],H=W[3],j=Wr([z,V,q,H]),Y=[j.minX,j.minY],K=Wt(b[0]*b[1]);G.pos1=Q(z,Y),G.pos2=Q(V,Y),G.pos3=Q(q,Y),G.pos4=Q(H,Y),G.left=C-G.left+Y[0],G.top=M-G.top+Y[1],G.origin=Q(ft(L,G.origin),Y),G.beforeOrigin=Q(ft(L,G.beforeOrigin),Y),G.originalBeforeOrigin=ft(L,G.originalBeforeOrigin),G.transformOrigin=Q(ft(L,G.transformOrigin),Y),l.style.transform="translate(".concat(-O-Y[0],"px, ").concat(-I-Y[1],"px)")+A,ie(),this.updateState(w(w({},G),{posDelta:Y,direction:K,beforeDirection:K}),a)},r.prototype.getRect=function(){return w(w({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(e){return e.getRect()})})},r.prototype.triggerEvent=function(e,n,a){if(a||e.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,e,n);this._emitter.trigger(e,n)},r.prototype.getRequestChildStyles=function(){var e=this.getEnabledAbles().reduce(function(n,a){var i,o,s=(o=(i=a.requestChildStyle)===null||i===void 0?void 0:i.call(a))!==null&&o!==void 0?o:[];return N(N([],T(n),!1),T(s),!1)},[]);return e},r.prototype.getMoveables=function(){return N([],T(this.moveables),!1)},r.prototype.updateAbles=function(){t.prototype.updateAbles.call(this,N(N([],T(this.props.ables),!1),[ui],!1),"Group")},r.prototype._updateTargets=function(){t.prototype._updateTargets.call(this),this._originalDragTarget=this.props.dragTarget||this.areaElement,this._dragTarget=fr(this._originalDragTarget,!0)},r.prototype._updateEvents=function(){var e=this.state,n=this.props,a=this._prevDragTarget,i=n.dragTarget||this.areaElement,o=n.targets,s=this.differ.update(o),u=s.added,l=s.changed,f=s.removed,v=u.length||f.length;(v||this._prevOriginalDragTarget!==this._originalDragTarget)&&(Qr(this,!1),Qr(this,!0),this.updateState({gestos:{}})),a!==i&&(e.target=null),e.target||(e.target=this.areaElement,this.controlBox.style.display="block"),e.target&&(this.targetGesto||(this.targetGesto=hu(this,this._dragTarget,"Group")),this.controlGesto||(this.controlGesto=gu(this,"GroupControl")));var c=!Sa(e.container,n.container);c&&(e.container=n.container),(c||v||this.transformOrigin!==(n.defaultGroupOrigin||"50% 50%")||l.length||o.length&&!iu(this._targetGroups,n.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!v},r.prototype._updateObserver=function(){},r.defaultProps=w(w({},ue.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),r}(ue),wd=function(t){ke(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.moveables=[],e}return r.prototype.render=function(){var e=this,n,a=this.props,i=a.cspNonce,o=a.cssStyled,s=a.persistData,u=a.targets||[],l=u.length,f=this.isUnmounted||!l,v=(n=s==null?void 0:s.children)!==null&&n!==void 0?n:[];return f&&!l&&v.length?u=v.map(function(){return null}):f||(v=[]),ar(o,{cspNonce:i,ref:dr(this,"controlBox"),className:$("control-box")},u.map(function(c,d){var p,h,g=(h=(p=a.individualGroupableProps)===null||p===void 0?void 0:p.call(a,c,d))!==null&&h!==void 0?h:{};return ar(ue,w({key:"moveable"+d,ref:Co(e,"moveables",d)},a,g,{target:c,wrapperMoveable:e,isWrapperMounted:e.isMoveableMounted,persistData:v[d]}))}))},r.prototype.componentDidMount=function(){},r.prototype.componentDidUpdate=function(){},r.prototype.getTargets=function(){return this.props.targets},r.prototype.updateRect=function(e,n,a){a===void 0&&(a=!0),ie(!0),this.moveables.forEach(function(i){i.updateRect(e,n,a)}),ie()},r.prototype.getRect=function(){return w(w({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(e){return e.getRect()})})},r.prototype.request=function(e,n,a){n===void 0&&(n={});var i=this.moveables.map(function(u){return u.request(e,w(w({},n),{isInstant:!1}),!1)}),o=a||n.isInstant,s={request:function(u){return i.forEach(function(l){return l.request(u)}),this},requestEnd:function(){return i.forEach(function(u){return u.requestEnd()}),this}};return o?s.request(n).requestEnd():s},r.prototype.dragStart=function(e,n){n===void 0&&(n=e.target);var a=n,i=qt(this.moveables,function(o){var s=o.getTargets()[0],u=o.getControlBoxElement(),l=o.getDragElement();return!s||!l?!1:l===a||l.contains(a)||l!==s&&s===a||s.contains(a)||u===a||u.contains(a)});return i&&i.dragStart(e,n),this},r.prototype.hitTest=function(){return 0},r.prototype.isInside=function(){return!1},r.prototype.isDragging=function(){return!1},r.prototype.getDragElement=function(){return null},r.prototype.getMoveables=function(){return N([],T(this.moveables),!1)},r.prototype.updateRenderPoses=function(){},r.prototype.checkUpdate=function(){},r.prototype.triggerEvent=function(){},r.prototype.updateAbles=function(){},r.prototype._updateEvents=function(){},r.prototype._updateObserver=function(){},r}(ue);function Su(t,r){var e=[];return t.forEach(function(n){if(n){if(Vt(n)){r[n]&&e.push.apply(e,N([],T(r[n]),!1));return}wt(n)?e.push.apply(e,N([],T(Su(n,r)),!1)):e.push(n)}}),e}function bu(t,r){var e=[];return t.forEach(function(n){if(n){if(Vt(n)){r[n]&&e.push.apply(e,N([],T(r[n]),!1));return}wt(n)?e.push(bu(n,r)):e.push(n)}}),e}function _u(t,r){return t.length!==r.length||t.some(function(e,n){var a=r[n];return!e&&!a?!1:e!=a?wt(e)&&wt(a)?_u(e,a):!0:!1})}var Md=function(t){ke(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.refTargets=[],e.selectorMap={},e._differ=new is,e._elementTargets=[],e._tmpRefTargets=[],e._tmpSelectorMap={},e._onChangeTargets=null,e}return r.makeStyled=function(){var e={},n=this.getTotalAbles();n.forEach(function(i){var o=i.css;o&&o.forEach(function(s){e[s]=!0})});var a=xr(e).join(`
`);this.defaultStyled=ls("div",bl(Ha,cc+a))},r.getTotalAbles=function(){return N([lu,ui,xu,uu],T(this.defaultAbles),!1)},r.prototype.render=function(){var e,n=this.constructor;n.defaultStyled||n.makeStyled();var a=this.props,i=a.ables,o=a.props,s=Jf(a,["ables","props"]),u=T(this._updateRefs(!0),2),l=u[0],f=u[1],v=Su(l,f),c=v.length>1,d=n.getTotalAbles(),p=N(N([],T(d),!1),T(i||[]),!1),h=w(w(w({},s),o||{}),{ables:p,cssStyled:n.defaultStyled,customStyledMap:n.customStyledMap});this._elementTargets=v;var g=null,m=this.moveable,x=s.persistData;if(x!=null&&x.children&&(c=!0),s.individualGroupable)return ar(wd,w({key:"individual-group",ref:dr(this,"moveable")},h,{target:null,targets:v}));if(c){var y=bu(l,f);if(m&&!m.props.groupable&&!m.props.individualGroupable){var S=m.props.target;S&&v.indexOf(S)>-1&&(g=w({},m.state))}return ar(Cd,w({key:"group",ref:dr(this,"moveable")},h,(e=s.groupableProps)!==null&&e!==void 0?e:{},{target:null,targets:v,targetGroups:y,firstRenderState:g}))}else{var _=v[0];if(m&&(m.props.groupable||m.props.individualGroupable)){var b=m.moveables||[],E=qt(b,function(D){return D.props.target===_});E&&(g=w({},E.state))}return ar(ue,w({key:"single",ref:dr(this,"moveable")},h,{target:_,firstRenderState:g}))}},r.prototype.componentDidMount=function(){this._checkChangeTargets()},r.prototype.componentDidUpdate=function(){this._checkChangeTargets()},r.prototype.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},r.prototype.getTargets=function(){var e,n;return(n=(e=this.moveable)===null||e===void 0?void 0:e.getTargets())!==null&&n!==void 0?n:[]},r.prototype.updateSelectors=function(){this.selectorMap={},this._updateRefs(),this.forceUpdate()},r.prototype.waitToChangeTarget=function(){var e=this,n;return this._onChangeTargets=function(){e._onChangeTargets=null,n()},new Promise(function(a){n=a})},r.prototype.waitToChangeTargets=function(){return this.waitToChangeTarget()},r.prototype.getManager=function(){return this.moveable},r.prototype.getMoveables=function(){return this.moveable.getMoveables()},r.prototype.getDragElement=function(){return this.moveable.getDragElement()},r.prototype._updateRefs=function(e){var n=this.refTargets,a=ni(this.props.target||this.props.targets),i=typeof document<"u",o=_u(n,a),s=this.selectorMap,u={};return this.refTargets.forEach(function l(f){if(Vt(f)){var v=s[f];v?u[f]=s[f]:i&&(o=!0,u[f]=[].slice.call(document.querySelectorAll(f)))}else wt(f)&&f.forEach(l)}),this._tmpRefTargets=a,this._tmpSelectorMap=u,[a,u,!e&&o]},r.prototype._checkChangeTargets=function(){var e,n,a;this.refTargets=this._tmpRefTargets,this.selectorMap=this._tmpSelectorMap;var i=this._differ.update(this._elementTargets),o=i.added,s=i.removed,u=o.length||s.length;u&&((n=(e=this.props).onChangeTargets)===null||n===void 0||n.call(e,{moveable:this.moveable,targets:this._elementTargets}),(a=this._onChangeTargets)===null||a===void 0||a.call(this));var l=T(this._updateRefs(),3),f=l[0],v=l[1],c=l[2];this.refTargets=f,this.selectorMap=v,c&&this.forceUpdate()},r.defaultAbles=[],r.customStyledMap={},r.defaultStyled=null,Qf([_l(hs)],r.prototype,"moveable",void 0),r}(Wo),Td=function(t){ke(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.defaultAbles=li,r}(Md),Ea=function(t,r){return Ea=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])},Ea(t,r)};function fi(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");Ea(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var Te=function(){return Te=Object.assign||function(r){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Te.apply(this,arguments)};function Od(t,r,e,n){var a=arguments.length,i=a<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,r,e,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(r,e,i):o(r,e))||i);return a>3&&i&&Object.defineProperty(r,e,i),i}var Rd=function(t){fi(r,t);function r(n){var a=t.call(this,n)||this;return a.state={},a.state=a.props,a}var e=r.prototype;return e.render=function(){return ar(Td,Te({ref:dr(this,"moveable")},this.state))},r}(za),Pd=Ed,Id=hs,Ad=_d,zd=function(t){fi(r,t);function r(n,a){a===void 0&&(a={});var i=t.call(this)||this;i.containerProvider=null,i.selfElement=null,i._warp=!1;var o=Te({},a),s={};Ad.forEach(function(f){s[Il("on ".concat(f))]=function(v){return i.trigger(f,v)}});var u;a.warpSelf?(delete a.warpSelf,i._warp=!0,u=n):(u=le(n).createElement("div"),n.appendChild(u)),i.containerProvider=Pi(ar(Rd,Te({ref:dr(i,"innerMoveable")},o,s)),u),i.selfElement=u;var l=o.target;return wt(l)&&l.length>1&&i.updateRect(),i}var e=r.prototype;return e.setState=function(n,a){this.innerMoveable.setState(n,a)},e.forceUpdate=function(n){this.innerMoveable.forceUpdate(n)},e.dragStart=function(n,a){a===void 0&&(a=n.target);var i=this.innerMoveable;i.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(n,a)},e.destroy=function(){var n,a=this.selfElement;Pi(null,a,this.containerProvider),this._warp||(n=a==null?void 0:a.parentElement)===null||n===void 0||n.removeChild(a),this.containerProvider=null,this.off(),this.selfElement=null,this.innerMoveable=null},e.getMoveable=function(){return this.innerMoveable.moveable},r=Od([_i(Id,function(n,a){n[a]||(n[a]=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var s=this.getMoveable();if(!(!s||!s[a]))return s[a].apply(s,i)})}),_i(Pd,function(n,a){Object.defineProperty(n,a,{get:function(){return this.getMoveable().props[a]},set:function(i){var o;this.setState((o={},o[a]=i,o))},enumerable:!0,configurable:!0})})],r),r}(bn),Bd=function(t){fi(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r}(zd);const Gd=["data-entity-id"],kd=yr({__name:"Entity",props:{entityId:{}},setup(t){const r=Yr(),{entitiesData:e,entitiesObjs:n,focus:a}=gr(r),i=t,o=Zt();let s=null;function u(){s=new Bd(document.querySelector('[data-screen="screen"]'),{target:o.value,container:document.querySelector('[data-screen="screen"]'),draggable:!0,resizable:!0,scalable:!1,rotatable:r.entitiesData[i.entityId].rotateAble,warpable:!1,pinchable:!0,origin:r.entitiesData[i.entityId].rotateAble,edge:!1,throttleDrag:1,throttleResize:1,throttleRotate:1}),s.on("drag",({left:f,top:v})=>{console.log("onDrag left, top",f,v),r.entitiesData[i.entityId].top=Math.round(v),r.entitiesData[i.entityId].left=Math.round(f)}),s.on("resize",({width:f,height:v,target:c,delta:d,dist:p,transform:h,clientX:g,clientY:m})=>{console.log("onResize",f,v,c,d,p,h,g,m),c.style.width=f+"px",c.style.height=v+"px",c.style.transform=h}).on("resizeEnd",f=>{if(!f.isDrag)return;const{target:v,isDrag:c,clientX:d,clientY:p,lastEvent:h}=f;console.log(f);function g(x){const y=/translate\((-?\d+(\.\d+)?)px, (-?\d+(\.\d+)?)px\)/,S=x.match(y);return S?[parseFloat(S[1]),parseFloat(S[3])]:[0,0]}const m=g(h.transform);console.log(h.transform,m),r.entitiesData[i.entityId].top=Math.round(r.entitiesData[i.entityId].top+m[1]),r.entitiesData[i.entityId].left=Math.round(r.entitiesData[i.entityId].left+m[0]),r.entitiesData[i.entityId].width=h.width,r.entitiesData[i.entityId].height=h.height}),s.on("rotate",({transform:f,target:v,rotate:c})=>{v.style.transform=f,r.entitiesData[i.entityId].rotate=c}).on("rotateEnd",({lastEvent:f})=>{}),s.getManager().controlBox.style.visibility="visible",window.addEventListener("resize",f=>{s&&s.updateRect()})}bo(()=>{u(),ku(a,f=>{s&&(f===i.entityId?(console.log(s.getManager().controlBox),s.getManager().controlBox.style.visibility="visible"):s.getManager().controlBox.style.visibility="hidden")})});const l=Zn(()=>r.entitiesData[i.entityId]);return(f,v)=>(ct(),At("div",{ref_key:"target",ref:o,"data-entity-id":f.entityId,style:Tr({width:tt(e)[f.entityId].width+"px",height:tt(e)[f.entityId].height+"px",top:l.value.top+"px",left:l.value.left+"px",transform:`rotate(${l.value.rotate}deg)`,position:"absolute",overflow:l.value.overflow}),onMousedown:v[0]||(v[0]=c=>tt(r).setFocus(f.entityId))},[(ct(),Kt(Fu(tt(n)[f.entityId].render()),{style:{"pointer-events":"none"}}))],44,Gd))}}),Fd={class:"screen-selection"},Nd={class:"screen-tip"},Ld={key:0},Wd={key:1},Hd=yr({__name:"Screens",setup(t){const r=Zt(1),e=()=>{window.innerHeight<=550?r.value=.5:window.innerHeight<=900?r.value=.8:r.value=1};bo(()=>{e(),window.addEventListener("resize",e)}),Nu(()=>{window.removeEventListener("resize",e)});const n=Re(),{nowScreenData:a,nowScreen:i}=gr(n),o=Zt(null),s=Zt(null);function u(h){h.preventDefault()}function l(h){var g;if(s.value){const m=s.value.getBoundingClientRect(),x=m.left,y=m.top;let S=((g=h.dataTransfer)==null?void 0:g.getData("WIDGET_TYPE"))||"";const _=h.pageX-x,b=h.pageY-y;console.log(x,y),console.log("[Screen]drop widget.type:",S,"posX",_,"poxY",b),n.addEntity(S,_,b)}console.log(h)}const f=Yr(),{entitiesIdByScreen:v,entitiesData:c,focus:d}=gr(f);function p(h){h.target.attributes&&h.target.attributes["data-screen"]&&h.target.attributes["data-screen"].value==="screen"&&f.setFocus("SCREEN")}return(h,g)=>{var m,x,y,S,_,b;return ct(),At(ur,null,[Bt("div",Fd,[ut(yl)]),Bt("div",{class:"screen-container",ref_key:"container",ref:o,onDragover:u,onDrop:l},[Bt("div",{class:"screen-stage",style:Tr({transform:`scale(${r.value})`,width:`${(m=tt(a))==null?void 0:m.width}px`,height:`${(x=tt(a))==null?void 0:x.height}px`}),ref_key:"stage",ref:s,"data-screen":"stage"},[Bt("div",Nd,[tt(d)==="SCREEN"?(ct(),At("span",Ld,Ut((y=tt(a))==null?void 0:y.name)+" 高:"+Ut((S=tt(a))==null?void 0:S.height)+"px 宽:"+Ut((_=tt(a))==null?void 0:_.width)+"px SID:"+Ut((b=tt(a))==null?void 0:b.id),1)):(ct(),At("span",Wd,Ut(tt(c)[tt(d)].name)+" 高:"+Ut(tt(c)[tt(d)].height)+"px 宽:"+Ut(tt(c)[tt(d)].width)+"px X:"+Ut(tt(c)[tt(d)].left)+"px Y:"+Ut(tt(c)[tt(d)].top)+"px EID:"+Ut(tt(c)[tt(d)].id),1))]),Bt("div",{class:"screen","data-screen":"screen",onMousedown:p,style:Tr({outline:tt(d)==="SCREEN"?"2px solid #4af":""})},[(ct(!0),At(ur,null,Dr(tt(v),E=>(ct(),Kt(kd,{entityId:E},null,8,["entityId"]))),256))],36)],4)],544)],64)}}}),Yd=Xr(Hd,[["__scopeId","data-v-fe30a424"]]),Xd={class:"toolbox-item-icon"},Vd=["src"],qd=yr({__name:"ToolboxItem",props:{icon:{},name:{},id:{},color:{}},setup(t){const r=Yr(),{entitiesIdByScreen:e,entitiesData:n,focus:a,lastFocus:i}=gr(r),o=t,s=Zn(()=>a.value===o.id?o.color:l.value||i.value===o.id?o.color+"22":"#ffffff"),u=Zn(()=>a.value===o.id?"#ffffff":"#33383d"),l=Zt(!1);function f(){console.log("[Toolbox]onClick. id=",o.id)}function v(){console.log("[Toolbox]onContextMenu. id=",o.id)}return(c,d)=>(ct(),At("div",{class:"toolbox-item",style:Tr({backgroundColor:s.value}),onMouseenter:d[0]||(d[0]=p=>l.value=!0),onMouseleave:d[1]||(d[1]=p=>l.value=!1),onClick:f,onContextmenu:v},[Bt("div",Xd,[Bt("img",{src:c.icon,alt:"toolbox-item-icon",width:"24px",height:"24px"},null,8,Vd)]),Bt("span",{style:Tr({color:u.value}),class:"toolbox-item-text"},Ut(c.name),5)],36))}}),go=Xr(qd,[["__scopeId","data-v-7b8250bc"]]),jd=yr({__name:"Toolbox",setup(t){const r=Oe(),e=Yr(),{entitiesIdByScreen:n,entitiesData:a,focus:i,lastFocus:o}=gr(e),{widgets:s}=gr(r);return(u,l)=>{const f=Ot("a-collapse-panel"),v=Ot("a-collapse");return ct(),Kt(v,{defaultActiveKey:["ui","feature"],bordered:!1,size:"small",class:"toolbox"},{default:ht(()=>[ut(f,{header:"通用",key:"feature"},{default:ht(()=>[(ct(!0),At(ur,null,Dr(tt(n),c=>(ct(),Kt(go,{id:c,color:tt(a)[c].color,icon:tt(s)[tt(a)[c].type][0].icon,name:tt(a)[c].name},null,8,["id","color","icon","name"]))),256))]),_:1}),ut(f,{header:"界面",key:"ui"},{default:ht(()=>[(ct(!0),At(ur,null,Dr(tt(n),c=>(ct(),Kt(go,{id:c,color:tt(a)[c].color,icon:tt(s)[tt(a)[c].type][0].icon,name:tt(a)[c].name},null,8,["id","color","icon","name"]))),256))]),_:1})]),_:1})}}}),Ud=Xr(jd,[["__scopeId","data-v-cdb51def"]]),Kd={style:{overflow:"scroll","max-height":"calc(100vh - 52px)"}},Zd=yr({__name:"Editor",setup(t){const{useToken:r}=_o,{token:e}=r(),n=Zt(560);let a=!1,i=0;const o=c=>{a=!0,i=c.clientX||c.touches[0].clientX,document.addEventListener("mousemove",s),document.addEventListener("mouseup",u)},s=c=>{if(!a)return;const d=c.clientX||c.touches[0].clientX,p=d-i;n.value+=p,i=d},u=()=>{a=!1,document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",u)},l=Zt(!0),f=Zt(!0),v=Do();return(c,d)=>{const p=Ot("a-layout-header"),h=Ot("a-layout-sider"),g=Ot("a-layout-content"),m=Ot("a-layout");return ct(),Kt(m,null,{default:ht(()=>[ut(p,{style:{padding:"0",height:"52px",overflow:"hidden","z-index":"10"}},{default:ht(()=>[ut(fl)]),_:1}),ut(m,{style:{height:"calc(100vh - 52px)"}},{default:ht(()=>[l.value?(ct(),Kt(h,{key:0,width:l.value&&f.value?n.value:"100%",style:{"background-color":"#eee"}},{default:ht(()=>[ut(m,{style:{height:"calc(100vh - 52px)"}},{default:ht(()=>[ut(h,{style:{height:"calc(100vh - 52px)"},width:"145px"},{default:ht(()=>[ut(xl)]),_:1}),ut(g,{style:{height:"calc(100vh - 52px)"}},{default:ht(()=>[ut(Yd)]),_:1})]),_:1})]),_:1},8,["width"])):Bn("",!0),f.value&&l.value?(ct(),At("div",{key:1,class:"sider-size-changer",style:Tr({backgroundColor:tt(e).colorPrimary}),onMousedown:o},null,36)):Bn("",!0),f.value?(ct(),Kt(g,{key:2,style:{"background-color":"#fff"}},{default:ht(()=>[ut(m,{style:{height:"calc(100vh - 52px)"}},{default:ht(()=>[ut(h,{style:{height:"calc(100vh - 52px)","background-color":"#f2f2f2"},width:"150px"},{default:ht(()=>[ut(Ud)]),_:1}),ut(g,{style:{height:"calc(100vh - 52px)"}},{default:ht(()=>[Bt("pre",Kd,Ut(JSON.stringify(tt(v).getWorkData,null,2)),1)]),_:1})]),_:1})]),_:1})):Bn("",!0)]),_:1})]),_:1})}}}),Jd=Xr(Zd,[["__scopeId","data-v-e52490ca"]]);export{Jd as default};
